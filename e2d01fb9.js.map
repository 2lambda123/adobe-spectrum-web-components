{"version":3,"file":"e2d01fb9.js","sources":["../../../tools/reactive-controllers/src/ElementResolution.js"],"sourcesContent":["\"use strict\";export const elementResolverUpdatedSymbol=Symbol(\"element resolver updated\");export class ElementResolutionController{constructor(e,{selector:t}={selector:\"\"}){this._element=null;this._selector=\"\";this.mutationCallback=e=>{let t=!1;e.forEach(s=>{if(!t){if(s.type===\"childList\"){const l=this.element&&[...s.removedNodes].includes(this.element),n=!!this.selector&&[...s.addedNodes].some(r=>{var o;return(o=r==null?void 0:r.matches)==null?void 0:o.call(r,this.selector)});t=t||l||n}if(s.type===\"attributes\"){const l=s.target===this.element,n=!!this.selector&&s.target.matches(this.selector);t=t||l||n}}}),t&&this.resolveElement()};this.host=e,this.selector=t,this.observer=new MutationObserver(this.mutationCallback),this.host.addController(this)}get element(){return this._element}set element(e){if(e===this.element)return;const t=this.element;this._element=e,this.host.requestUpdate(elementResolverUpdatedSymbol,t)}get selector(){return this._selector}set selector(e){e!==this.selector&&(this.releaseElement(),this._selector=e,this.resolveElement())}hostConnected(){this.resolveElement(),this.observer.observe(this.host.getRootNode(),{subtree:!0,childList:!0,attributes:!0})}hostDisconnected(){this.releaseElement(),this.observer.disconnect()}resolveElement(){if(!this.selector){this.releaseElement();return}const e=this.host.getRootNode();this.element=e.querySelector(this.selector)}releaseElement(){this.element=null}}\n//# sourceMappingURL=ElementResolution.js.map\n"],"names":["elementResolverUpdatedSymbol","Symbol","ElementResolutionController","constructor","host","selector","this","_element","_selector","mutationCallback","mutationList","t","forEach","mutation","type","element","removedNodes","includes","matchingElementAdded","addedNodes","some","el","matches","o","call","r","needsResolution","currentElementRemoved","attributeChangedOnCurrentElement","target","attributeChangedOnMatchingElement","resolveElement","observer","MutationObserver","addController","previous","requestUpdate","releaseElement","hostConnected","observe","getRootNode","subtree","childList","attributes","hostDisconnected","disconnect","e","parent","querySelector"],"mappings":"AAaaA,QAA+BC,OAAO,kCAEoBC,EAiCnEC,YACIC,GACEC,SAAAA,GAAmC,CAAEA,SAAU,KArBrDC,KAAQC,SAA+B,KAiBvCD,KAAQE,UAAY,GAcpBF,KAAUG,iBAAsCC,IAC5C,IAAsBC,GAAA,EACtBD,EAAaE,SAASC,IAClB,MACA,CAAA,GAAsB,cAAlBA,EAASC,KAAsB,CAC/B,QACIR,KAAKS,SACL,IAAIF,EAASG,cAAcC,SAASX,KAAKS,SACvCG,IACAZ,KAAKD,UACN,IAAIQ,EAASM,YAA8BC,MAAMC,IAtEtE,MAuEwB,OAAc,OAAVC,EAAAA,MAAAA,OAAAA,EAAAA,EAAAA,cAAU,EAAAC,EAAAC,KAAAC,EAAAnB,KAAKD,SACvB,IACJqB,EACIA,GACAC,GACAT,CAER,CAAIL,GAAkB,eAAlBA,EAASC,KAAuB,CAChC,MAAMc,EACFf,EAASgB,SAAWvB,KAAKS,QACvBe,IACAxB,KAAKD,UACNQ,EAASgB,OAAuBP,QAAQhB,KAAKD,UAClDqB,EACIA,GACAE,GACAE,CACR,CACJ,KACIJ,GACApB,KAAKyB,gBA7BTrB,EAVAJ,KAAKF,KAAOA,EACZE,KAAKD,SAAWA,EAChBC,KAAK0B,SAAW,IAAAC,iBAAqB3B,KAAKG,kBAG1CH,KAAKF,KAAK8B,cAAc5B,KAzC5B,CAAkCS,cAC9B,OAAOT,KAAKC,QAGhB,CAAYQ,YAAAA,GACR,GAAIA,IAAYT,KAAKS,QAAS,OAC9B,MAAMoB,EAAW7B,KAAKS,QACtBT,KAAKC,SAAWQ,EAGhBT,KAAKF,KAAKgC,cAAcpC,EAA8BmC,EAS1D,CAAI9B,eACA,OAAOC,KAAKE,SAGhB,CAAaH,aAAAA,GACLA,IAAaC,KAAKD,WACtBC,KAAK+B,iBACL/B,KAAKE,UAAYH,EACjBC,KAAKyB,iBAoDF,CAAsBO,gBACzBhC,KAAKyB,iBACLzB,KAAK0B,SAASO,QAAQjC,KAAKF,KAAKoC,cAAe,CAC3CC,SAAS,EACTC,WAAW,EACXC,YAAY,GAIb,CAAAC,mBACHtC,KAAK+B,iBACL/B,KAAK0B,SAASa,YAGV,kBACJ,IAAKvC,KAAKD,SAEN,YADAC,KAAK+B,iBAIT,MAAeS,EAAAxC,KAAKF,KAAKoC,cACzBlC,KAAKS,QAAUgC,EAAOC,cAAc1C,KAAKD,SAGrC,kBACJC,KAAKS,QAAU,IAEvB"}