{"version":3,"file":"b1244d84.js","sources":["../../../packages/overlay/src/active-overlay.css.js","../../../node_modules/@floating-ui/core/dist/floating-ui.core.esm.min.js","../../../node_modules/@floating-ui/dom/dist/floating-ui.dom.esm.min.js","../../../packages/overlay/src/ActiveOverlay.js","../../../packages/overlay/src/overlay-timer.js","../../../packages/overlay/active-overlay.js","../../../packages/overlay/src/overlay.js","../../../packages/overlay/src/overlay-stack.js"],"sourcesContent":["/*\nCopyright 2020 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\nimport { css } from '@spectrum-web-components/base';\nconst styles = css `\n@keyframes sp-overlay-fade-in{0%{opacity:0;transform:var(--sp-overlay-from)}to{opacity:1;transform:translate(0)}}@keyframes sp-overlay-fade-out{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:var(--sp-overlay-from)}}:host{display:inline-block;left:-9999em;pointer-events:none;position:absolute;top:-9999em;z-index:1000}:host(:focus){outline:none}:host([placement=none]){height:100vh;height:-webkit-fill-available;height:fill-available;left:0;max-height:var(--swc-visual-viewport-height);position:fixed;top:0}#contents,sp-theme{height:100%}#contents{animation-duration:var(\n--swc-test-duration,var(--spectrum-global-animation-duration-200,.16s)\n);animation-timing-function:var(\n--spectrum-global-animation-ease-out,ease-out\n);display:inline-block;opacity:1;pointer-events:none;visibility:visible}:host([actual-placement*=top]) #contents{--sp-overlay-from:translateY(var(--spectrum-global-dimension-size-75));align-items:flex-end;display:inline-flex}:host([actual-placement*=right]) #contents{--sp-overlay-from:translateX(calc(var(--spectrum-global-dimension-size-75)*-1))}:host([actual-placement*=bottom]) #contents{--sp-overlay-from:translateY(calc(var(--spectrum-global-dimension-size-75)*-1))}:host([actual-placement*=left]) #contents{--sp-overlay-from:translateX(var(--spectrum-global-dimension-size-75))}:host([animating]) ::slotted(*){pointer-events:none}:host(:not([animating])) ::slotted(*){pointer-events:auto}#contents ::slotted(*){position:relative}\n`;\nexport default styles;\n//# sourceMappingURL=active-overlay.css.js.map","function t(t){return t.split(\"-\")[0]}function e(t){return t.split(\"-\")[1]}function n(e){return[\"top\",\"bottom\"].includes(t(e))?\"x\":\"y\"}function r(t){return\"y\"===t?\"height\":\"width\"}function o(o){let{reference:i,floating:a,placement:l}=o;const s=i.x+i.width/2-a.width/2,c=i.y+i.height/2-a.height/2;let f;switch(t(l)){case\"top\":f={x:s,y:i.y-a.height};break;case\"bottom\":f={x:s,y:i.y+i.height};break;case\"right\":f={x:i.x+i.width,y:c};break;case\"left\":f={x:i.x-a.width,y:c};break;default:f={x:i.x,y:i.y}}const m=n(l),u=r(m);switch(e(l)){case\"start\":f[m]=f[m]-(i[u]/2-a[u]/2);break;case\"end\":f[m]=f[m]+(i[u]/2-a[u]/2)}return f}const i=async(t,e,n)=>{const{placement:r=\"bottom\",strategy:i=\"absolute\",middleware:a=[],platform:l}=n;let s=await l.getElementRects({reference:t,floating:e,strategy:i}),{x:c,y:f}=o({...s,placement:r}),m=r,u={};for(let n=0;n<a.length;n++){const{name:p,fn:g}=a[n],{x:d,y:h,data:y,reset:x}=await g({x:c,y:f,initialPlacement:r,placement:m,strategy:i,middlewareData:u,rects:s,platform:l,elements:{reference:t,floating:e}});c=null!=d?d:c,f=null!=h?h:f,u={...u,[p]:null!=y?y:{}},x&&(\"object\"==typeof x&&(x.placement&&(m=x.placement),x.rects&&(s=!0===x.rects?await l.getElementRects({reference:t,floating:e,strategy:i}):x.rects),({x:c,y:f}=o({...s,placement:m}))),n=-1)}return{x:c,y:f,placement:m,strategy:i,middlewareData:u}};function a(t){return\"number\"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}function l(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function s(t,e){void 0===e&&(e={});const{x:n,y:r,platform:o,rects:i,elements:s,strategy:c}=t,{boundary:f=\"clippingParents\",rootBoundary:m=\"viewport\",elementContext:u=\"floating\",altBoundary:p=!1,padding:g=0}=e,d=a(g),h=s[p?\"floating\"===u?\"reference\":\"floating\":u],y=await o.getClippingClientRect({element:await o.isElement(h)?h:h.contextElement||await o.getDocumentElement({element:s.floating}),boundary:f,rootBoundary:m}),x=l(await o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:\"floating\"===u?{...i.floating,x:n,y:r}:i.reference,offsetParent:await o.getOffsetParent({element:s.floating}),strategy:c}));return{top:y.top-x.top+d.top,bottom:x.bottom-y.bottom+d.bottom,left:y.left-x.left+d.left,right:x.right-y.right+d.right}}const c=Math.min,f=Math.max;function m(t,e,n){return f(t,c(e,n))}const u=e=>({name:\"arrow\",options:e,async fn(o){const{element:i,padding:l=0}=null!=e?e:{},{x:s,y:c,placement:f,rects:u,platform:p}=o;if(null==i)return{};const g=a(l),d={x:s,y:c},h=n(t(f)),y=r(h),x=await p.getDimensions({element:i}),w=\"y\"===h?\"top\":\"left\",b=\"y\"===h?\"bottom\":\"right\",v=u.reference[y]+u.reference[h]-d[h]-u.floating[y],A=d[h]-u.reference[h],P=await p.getOffsetParent({element:i}),k=P?\"y\"===h?P.clientHeight||0:P.clientWidth||0:0,R=v/2-A/2,D=g[w],O=k-x[y]-g[b],C=k/2-x[y]/2+R,E=m(D,C,O);return{data:{[h]:E,centerOffset:C-E}}}}),p={left:\"right\",right:\"left\",bottom:\"top\",top:\"bottom\"};function g(t){return t.replace(/left|right|bottom|top/g,(t=>p[t]))}function d(t,o){const i=\"start\"===e(t),a=n(t),l=r(a);let s=\"x\"===a?i?\"right\":\"left\":i?\"bottom\":\"top\";return o.reference[l]>o.floating[l]&&(s=g(s)),{main:s,cross:g(s)}}const h={start:\"end\",end:\"start\"};function y(t){return t.replace(/start|end/g,(t=>h[t]))}const x=[\"top\",\"right\",\"bottom\",\"left\"],w=x.reduce(((t,e)=>t.concat(e,e+\"-start\",e+\"-end\")),[]);const b=function(n){return void 0===n&&(n={}),{name:\"autoPlacement\",options:n,async fn(r){var o,i,a,l,c,f;const{x:m,y:u,rects:p,middlewareData:g,placement:h}=r,{alignment:x=null,allowedPlacements:b=w,autoAlignment:v=!0,...A}=n;if(null!=(o=g.autoPlacement)&&o.skip)return{};const P=function(n,r,o){return(n?[...o.filter((t=>e(t)===n)),...o.filter((t=>e(t)!==n))]:o.filter((e=>t(e)===e))).filter((t=>!n||e(t)===n||!!r&&y(t)!==t))}(x,v,b),k=await s(r,A),R=null!=(i=null==(a=g.autoPlacement)?void 0:a.index)?i:0,D=P[R],{main:O,cross:C}=d(D,p);if(h!==D)return{x:m,y:u,reset:{placement:P[0]}};const E=[k[t(D)],k[O],k[C]],B=[...null!=(l=null==(c=g.autoPlacement)?void 0:c.overflows)?l:[],{placement:D,overflows:E}],H=P[R+1];if(H)return{data:{index:R+1,overflows:B},reset:{placement:H}};const z=B.slice().sort(((t,e)=>t.overflows[0]-e.overflows[0])),F=null==(f=z.find((t=>{let{overflows:e}=t;return e.every((t=>t<=0))})))?void 0:f.placement;return{data:{skip:!0},reset:{placement:null!=F?F:z[0].placement}}}}};const v=function(e){return void 0===e&&(e={}),{name:\"flip\",options:e,async fn(n){var r,o;const{placement:i,middlewareData:a,rects:l,initialPlacement:c}=n;if(null!=(r=a.flip)&&r.skip)return{};const{mainAxis:f=!0,crossAxis:m=!0,fallbackPlacements:u,fallbackStrategy:p=\"bestFit\",flipAlignment:h=!0,...x}=e,w=t(i),b=u||(w===c||!h?[g(c)]:function(t){const e=g(t);return[y(t),e,y(e)]}(c)),v=[c,...b],A=await s(n,x),P=[];let k=(null==(o=a.flip)?void 0:o.overflows)||[];if(f&&P.push(A[w]),m){const{main:t,cross:e}=d(i,l);P.push(A[t],A[e])}if(k=[...k,{placement:i,overflows:P}],!P.every((t=>t<=0))){var R,D;const t=(null!=(R=null==(D=a.flip)?void 0:D.index)?R:0)+1,e=v[t];if(e)return{data:{index:t,overflows:k},reset:{placement:e}};let n=\"bottom\";switch(p){case\"bestFit\":{var O;const t=null==(O=k.slice().sort(((t,e)=>t.overflows.filter((t=>t>0)).reduce(((t,e)=>t+e),0)-e.overflows.filter((t=>t>0)).reduce(((t,e)=>t+e),0)))[0])?void 0:O.placement;t&&(n=t);break}case\"initialPlacement\":n=c}return{data:{skip:!0},reset:{placement:n}}}return{}}}};function A(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function P(t){return x.some((e=>t[e]>=0))}const k=()=>({name:\"hide\",async fn(t){const e=await s(t,{elementContext:\"reference\"}),n=await s(t,{altBoundary:!0}),r=A(e,t.rects.reference),o=A(n,t.rects.floating);return{data:{referenceHidden:P(r),referenceHiddenOffsets:r,escaped:P(o),escapedOffsets:o}}}});const R=function(e){return void 0===e&&(e=0),{name:\"offset\",options:e,fn(r){const{x:o,y:i,placement:a,rects:l}=r,s=function(e){let{placement:r,rects:o,value:i}=e;const a=t(r),l=[\"left\",\"top\"].includes(a)?-1:1,s=\"function\"==typeof i?i({...o,placement:r}):i,{mainAxis:c,crossAxis:f}=\"number\"==typeof s?{mainAxis:s,crossAxis:0}:{mainAxis:0,crossAxis:0,...s};return\"x\"===n(a)?{x:f,y:c*l}:{x:c*l,y:f}}({placement:a,rects:l,value:e});return{x:o+s.x,y:i+s.y,data:s}}}};function D(t){return\"x\"===t?\"y\":\"x\"}const O=function(e){return void 0===e&&(e={}),{name:\"shift\",options:e,async fn(r){const{x:o,y:i,placement:a}=r,{mainAxis:l=!0,crossAxis:c=!1,limiter:f={fn:t=>{let{x:e,y:n}=t;return{x:e,y:n}}},...u}=e,p={x:o,y:i},g=await s(r,u),d=n(t(a)),h=D(d);let y=p[d],x=p[h];if(l){const t=\"y\"===d?\"bottom\":\"right\";y=m(y+g[\"y\"===d?\"top\":\"left\"],y,y-g[t])}if(c){const t=\"y\"===h?\"bottom\":\"right\";x=m(x+g[\"y\"===h?\"top\":\"left\"],x,x-g[t])}const w=f.fn({...r,[d]:y,[h]:x});return{...w,data:{x:w.x-o,y:w.y-i}}}}},C=function(e){return void 0===e&&(e={}),{options:e,fn(r){const{x:o,y:i,placement:a,rects:l,middlewareData:s}=r,{offset:c=0,mainAxis:f=!0,crossAxis:m=!0}=e,u={x:o,y:i},p=n(a),g=D(p);let d=u[p],h=u[g];const y=\"function\"==typeof c?c({...l,placement:a}):c,x=\"number\"==typeof y?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(f){const t=\"y\"===p?\"height\":\"width\",e=l.reference[p]-l.floating[t]+x.mainAxis,n=l.reference[p]+l.reference[t]-x.mainAxis;d<e?d=e:d>n&&(d=n)}if(m){var w,b,v,A;const e=\"y\"===p?\"width\":\"height\",n=[\"top\",\"left\"].includes(t(a)),r=l.reference[g]-l.floating[e]+(n&&null!=(w=null==(b=s.offset)?void 0:b[g])?w:0)+(n?0:x.crossAxis),o=l.reference[g]+l.reference[e]+(n?0:null!=(v=null==(A=s.offset)?void 0:A[g])?v:0)-(n?x.crossAxis:0);h<r?h=r:h>o&&(h=o)}return{[p]:d,[g]:h}}}},E=function(n){return void 0===n&&(n={}),{name:\"size\",options:n,async fn(r){var o;const{placement:i,rects:a,middlewareData:l}=r,{apply:c,...m}=n;if(null!=(o=l.size)&&o.skip)return{};const u=await s(r,m),p=t(i),g=\"end\"===e(i);let d,h;\"top\"===p||\"bottom\"===p?(d=p,h=g?\"left\":\"right\"):(h=p,d=g?\"top\":\"bottom\");const y=f(u.left,0),x=f(u.right,0),w=f(u.top,0),b=f(u.bottom,0),v={height:a.floating.height-([\"left\",\"right\"].includes(i)?2*(0!==w||0!==b?w+b:f(u.top,u.bottom)):u[d]),width:a.floating.width-([\"top\",\"bottom\"].includes(i)?2*(0!==y||0!==x?y+x:f(u.left,u.right)):u[h])};return null==c||c({...v,...a}),{data:{skip:!0},reset:{rects:!0}}}}},B=function(e){return void 0===e&&(e={}),{name:\"inline\",options:e,async fn(r){var o,i;const{placement:s,elements:m,rects:u,platform:p,strategy:g,middlewareData:d}=r,{padding:h=2,x:y,y:x}=e;if(null!=(o=d.inline)&&o.skip)return{};const w=l(await p.convertOffsetParentRelativeRectToViewportRelativeRect({rect:u.reference,offsetParent:await p.getOffsetParent({element:m.floating}),strategy:g})),b=Array.from(null!=(i=await(null==p.getClientRects?void 0:p.getClientRects({element:m.reference})))?i:[]),v=a(h);return{data:{skip:!0},reset:{rects:await p.getElementRects({reference:{getBoundingClientRect:function(){var e;if(2===b.length&&b[0].left>b[1].right&&null!=y&&null!=x)return null!=(e=b.find((t=>y>t.left-v.left&&y<t.right+v.right&&x>t.top-v.top&&x<t.bottom+v.bottom)))?e:w;if(b.length>=2){if(\"x\"===n(s)){const e=b[0],n=b[b.length-1],r=\"top\"===t(s),o=e.top,i=n.bottom,a=r?e.left:n.left,l=r?e.right:n.right;return{top:o,bottom:i,left:a,right:l,width:l-a,height:i-o,x:a,y:o}}const e=\"left\"===t(s),r=f(...b.map((t=>t.right))),o=c(...b.map((t=>t.left))),i=b.filter((t=>e?t.left===o:t.right===r)),a=i[0].top,l=i[i.length-1].bottom;return{top:a,bottom:l,left:o,right:r,width:r-o,height:l-a,x:o,y:a}}return w}},floating:m.floating,strategy:g})}}}}};export{u as arrow,b as autoPlacement,i as computePosition,s as detectOverflow,v as flip,k as hide,B as inline,C as limitShift,R as offset,l as rectToClientRect,O as shift,E as size};\n","import{rectToClientRect as t,computePosition as e}from\"@floating-ui/core\";export{arrow,autoPlacement,detectOverflow,flip,hide,inline,limitShift,offset,shift,size}from\"@floating-ui/core\";function n(t){return\"[object Window]\"===(null==t?void 0:t.toString())}function o(t){if(null==t)return window;if(!n(t)){const e=t.ownerDocument;return e&&e.defaultView||window}return t}function i(t){return o(t).getComputedStyle(t)}function r(t){return n(t)?\"\":t?(t.nodeName||\"\").toLowerCase():\"\"}function l(t){return t instanceof o(t).HTMLElement}function c(t){return t instanceof o(t).Element}function f(t){return t instanceof o(t).ShadowRoot||t instanceof ShadowRoot}function u(t){const{overflow:e,overflowX:n,overflowY:o}=i(t);return/auto|scroll|overlay|hidden/.test(e+o+n)}function s(t){return[\"table\",\"td\",\"th\"].includes(r(t))}function h(t){const e=navigator.userAgent.toLowerCase().includes(\"firefox\"),n=i(t);return\"none\"!==n.transform||\"none\"!==n.perspective||\"paint\"===n.contain||[\"transform\",\"perspective\"].includes(n.willChange)||e&&\"filter\"===n.willChange||e&&!!n.filter&&\"none\"!==n.filter}const d=Math.min,a=Math.max,g=Math.round;function p(t,e){void 0===e&&(e=!1);const n=t.getBoundingClientRect();let o=1,i=1;return e&&l(t)&&(o=t.offsetWidth>0&&g(n.width)/t.offsetWidth||1,i=t.offsetHeight>0&&g(n.height)/t.offsetHeight||1),{width:n.width/o,height:n.height/i,top:n.top/i,right:n.right/o,bottom:n.bottom/i,left:n.left/o,x:n.left/o,y:n.top/i}}function m(t){return(e=t,(e instanceof o(e).Node?t.ownerDocument:t.document)||window.document).documentElement;var e}function w(t){return n(t)?{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}:{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function y(t){return p(m(t)).left+w(t).scrollLeft}function x(t,e,n){const o=l(e),i=m(e),c=p(t,o&&function(t){const e=p(t);return g(e.width)!==t.offsetWidth||g(e.height)!==t.offsetHeight}(e));let f={scrollLeft:0,scrollTop:0};const s={x:0,y:0};if(o||!o&&\"fixed\"!==n)if((\"body\"!==r(e)||u(i))&&(f=w(e)),l(e)){const t=p(e,!0);s.x=t.x+e.clientLeft,s.y=t.y+e.clientTop}else i&&(s.x=y(i));return{x:c.left+f.scrollLeft-s.x,y:c.top+f.scrollTop-s.y,width:c.width,height:c.height}}function v(t){return\"html\"===r(t)?t:t.assignedSlot||t.parentNode||(f(t)?t.host:null)||m(t)}function b(t){return l(t)&&\"fixed\"!==getComputedStyle(t).position?t.offsetParent:null}function L(t){const e=o(t);let n=b(t);for(;n&&s(n)&&\"static\"===getComputedStyle(n).position;)n=b(n);return n&&(\"html\"===r(n)||\"body\"===r(n)&&\"static\"===getComputedStyle(n).position&&!h(n))?e:n||function(t){let e=v(t);for(;l(e)&&![\"html\",\"body\"].includes(r(e));){if(h(e))return e;e=e.parentNode}return null}(t)||e}function W(t){return{width:t.offsetWidth,height:t.offsetHeight}}function T(t){return[\"html\",\"body\",\"#document\"].includes(r(t))?t.ownerDocument.body:l(t)&&u(t)?t:T(v(t))}function C(t,e){var n;void 0===e&&(e=[]);const i=T(t),r=i===(null==(n=t.ownerDocument)?void 0:n.body),l=o(i),c=r?[l].concat(l.visualViewport||[],u(i)?i:[]):i,f=e.concat(c);return r?f:f.concat(C(v(c)))}function R(e,n){return\"viewport\"===n?t(function(t){const e=o(t),n=m(t),i=e.visualViewport;let r=n.clientWidth,l=n.clientHeight,c=0,f=0;return i&&(r=i.width,l=i.height,Math.abs(e.innerWidth/i.scale-i.width)<.01&&(c=i.offsetLeft,f=i.offsetTop)),{width:r,height:l,x:c,y:f}}(e)):c(n)?function(t){const e=p(t),n=e.top+t.clientTop,o=e.left+t.clientLeft;return{top:n,left:o,x:o,y:n,right:o+t.clientWidth,bottom:n+t.clientHeight,width:t.clientWidth,height:t.clientHeight}}(n):t(function(t){var e;const n=m(t),o=w(t),r=null==(e=t.ownerDocument)?void 0:e.body,l=a(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),c=a(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0);let f=-o.scrollLeft+y(t);const u=-o.scrollTop;return\"rtl\"===i(r||n).direction&&(f+=a(n.clientWidth,r?r.clientWidth:0)-l),{width:l,height:c,x:f,y:u}}(m(e)))}function H(t){const e=C(v(t)),n=[\"absolute\",\"fixed\"].includes(i(t).position)&&l(t)?L(t):t;return c(n)?e.filter((t=>c(t)&&function(t,e){const n=null==e.getRootNode?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&f(n)){let n=e;do{if(n&&t===n)return!0;n=n.parentNode||n.host}while(n)}return!1}(t,n)&&\"body\"!==r(t))):[]}const S={getElementRects:t=>{let{reference:e,floating:n,strategy:o}=t;return{reference:x(e,L(n),o),floating:{...W(n),x:0,y:0}}},convertOffsetParentRelativeRectToViewportRelativeRect:t=>function(t){let{rect:e,offsetParent:n,strategy:o}=t;const i=l(n),c=m(n);if(n===c)return e;let f={scrollLeft:0,scrollTop:0};const s={x:0,y:0};if((i||!i&&\"fixed\"!==o)&&((\"body\"!==r(n)||u(c))&&(f=w(n)),l(n))){const t=p(n,!0);s.x=t.x+n.clientLeft,s.y=t.y+n.clientTop}return{...e,x:e.x-f.scrollLeft+s.x,y:e.y-f.scrollTop+s.y}}(t),getOffsetParent:t=>{let{element:e}=t;return L(e)},isElement:t=>c(t),getDocumentElement:t=>{let{element:e}=t;return m(e)},getClippingClientRect:t=>function(t){let{element:e,boundary:n,rootBoundary:o}=t;const i=[...\"clippingParents\"===n?H(e):[].concat(n),o],r=i[0],l=i.reduce(((t,n)=>{const o=R(e,n);return t.top=a(o.top,t.top),t.right=d(o.right,t.right),t.bottom=d(o.bottom,t.bottom),t.left=a(o.left,t.left),t}),R(e,r));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}(t),getDimensions:t=>{let{element:e}=t;return W(e)},getClientRects:t=>{let{element:e}=t;return e.getClientRects()}},D=(t,n,o)=>e(t,n,{platform:S,...o});export{D as computePosition,C as getScrollParents};\n","/*\nCopyright 2020 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\nimport { __decorate } from \"tslib\";\nimport { html, SpectrumElement, } from '@spectrum-web-components/base';\nimport { ifDefined } from '@spectrum-web-components/base/src/directives.js';\nimport { property } from '@spectrum-web-components/base/src/decorators.js';\nimport { reparentChildren } from '@spectrum-web-components/shared/src/reparent-children.js';\nimport { firstFocusableIn } from '@spectrum-web-components/shared/src/first-focusable-in.js';\nimport styles from './active-overlay.css.js';\nimport { arrow, computePosition, flip, offset, shift, size, } from '@floating-ui/dom';\nconst stateMachine = {\n    initial: 'idle',\n    states: {\n        idle: {\n            on: {\n                active: 'active',\n            },\n        },\n        active: {\n            on: {\n                hiding: 'hiding',\n                idle: 'idle',\n            },\n        },\n        hiding: {\n            on: {\n                dispose: 'dispose',\n            },\n        },\n        dispose: {\n            on: {\n                disposed: 'disposed',\n            },\n        },\n        disposed: {\n            on: {},\n        },\n    },\n};\nconst stateTransition = (state, event) => {\n    if (!state)\n        return stateMachine.initial;\n    /* c8 ignore next */\n    if (!event)\n        return state;\n    return stateMachine.states[state].on[event] || state;\n};\nconst parentOverlayOf = (el) => {\n    const closestOverlay = el.closest('active-overlay');\n    if (closestOverlay) {\n        return closestOverlay;\n    }\n    const rootNode = el.getRootNode();\n    if (rootNode.host) {\n        return parentOverlayOf(rootNode.host);\n    }\n    return null;\n};\n/**\n * @element active-overlay\n *\n * @slot - content to display in the overlay\n */\nexport class ActiveOverlay extends SpectrumElement {\n    constructor() {\n        super();\n        this._state = stateTransition();\n        this.animating = false;\n        this.theme = {};\n        this.tabbingAway = false;\n        this.offset = 6;\n        this.skidding = 0;\n        this.interaction = 'hover';\n        this.positionAnimationFrame = 0;\n        this.willNotifyClosed = false;\n        this.isConstrained = false;\n        this.updateOverlayPosition = async () => {\n            if (!this.placement || this.placement === 'none') {\n                return;\n            }\n            await (document.fonts ? document.fonts.ready : Promise.resolve());\n            function roundByDPR(num) {\n                const dpr = window.devicePixelRatio || 1;\n                return Math.round(num * dpr) / dpr || -10000;\n            }\n            // See: https://spectrum.adobe.com/page/popover/#Container-padding\n            const REQUIRED_DISTANCE_TO_EDGE = 8;\n            // See: https://github.com/adobe/spectrum-web-components/issues/910\n            const MIN_OVERLAY_HEIGHT = 100;\n            const middleware = [\n                offset({\n                    mainAxis: this.offset,\n                    crossAxis: this.skidding,\n                }),\n                flip({\n                    fallbackStrategy: 'initialPlacement',\n                }),\n                shift({ padding: REQUIRED_DISTANCE_TO_EDGE }),\n                size({\n                    padding: REQUIRED_DISTANCE_TO_EDGE,\n                    apply: ({ width, height, floating }) => {\n                        const maxHeight = Math.max(MIN_OVERLAY_HEIGHT, Math.floor(height));\n                        const actualHeight = floating.height;\n                        this.initialHeight = !this.isConstrained\n                            ? actualHeight\n                            : this.initialHeight || actualHeight;\n                        this.isConstrained =\n                            actualHeight < this.initialHeight ||\n                                maxHeight <= actualHeight;\n                        const appliedHeight = this.isConstrained\n                            ? `${maxHeight}px`\n                            : '';\n                        Object.assign(this.style, {\n                            maxWidth: `${Math.floor(width)}px`,\n                            maxHeight: appliedHeight,\n                            height: appliedHeight,\n                        });\n                    },\n                }),\n            ];\n            if (this.overlayContentTip) {\n                middleware.push(arrow({ element: this.overlayContentTip }));\n            }\n            const { x, y, placement, middlewareData } = await computePosition(this.virtualTrigger || this.trigger, this, {\n                placement: this.placement,\n                middleware,\n            });\n            Object.assign(this.style, {\n                top: '0px',\n                left: '0px',\n                transform: `translate(${roundByDPR(x)}px, ${roundByDPR(y)}px)`,\n            });\n            if (placement !== this.getAttribute('actual-placement')) {\n                this.setAttribute('actual-placement', placement);\n                this.overlayContent.setAttribute('placement', placement);\n            }\n            if (this.overlayContentTip && middlewareData.arrow) {\n                const { x: arrowX, y: arrowY } = middlewareData.arrow;\n                Object.assign(this.overlayContentTip.style, {\n                    left: arrowX != null ? `${roundByDPR(arrowX)}px` : '',\n                    top: arrowY != null ? `${roundByDPR(arrowY)}px` : '',\n                    right: '',\n                    bottom: '',\n                });\n            }\n        };\n        this.handleInlineTriggerKeydown = (event) => {\n            const { code, shiftKey } = event;\n            /* c8 ignore next */\n            if (code !== 'Tab')\n                return;\n            if (shiftKey) {\n                this.tabbingAway = true;\n                this.dispatchEvent(new Event('close'));\n                return;\n            }\n            event.stopPropagation();\n            event.preventDefault();\n            this.focus();\n        };\n        this.stealOverlayContentPromise = Promise.resolve();\n        this.stealOverlayContentPromise = new Promise((res) => (this.stealOverlayContentResolver = res));\n    }\n    get state() {\n        return this._state;\n    }\n    set state(state) {\n        const nextState = stateTransition(this.state, state);\n        if (nextState === this.state) {\n            return;\n        }\n        this._state = nextState;\n        if (this.state === 'active' || this.state === 'hiding') {\n            this.setAttribute('state', this.state);\n        }\n        else {\n            this.removeAttribute('state');\n        }\n    }\n    async focus() {\n        const firstFocusable = firstFocusableIn(this);\n        if (firstFocusable) {\n            if (firstFocusable.updateComplete) {\n                await firstFocusable.updateComplete;\n            }\n            const activeElement = this.getRootNode()\n                .activeElement;\n            if (activeElement === this || !this.contains(activeElement)) {\n                firstFocusable.focus();\n            }\n            /* c8 ignore next 3 */\n        }\n        else {\n            super.focus();\n        }\n        this.removeAttribute('tabindex');\n    }\n    get hasTheme() {\n        return !!this.theme.color || !!this.theme.scale || !!this.theme.lang;\n    }\n    static get styles() {\n        return [styles];\n    }\n    get hasModalRoot() {\n        return !!this._modalRoot;\n    }\n    feature() {\n        this.tabIndex = -1;\n        const parentOverlay = parentOverlayOf(this.trigger);\n        const parentIsModal = parentOverlay && parentOverlay.slot === 'open';\n        if (parentIsModal) {\n            this._modalRoot = parentOverlay._modalRoot || parentOverlay;\n        }\n        // If an overlay it triggered from within a \"modal\" overlay, it needs to continue\n        // to act like one to get treated correctly in regards to tab trapping.\n        if (this.interaction === 'modal' || this._modalRoot) {\n            this.slot = 'open';\n            if (this.interaction === 'modal') {\n                this.setAttribute('aria-modal', 'true');\n            }\n            // If this isn't a modal root, walk up the overlays to the next modal root\n            // and \"feature\" each on of the intervening overlays.\n            if (this._modalRoot) {\n                parentOverlay === null || parentOverlay === void 0 ? void 0 : parentOverlay.feature();\n            }\n        }\n    }\n    obscure(nextOverlayInteraction) {\n        if (this.slot && nextOverlayInteraction === 'modal') {\n            this.removeAttribute('slot');\n            this.removeAttribute('aria-modal');\n            // Obscure upto and including the next modal root.\n            if (this.interaction !== 'modal') {\n                const parentOverlay = parentOverlayOf(this.trigger);\n                this._modalRoot = parentOverlay === null || parentOverlay === void 0 ? void 0 : parentOverlay.obscure(nextOverlayInteraction);\n                return this._modalRoot;\n            }\n            return this;\n        }\n        return undefined;\n    }\n    async firstUpdated(changedProperties) {\n        super.firstUpdated(changedProperties);\n        /* c8 ignore next */\n        if (!this.overlayContent || !this.trigger)\n            return;\n        this.stealOverlayContent(this.overlayContent);\n        this.state = 'active';\n        this.feature();\n        if (this.placement === 'none') {\n            this.style.setProperty('--swc-visual-viewport-height', `${window.innerHeight}px`);\n        }\n        else if (this.placement) {\n            await this.updateOverlayPosition();\n            document.addEventListener('sp-update-overlays', this.updateOverlayPosition);\n            window.addEventListener('scroll', this.updateOverlayPosition);\n        }\n        const actions = [];\n        if (this.placement && this.placement !== 'none') {\n            actions.push(this.applyContentAnimation('sp-overlay-fade-in'));\n        }\n        if (typeof this.overlayContent.updateComplete !==\n            'undefined') {\n            actions.push(this.overlayContent.updateComplete);\n        }\n        this.childrenReady = Promise.all(actions);\n    }\n    async openCallback() {\n        await this.updateComplete;\n        if (this.receivesFocus) {\n            await this.focus();\n        }\n        this.trigger.dispatchEvent(new CustomEvent('sp-opened', {\n            bubbles: true,\n            composed: true,\n            cancelable: true,\n            detail: {\n                interaction: this.interaction,\n            },\n        }));\n    }\n    open(openDetail) {\n        this.extractDetail(openDetail);\n    }\n    extractDetail(detail) {\n        this.overlayContent = detail.content;\n        this.overlayContentTip = detail.contentTip;\n        this.trigger = detail.trigger;\n        this.virtualTrigger = detail.virtualTrigger;\n        this.placement = detail.placement;\n        this.offset = detail.offset;\n        this.skidding = detail.skidding || 0;\n        this.interaction = detail.interaction;\n        this.theme = detail.theme;\n        this.receivesFocus = detail.receivesFocus;\n    }\n    dispose() {\n        /* c8 ignore next */\n        if (this.state !== 'dispose')\n            return;\n        /* c8 ignore next 4 */\n        if (this.timeout) {\n            clearTimeout(this.timeout);\n            delete this.timeout;\n        }\n        this.trigger.removeEventListener('keydown', this.handleInlineTriggerKeydown);\n        this.returnOverlayContent();\n        this.state = 'disposed';\n        if (this.willNotifyClosed) {\n            this.overlayContent.dispatchEvent(new Event('sp-overlay-closed'));\n            this.willNotifyClosed = false;\n        }\n    }\n    stealOverlayContent(element) {\n        this.originalPlacement = element.getAttribute('placement');\n        this.restoreContent = reparentChildren([element], this, (el) => {\n            const slotName = el.slot;\n            const placement = el.placement;\n            el.removeAttribute('slot');\n            return (el) => {\n                el.slot = slotName;\n                el.placement = placement;\n            };\n        });\n        this.stealOverlayContentResolver();\n    }\n    returnOverlayContent() {\n        /* c8 ignore next */\n        if (!this.restoreContent)\n            return;\n        const [element] = this.restoreContent();\n        this.restoreContent = undefined;\n        this.willNotifyClosed = true;\n        if (this.originalPlacement) {\n            element.setAttribute('placement', this.originalPlacement);\n            delete this.originalPlacement;\n        }\n    }\n    async hide(animated = true) {\n        this.state = 'hiding';\n        if (animated) {\n            await this.applyContentAnimation('sp-overlay-fade-out');\n        }\n        this.state = 'dispose';\n    }\n    schedulePositionUpdate() {\n        // Edge needs a little time to update the DOM before computing the layout\n        cancelAnimationFrame(this.positionAnimationFrame);\n        this.positionAnimationFrame = requestAnimationFrame(() => this.updateOverlayPosition());\n    }\n    onSlotChange() {\n        this.schedulePositionUpdate();\n    }\n    applyContentAnimation(animation) {\n        if (this.placement === 'none') {\n            return Promise.resolve(true);\n        }\n        return new Promise((resolve) => {\n            const contents = this.shadowRoot.querySelector('#contents');\n            const doneHandler = (event) => {\n                if (animation !== event.animationName)\n                    return;\n                contents.removeEventListener('animationend', doneHandler);\n                contents.removeEventListener('animationcancel', doneHandler);\n                this.animating = false;\n                resolve(event.type === 'animationcancel');\n            };\n            contents.addEventListener('animationend', doneHandler);\n            contents.addEventListener('animationcancel', doneHandler);\n            contents.style.animationName = animation;\n            this.animating = true;\n        });\n    }\n    renderTheme(content) {\n        const { color, scale, lang } = this.theme;\n        return html `\n            <sp-theme\n                color=${ifDefined(color)}\n                scale=${ifDefined(scale)}\n                lang=${ifDefined(lang)}\n                part=\"theme\"\n            >\n                ${content}\n            </sp-theme>\n        `;\n    }\n    render() {\n        const content = html `\n            <div id=\"contents\">\n                <slot @slotchange=${this.onSlotChange}></slot>\n            </div>\n        `;\n        return this.hasTheme ? this.renderTheme(content) : content;\n    }\n    static create(details) {\n        const overlay = new ActiveOverlay();\n        if (details.content) {\n            overlay.open(details);\n        }\n        return overlay;\n    }\n    async getUpdateComplete() {\n        const actions = [\n            super.getUpdateComplete(),\n            this.stealOverlayContentPromise,\n        ];\n        if (this.childrenReady) {\n            actions.push(this.childrenReady);\n        }\n        const [complete] = await Promise.all(actions);\n        return complete;\n    }\n    disconnectedCallback() {\n        document.removeEventListener('sp-update-overlays', this.updateOverlayPosition);\n        window.removeEventListener('scroll', this.updateOverlayPosition);\n        super.disconnectedCallback();\n    }\n}\n__decorate([\n    property()\n], ActiveOverlay.prototype, \"_state\", void 0);\n__decorate([\n    property({ reflect: true, type: Boolean })\n], ActiveOverlay.prototype, \"animating\", void 0);\n__decorate([\n    property({ reflect: true })\n], ActiveOverlay.prototype, \"placement\", void 0);\n__decorate([\n    property({ attribute: false })\n], ActiveOverlay.prototype, \"theme\", void 0);\n__decorate([\n    property({ attribute: false })\n], ActiveOverlay.prototype, \"receivesFocus\", void 0);\n//# sourceMappingURL=ActiveOverlay.js.map","/*\nCopyright 2020 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\nconst DEFAULT_WARMUP = 1000;\nconst DEFAULT_COOLDOWN = 1000;\n/**\n * A timer to help with implementation of warnup/cooldown behavior as described here:\n * https://spectrum.adobe.com/page/tooltip/#Immediate-or-delayed-appearance\n */\nexport class OverlayTimer {\n    constructor(options = {}) {\n        this.warmUpDelay = DEFAULT_WARMUP;\n        this.coolDownDelay = DEFAULT_COOLDOWN;\n        this.isWarm = false;\n        this.timeout = 0;\n        Object.assign(this, options);\n    }\n    async openTimer(component) {\n        this.cancelCooldownTimer();\n        if (!this.component || component !== this.component) {\n            if (this.component) {\n                this.close(this.component);\n                this.cancelCooldownTimer();\n            }\n            this.component = component;\n            if (this.isWarm) {\n                return false;\n            }\n            this.promise = new Promise((resolve) => {\n                this.resolve = resolve;\n                this.timeout = window.setTimeout(() => {\n                    if (this.resolve) {\n                        this.resolve(false);\n                        this.isWarm = true;\n                    }\n                }, this.warmUpDelay);\n            });\n            return this.promise;\n        }\n        else if (this.promise) {\n            return this.promise;\n        }\n        else {\n            // This should never happen\n            throw new Error('Inconsistent state');\n        }\n    }\n    close(component) {\n        if (this.component && this.component === component) {\n            this.resetCooldownTimer();\n            if (this.timeout > 0) {\n                clearTimeout(this.timeout);\n                this.timeout = 0;\n            }\n            if (this.resolve) {\n                this.resolve(true);\n                delete this.resolve;\n            }\n            delete this.promise;\n            delete this.component;\n        }\n    }\n    resetCooldownTimer() {\n        if (this.isWarm) {\n            if (this.cooldownTimeout) {\n                window.clearTimeout(this.cooldownTimeout);\n            }\n            this.cooldownTimeout = window.setTimeout(() => {\n                this.isWarm = false;\n                delete this.cooldownTimeout;\n            }, this.coolDownDelay);\n        }\n    }\n    cancelCooldownTimer() {\n        if (this.cooldownTimeout) {\n            window.clearTimeout(this.cooldownTimeout);\n        }\n        delete this.cooldownTimeout;\n    }\n}\n//# sourceMappingURL=overlay-timer.js.map","/*\nCopyright 2020 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\nimport { ActiveOverlay } from './src/ActiveOverlay.js';\ncustomElements.define('active-overlay', ActiveOverlay);\n//# sourceMappingURL=active-overlay.js.map","/*\nCopyright 2020 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\nimport { OverlayStack } from './overlay-stack.js';\n/**\n * This class allows access to the overlay system which allows a client to\n * position an element in the overlay positioned relative to another node.\n */\nexport class Overlay {\n    /**\n     *\n     * @param owner the parent element we will use to position the overlay element\n     * @param interaction the type of interaction that caused this overlay to be shown\n     * @param overlayElement the item to display as an overlay\n     */\n    constructor(owner, interaction, overlayElement) {\n        this.isOpen = false;\n        this.owner = owner;\n        this.overlayElement = overlayElement;\n        this.interaction = interaction;\n    }\n    /**\n     * Open an overlay\n     *\n     * @param owner the parent element we will use to position the overlay element\n     * @param interaction the type of interaction that caused this overlay to be shown\n     * @param overlayElement the item to display as an overlay\n     * @param options display parameters\n     * @param options.delayed if true delay opening of the overlay based on the global warmup/cooldown timer\n     * @param options.offset distance to offset the overlay\n     * @param options.placement side on which to position the overlay\n     * @returns an Overlay object which can be used to close the overlay\n     */\n    static async open(owner, interaction, overlayElement, options) {\n        const overlay = new Overlay(owner, interaction, overlayElement);\n        await overlay.open(options);\n        return () => {\n            overlay.close();\n        };\n    }\n    static update() {\n        const overlayUpdateEvent = new CustomEvent('sp-update-overlays', {\n            bubbles: true,\n            composed: true,\n            cancelable: true,\n        });\n        document.dispatchEvent(overlayUpdateEvent);\n    }\n    /**\n     * Open an overlay\n     *\n     * @param options display parameters\n     * @param options.delayed delay before opening the overlay\n     * @param options.offset distance to offset the overlay\n     * @param options.placement side on which to position the overlay\n     * @returns a Promise that resolves to true if this operation was cancelled\n     */\n    async open({ abortPromise, delayed, offset = 0, placement = 'top', receivesFocus, notImmediatelyClosable, virtualTrigger, }) {\n        /* c8 ignore next */\n        if (this.isOpen)\n            return true;\n        if (delayed === undefined) {\n            delayed = this.overlayElement.hasAttribute('delayed');\n        }\n        const queryThemeDetail = {\n            color: undefined,\n            scale: undefined,\n            lang: undefined,\n        };\n        const queryThemeEvent = new CustomEvent('sp-query-theme', {\n            bubbles: true,\n            composed: true,\n            detail: queryThemeDetail,\n            cancelable: true,\n        });\n        this.owner.dispatchEvent(queryThemeEvent);\n        const overlayDetailQuery = {};\n        const queryOverlayDetailEvent = new CustomEvent('sp-overlay-query', {\n            bubbles: true,\n            composed: true,\n            detail: overlayDetailQuery,\n            cancelable: true,\n        });\n        this.overlayElement.dispatchEvent(queryOverlayDetailEvent);\n        await Overlay.overlayStack.openOverlay(Object.assign({ abortPromise, content: this.overlayElement, contentTip: overlayDetailQuery.overlayContentTipElement, delayed, offset: offset, placement: placement, trigger: this.owner, interaction: this.interaction, theme: queryThemeDetail, receivesFocus,\n            notImmediatelyClosable,\n            virtualTrigger }, overlayDetailQuery));\n        this.isOpen = true;\n        return true;\n    }\n    /**\n     * Close the overlay if it is open\n     */\n    close() {\n        Overlay.overlayStack.closeOverlay(this.overlayElement);\n    }\n}\nOverlay.overlayStack = new OverlayStack();\n/**\n * Announces that an overlay-based UI element has opened\n * @event sp-open\n * @type {object}\n * @property {TriggerInteractions} interaction type of interaction that triggered the opening\n */\n/**\n * Announces that an overlay-based UI element has opened\n * @event sp-close\n * @type {object}\n * @property {TriggerInteractions} interaction type of interaction that triggered the closing\n */\n//# sourceMappingURL=overlay.js.map","/*\nCopyright 2020 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\nimport { ActiveOverlay } from './ActiveOverlay.js';\nimport { OverlayTimer } from './overlay-timer.js';\nimport '../active-overlay.js';\nfunction isLeftClick(event) {\n    return event.button === 0;\n}\nfunction hasModifier(event) {\n    return !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\n}\nexport class OverlayStack {\n    constructor() {\n        this.overlays = [];\n        this.preventMouseRootClose = false;\n        this.root = document.body;\n        this.handlingResize = false;\n        this.overlayTimer = new OverlayTimer();\n        this.canTabTrap = true;\n        this.trappingInited = false;\n        this._eventsAreBound = false;\n        this._bodyMarginsApplied = false;\n        this.forwardContextmenuEvent = async (event) => {\n            const topOverlay = this.overlays[this.overlays.length - 1];\n            if (!this.trappingInited ||\n                topOverlay.interaction !== 'modal' ||\n                event.target !== this.overlayHolder) {\n                return;\n            }\n            event.stopPropagation();\n            event.preventDefault();\n            await this.closeTopOverlay();\n            let target = document.elementFromPoint(event.clientX, event.clientY);\n            while (target === null || target === void 0 ? void 0 : target.shadowRoot) {\n                const innerTarget = target.shadowRoot.elementFromPoint(event.clientX, event.clientY);\n                if (!innerTarget || innerTarget === target) {\n                    break;\n                }\n                target = innerTarget;\n            }\n            target === null || target === void 0 ? void 0 : target.dispatchEvent(new MouseEvent('contextmenu', event));\n        };\n        this.handleMouseCapture = (event) => {\n            const topOverlay = this.topOverlay;\n            if (!event.target ||\n                !topOverlay ||\n                !topOverlay.overlayContent ||\n                hasModifier(event) ||\n                !isLeftClick(event)) {\n                this.preventMouseRootClose = true;\n                return;\n            }\n            if (event.target instanceof Node) {\n                const path = event.composedPath();\n                if (path.indexOf(topOverlay.overlayContent) >= 0) {\n                    this.preventMouseRootClose = true;\n                    return;\n                }\n                this.preventMouseRootClose = false;\n            }\n        };\n        /**\n         * A \"longpress\" occurs before the \"click\" that creates it has occured.\n         * In that way the first click will still be part of the \"longpress\" and\n         * not part of closing the overlay.\n         */\n        this._doesNotCloseOnFirstClick = false;\n        this.handleMouse = (event) => {\n            if (this._doesNotCloseOnFirstClick) {\n                this._doesNotCloseOnFirstClick = false;\n                return;\n            }\n            if (this.preventMouseRootClose || event.defaultPrevented) {\n                return;\n            }\n            this.closeTopOverlay(true);\n        };\n        this.handleKeyUp = (event) => {\n            if (event.code === 'Escape') {\n                this.closeTopOverlay();\n            }\n        };\n        this.handleResize = () => {\n            if (this.handlingResize)\n                return;\n            this.handlingResize = true;\n            requestAnimationFrame(async () => {\n                const promises = this.overlays.map((overlay) => overlay.updateOverlayPosition());\n                await Promise.all(promises);\n                this.handlingResize = false;\n            });\n        };\n    }\n    initTabTrapping() {\n        if (this.trappingInited)\n            return;\n        this.trappingInited = true;\n        /* c8 ignore next 4 */\n        if (this.document.body.shadowRoot) {\n            this.canTabTrap = false;\n            return;\n        }\n        this.document.body.attachShadow({ mode: 'open' });\n        /* c8 ignore next 3 */\n        if (!this.document.body.shadowRoot) {\n            return;\n        }\n        const root = this.document.body.shadowRoot;\n        root.innerHTML = `\n            <style>\n            :host {\n                position: relative;\n            }\n            #actual {\n                position: relative;\n                height: calc(100% - var(--swc-body-margins-block, 0px));\n                z-index: 0;\n                min-height: calc(100vh - var(--swc-body-margins-block, 0px));\n            }\n            #holder {\n                display: none;\n                align-items: center;\n                justify-content: center;\n                flex-flow: column;\n                width: 100%;\n                height: 100%;\n                position: absolute;\n                top: 0;\n                left: 0;\n            }\n            [name=\"open\"]::slotted(*) {\n                pointer-events: all;\n            }\n            #actual[aria-hidden] + #holder {\n                display: flex;\n            }\n            </style>\n            <div id=\"actual\"><slot></slot></div>\n            <div id=\"holder\"><slot name=\"open\"></slot></div>\n        `;\n        this.tabTrapper = root.querySelector('#actual');\n        this.overlayHolder = root.querySelector('#holder');\n        this.tabTrapper.attachShadow({ mode: 'open' });\n        if (this.tabTrapper.shadowRoot) {\n            this.tabTrapper.shadowRoot.innerHTML = '<slot></slot>';\n        }\n        this.overlayHolder.addEventListener('contextmenu', this.forwardContextmenuEvent, true);\n        requestAnimationFrame(() => {\n            this.applyBodyMargins();\n            const observer = new ResizeObserver(() => {\n                this.applyBodyMargins();\n            });\n            observer.observe(document.body);\n        });\n    }\n    applyBodyMargins() {\n        const { marginLeft, marginRight, marginTop, marginBottom } = getComputedStyle(document.body);\n        const allZero = parseFloat(marginLeft) === 0 &&\n            parseFloat(marginRight) === 0 &&\n            parseFloat(marginTop) === 0 &&\n            parseFloat(marginBottom) === 0;\n        if (allZero && !this._bodyMarginsApplied) {\n            return;\n        }\n        this.tabTrapper.style.setProperty('--swc-body-margins-inline', `calc(${marginLeft} + ${marginRight})`);\n        this.tabTrapper.style.setProperty('--swc-body-margins-block', `calc(${marginTop} + ${marginBottom})`);\n        this._bodyMarginsApplied = !allZero;\n    }\n    startTabTrapping() {\n        this.initTabTrapping();\n        /* c8 ignore next 3 */\n        if (!this.canTabTrap) {\n            return;\n        }\n        this.tabTrapper.tabIndex = -1;\n        this.tabTrapper.setAttribute('aria-hidden', 'true');\n    }\n    stopTabTrapping() {\n        /* c8 ignore next 3 */\n        if (!this.canTabTrap || !this.trappingInited) {\n            return;\n        }\n        this.tabTrapper.removeAttribute('tabindex');\n        this.tabTrapper.removeAttribute('aria-hidden');\n    }\n    get document() {\n        return this.root.ownerDocument /* c8 ignore next */ || document;\n    }\n    get topOverlay() {\n        return this.overlays.slice(-1)[0];\n    }\n    findOverlayForContent(overlayContent) {\n        for (const item of this.overlays) {\n            if (overlayContent === item.overlayContent) {\n                return item;\n            }\n        }\n        return undefined;\n    }\n    addEventListeners() {\n        if (this._eventsAreBound)\n            return;\n        this._eventsAreBound = true;\n        this.document.addEventListener('click', this.handleMouseCapture, true);\n        this.document.addEventListener('click', this.handleMouse);\n        this.document.addEventListener('keyup', this.handleKeyUp);\n        window.addEventListener('resize', this.handleResize);\n    }\n    isClickOverlayActiveForTrigger(trigger) {\n        return this.overlays.some((item) => trigger === item.trigger && item.interaction === 'click');\n    }\n    async openOverlay(details) {\n        this.addEventListeners();\n        if (this.findOverlayForContent(details.content)) {\n            return false;\n        }\n        if (details.notImmediatelyClosable) {\n            this._doesNotCloseOnFirstClick = true;\n        }\n        if (details.interaction === 'modal') {\n            this.startTabTrapping();\n        }\n        const contentWithLifecycle = details.content;\n        if (contentWithLifecycle.overlayWillOpenCallback) {\n            const { trigger } = details;\n            contentWithLifecycle.overlayWillOpenCallback({ trigger });\n        }\n        if (details.delayed) {\n            const cancelledPromise = this.overlayTimer.openTimer(details.content);\n            const promises = [cancelledPromise];\n            if (details.abortPromise) {\n                promises.push(details.abortPromise);\n            }\n            const cancelled = await Promise.race(promises);\n            if (cancelled) {\n                if (contentWithLifecycle.overlayOpenCancelledCallback) {\n                    const { trigger } = details;\n                    contentWithLifecycle.overlayOpenCancelledCallback({\n                        trigger,\n                    });\n                }\n                return cancelled;\n            }\n        }\n        if (details.interaction === 'click') {\n            this.closeAllHoverOverlays();\n        }\n        else if (details.interaction === 'hover' &&\n            this.isClickOverlayActiveForTrigger(details.trigger)) {\n            // Don't show a hover popover if the click popover is already active\n            return true;\n        }\n        const activeOverlay = ActiveOverlay.create(details);\n        if (this.overlays.length) {\n            const topOverlay = this.overlays[this.overlays.length - 1];\n            topOverlay.obscure(activeOverlay.interaction);\n        }\n        document.body.appendChild(activeOverlay);\n        /**\n         * The following work to make the new overlay the \"top\" of the stack\n         * has to happen AFTER the current call stack completes in case there\n         * is work there in to remove the previous \"top\" overlay.\n         */\n        return new Promise((res) => requestAnimationFrame(res)).then(async () => {\n            this.overlays.push(activeOverlay);\n            await activeOverlay.updateComplete;\n            this.addOverlayEventListeners(activeOverlay);\n            if (typeof contentWithLifecycle.open !== 'undefined') {\n                contentWithLifecycle.open = true;\n            }\n            if (contentWithLifecycle.overlayOpenCallback) {\n                const { trigger } = activeOverlay;\n                contentWithLifecycle.overlayOpenCallback({ trigger });\n            }\n            activeOverlay.openCallback();\n            return false;\n        });\n    }\n    addOverlayEventListeners(activeOverlay) {\n        activeOverlay.addEventListener('close', ((event) => {\n            var _a;\n            this.hideAndCloseOverlay(activeOverlay, true, // animated?\n            !!((_a = event.detail) === null || _a === void 0 ? void 0 : _a.reason) // clickAway?\n            );\n        }));\n        switch (activeOverlay.interaction) {\n            case 'replace':\n                this.addReplaceOverlayEventListeners(activeOverlay);\n                break;\n            case 'inline':\n                this.addInlineOverlayEventListeners(activeOverlay);\n                break;\n        }\n    }\n    addReplaceOverlayEventListeners(activeOverlay) {\n        activeOverlay.addEventListener('keydown', (event) => {\n            const { code } = event;\n            /* c8 ignore next */\n            if (code !== 'Tab')\n                return;\n            event.stopPropagation();\n            this.closeOverlay(activeOverlay.overlayContent);\n            activeOverlay.tabbingAway = true;\n            activeOverlay.trigger.focus();\n            activeOverlay.trigger.dispatchEvent(new KeyboardEvent('keydown', event));\n        });\n    }\n    addInlineOverlayEventListeners(activeOverlay) {\n        activeOverlay.trigger.addEventListener('keydown', activeOverlay.handleInlineTriggerKeydown);\n        activeOverlay.addEventListener('keydown', (event) => {\n            const { code, shiftKey } = event;\n            /* c8 ignore next */\n            if (code !== 'Tab')\n                return;\n            activeOverlay.tabbingAway = true;\n            if (shiftKey) {\n                const returnFocusElement = document.createElement('span');\n                returnFocusElement.tabIndex = -1;\n                if (activeOverlay.trigger.hasAttribute('slot')) {\n                    returnFocusElement.slot = activeOverlay.trigger.slot;\n                }\n                activeOverlay.trigger.insertAdjacentElement('afterend', returnFocusElement);\n                returnFocusElement.focus();\n                returnFocusElement.remove();\n                return;\n            }\n            event.stopPropagation();\n            const triggerWithLifecycle = activeOverlay.trigger;\n            if (typeof triggerWithLifecycle.open !== 'undefined') {\n                triggerWithLifecycle.open = false;\n            }\n            this.closeOverlay(activeOverlay.overlayContent);\n            activeOverlay.trigger.focus();\n        });\n    }\n    closeOverlay(content) {\n        this.overlayTimer.close(content);\n        requestAnimationFrame(() => {\n            const overlay = this.findOverlayForContent(content);\n            this.hideAndCloseOverlay(overlay);\n        });\n    }\n    closeAllHoverOverlays() {\n        for (const overlay of this.overlays) {\n            if (overlay.interaction === 'hover') {\n                this.hideAndCloseOverlay(overlay, false);\n            }\n        }\n    }\n    async manageFocusAfterCloseWhenOverlaysRemain() {\n        const topOverlay = this.overlays[this.overlays.length - 1];\n        topOverlay.feature();\n        // Push focus in the the next remaining overlay as needed when a `type=\"modal\"` overlay exists.\n        if (topOverlay.interaction === 'modal' || topOverlay.hasModalRoot) {\n            await topOverlay.focus();\n        }\n        else {\n            this.stopTabTrapping();\n        }\n    }\n    manageFocusAfterCloseWhenLastOverlay(overlay) {\n        this.stopTabTrapping();\n        const isModal = overlay.interaction === 'modal';\n        const isReceivesFocus = overlay.receivesFocus === 'auto';\n        const isReplace = overlay.interaction === 'replace';\n        const isInline = overlay.interaction === 'inline';\n        const isTabbingAwayFromInlineOrReplace = (isReplace || isInline) && !overlay.tabbingAway;\n        overlay.tabbingAway = false;\n        if (!isModal && !isReceivesFocus && !isTabbingAwayFromInlineOrReplace) {\n            return;\n        }\n        // Manage post closure focus when needed.\n        const overlayRoot = overlay.overlayContent.getRootNode();\n        const overlayContentActiveElement = overlayRoot.activeElement;\n        let triggerRoot;\n        let triggerActiveElement;\n        const contentContainsActiveElement = () => overlay.overlayContent.contains(overlayContentActiveElement);\n        const triggerRootContainsActiveElement = () => {\n            triggerRoot = overlay.trigger.getRootNode();\n            triggerActiveElement = triggerRoot.activeElement;\n            return triggerRoot.contains(triggerActiveElement);\n        };\n        const triggerHostIsActiveElement = () => triggerRoot.host && triggerRoot.host === triggerActiveElement;\n        // Return focus to the trigger as long as the user hasn't actively focused\n        // something outside of the current overlay interface; trigger, root, host.\n        if (isModal ||\n            contentContainsActiveElement() ||\n            triggerRootContainsActiveElement() ||\n            triggerHostIsActiveElement()) {\n            overlay.trigger.focus();\n        }\n    }\n    async hideAndCloseOverlay(overlay, animated, clickAway) {\n        if (!overlay) {\n            return;\n        }\n        const contentWithLifecycle = overlay.overlayContent;\n        if (typeof contentWithLifecycle.overlayWillCloseCallback !== 'undefined') {\n            const { trigger } = overlay;\n            if (contentWithLifecycle.overlayWillCloseCallback({ trigger })) {\n                return;\n            }\n        }\n        await overlay.hide(animated);\n        if (typeof contentWithLifecycle.open !== 'undefined') {\n            contentWithLifecycle.open = false;\n        }\n        if (contentWithLifecycle.overlayCloseCallback) {\n            const { trigger } = overlay;\n            contentWithLifecycle.overlayCloseCallback({ trigger });\n        }\n        if (overlay.state != 'dispose')\n            return;\n        const index = this.overlays.indexOf(overlay);\n        if (index >= 0) {\n            this.overlays.splice(index, 1);\n        }\n        if (this.overlays.length) {\n            await this.manageFocusAfterCloseWhenOverlaysRemain();\n        }\n        else {\n            this.manageFocusAfterCloseWhenLastOverlay(overlay);\n        }\n        overlay.remove();\n        overlay.dispose();\n        overlay.trigger.dispatchEvent(new CustomEvent('sp-closed', {\n            bubbles: true,\n            composed: true,\n            cancelable: true,\n            detail: {\n                interaction: overlay.interaction,\n                reason: clickAway ? 'external-click' : undefined,\n            },\n        }));\n    }\n    closeTopOverlay(clickAway) {\n        return this.hideAndCloseOverlay(this.topOverlay, true, clickAway);\n    }\n}\n//# sourceMappingURL=overlay-stack.js.map"],"names":["css","t","split","e","n","includes","r","o","reference","i","floating","a","placement","l","s","x","width","c","y","height","f","m","u","top","right","bottom","left","platform","rects","elements","strategy","boundary","rootBoundary","elementContext","altBoundary","p","padding","g","d","h","getClippingClientRect","element","isElement","contextElement","getDocumentElement","convertOffsetParentRelativeRectToViewportRelativeRect","rect","offsetParent","getOffsetParent","Math","min","max","replace","main","cross","start","end","reduce","concat","v","name","options","[object Object]","middlewareData","initialPlacement","flip","skip","mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment","w","A","P","k","overflows","push","every","R","D","index","data","reset","O","slice","sort","filter","fn","value","limiter","E","apply","size","b","toString","window","ownerDocument","defaultView","getComputedStyle","nodeName","toLowerCase","HTMLElement","Element","ShadowRoot","overflow","overflowX","overflowY","test","navigator","userAgent","transform","perspective","contain","willChange","round","getBoundingClientRect","offsetWidth","offsetHeight","Node","document","documentElement","scrollLeft","pageXOffset","scrollTop","pageYOffset","clientLeft","clientTop","assignedSlot","parentNode","host","position","L","W","T","body","C","visualViewport","clientWidth","clientHeight","abs","innerWidth","scale","offsetLeft","offsetTop","scrollWidth","scrollHeight","direction","H","getRootNode","contains","S","getElementRects","getDimensions","getClientRects","async","middleware","length","initial","states","idle","on","active","hiding","dispose","disposed","state","event","el","closest","closestOverlay","rootNode","constructor","super","this","stateTransition","num","devicePixelRatio","dpr","fonts","ready","Promise","resolve","offset","skidding","shift","floor","initialHeight","isConstrained","actualHeight","maxHeight","Object","assign","style","maxWidth","appliedHeight","overlayContentTip","centerOffset","arrow","virtualTrigger","trigger","roundByDPR","getAttribute","setAttribute","overlayContent","arrowX","arrowY","code","shiftKey","tabbingAway","dispatchEvent","stopPropagation","preventDefault","focus","stealOverlayContentPromise","res","stealOverlayContentResolver","_state","nextState","removeAttribute","firstFocusableIn","firstFocusable","updateComplete","activeElement","hasTheme","theme","color","lang","styles","hasModalRoot","_modalRoot","feature","tabIndex","parentOverlayOf","parentOverlay","slot","interaction","obscure","nextOverlayInteraction","changedProperties","firstUpdated","stealOverlayContent","setProperty","innerHeight","updateOverlayPosition","addEventListener","actions","applyContentAnimation","childrenReady","all","receivesFocus","bubbles","composed","cancelable","detail","open","openDetail","extractDetail","content","contentTip","timeout","clearTimeout","removeEventListener","handleInlineTriggerKeydown","returnOverlayContent","willNotifyClosed","originalPlacement","restoreContent","reparentChildren","slotName","undefined","animated","schedulePositionUpdate","cancelAnimationFrame","positionAnimationFrame","requestAnimationFrame","onSlotChange","animation","shadowRoot","querySelector","animationName","contents","doneHandler","animating","type","renderTheme","ifDefined","render","html","details","overlay","getUpdateComplete","complete","disconnectedCallback","__decorate","property","reflect","Boolean","attribute","component","cancelCooldownTimer","promise","close","isWarm","setTimeout","warmUpDelay","resetCooldownTimer","cooldownTimeout","coolDownDelay","customElements","define","ActiveOverlay","owner","overlayElement","overlayUpdateEvent","abortPromise","delayed","notImmediatelyClosable","isOpen","hasAttribute","queryThemeDetail","queryThemeEvent","overlayDetailQuery","queryOverlayDetailEvent","overlayStack","openOverlay","overlayContentTipElement","Overlay","closeOverlay","overlays","trappingInited","topOverlay","target","overlayHolder","closeTopOverlay","elementFromPoint","clientX","clientY","innerTarget","metaKey","altKey","ctrlKey","hasModifier","button","isLeftClick","composedPath","indexOf","preventMouseRootClose","_doesNotCloseOnFirstClick","defaultPrevented","handlingResize","map","promises","initTabTrapping","canTabTrap","attachShadow","mode","root","innerHTML","tabTrapper","forwardContextmenuEvent","applyBodyMargins","observe","marginLeft","marginRight","marginTop","marginBottom","parseFloat","allZero","_bodyMarginsApplied","startTabTrapping","stopTabTrapping","findOverlayForContent","item","addEventListeners","_eventsAreBound","handleMouseCapture","handleMouse","handleKeyUp","handleResize","isClickOverlayActiveForTrigger","some","contentWithLifecycle","overlayWillOpenCallback","overlayTimer","openTimer","race","cancelled","overlayOpenCancelledCallback","closeAllHoverOverlays","create","activeOverlay","appendChild","then","addOverlayEventListeners","overlayOpenCallback","openCallback","hideAndCloseOverlay","_a","reason","addReplaceOverlayEventListeners","addInlineOverlayEventListeners","createElement","returnFocusElement","insertAdjacentElement","remove","triggerWithLifecycle","manageFocusAfterCloseWhenLastOverlay","isReplace","isInline","isModal","isReceivesFocus","isTabbingAwayFromInlineOrReplace","overlayContentActiveElement","triggerRoot","triggerActiveElement","clickAway","overlayWillCloseCallback","hide","overlayCloseCallback","splice","manageFocusAfterCloseWhenOverlaysRemain"],"mappings":"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"}