{"version":3,"file":"2b65f0b7.js","sources":["../../../packages/menu/src/menu.css.js","../../../packages/menu/src/Menu.js","../../../packages/menu/sp-menu.js"],"sourcesContent":["\"use strict\";import{css as e}from\"@spectrum-web-components/base\";const t=e`\n:host{--spectrum-menu-item-min-height:var(--spectrum-component-height-100);--spectrum-menu-item-icon-height:var(--spectrum-workflow-icon-size-100);--spectrum-menu-item-icon-width:var(--spectrum-workflow-icon-size-100);--spectrum-menu-item-label-font-size:var(--spectrum-font-size-100);--spectrum-menu-item-label-text-to-visual:var(\n--spectrum-text-to-visual-100\n);--spectrum-menu-item-label-inline-edge-to-content:var(\n--spectrum-component-edge-to-text-100\n);--spectrum-menu-item-top-edge-to-text:var(\n--spectrum-component-top-to-text-100\n);--spectrum-menu-item-bottom-edge-to-text:var(\n--spectrum-component-bottom-to-text-100\n);--spectrum-menu-item-text-to-control:var(--spectrum-text-to-control-100);--spectrum-menu-item-description-font-size:var(--spectrum-font-size-75);--spectrum-menu-section-header-font-size:var(--spectrum-font-size-100);--spectrum-menu-section-header-min-width:var(\n--spectrum-component-height-100\n);--spectrum-menu-item-selectable-edge-to-text-not-selected:var(\n--spectrum-menu-item-selectable-edge-to-text-not-selected-medium\n);--spectrum-menu-item-checkmark-height:var(\n--spectrum-menu-item-checkmark-height-medium\n);--spectrum-menu-item-checkmark-width:var(\n--spectrum-menu-item-checkmark-width-medium\n);--spectrum-menu-item-top-to-checkmark:var(\n--spectrum-menu-item-top-to-selected-icon-medium\n);--spectrum-menu-item-label-line-height:var(--spectrum-line-height-100);--spectrum-menu-item-label-line-height-cjk:var(\n--spectrum-cjk-line-height-100\n);--spectrum-menu-item-label-to-description-spacing:var(\n--spectrum-menu-item-label-to-description\n);--spectrum-menu-item-focus-indicator-width:var(\n--spectrum-border-width-200\n);--spectrum-menu-item-focus-indicator-color:var(--spectrum-blue-800);--spectrum-menu-item-label-to-value-area-min-spacing:var(\n--spectrum-spacing-100\n);--spectrum-menu-item-label-content-color-default:var(\n--spectrum-neutral-content-color-default\n);--spectrum-menu-item-label-content-color-hover:var(\n--spectrum-neutral-content-color-hover\n);--spectrum-menu-item-label-content-color-down:var(\n--spectrum-neutral-content-color-down\n);--spectrum-menu-item-label-content-color-focus:var(\n--spectrum-neutral-content-color-key-focus\n);--spectrum-menu-item-label-icon-color-default:var(\n--spectrum-neutral-content-color-default\n);--spectrum-menu-item-label-icon-color-hover:var(\n--spectrum-neutral-content-color-hover\n);--spectrum-menu-item-label-icon-color-down:var(\n--spectrum-neutral-content-color-down\n);--spectrum-menu-item-label-icon-color-focus:var(\n--spectrum-neutral-content-color-key-focus\n);--spectrum-menu-item-label-content-color-disabled:var(\n--spectrum-disabled-content-color\n);--spectrum-menu-item-label-icon-color-disabled:var(\n--spectrum-disabled-content-color\n);--spectrum-menu-item-description-line-height:var(\n--spectrum-line-height-100\n);--spectrum-menu-item-description-line-height-cjk:var(\n--spectrum-cjk-line-height-100\n);--spectrum-menu-item-description-color-default:var(\n--spectrum-neutral-subdued-content-color-default\n);--spectrum-menu-item-description-color-hover:var(\n--spectrum-neutral-subdued-content-color-hover\n);--spectrum-menu-item-description-color-down:var(\n--spectrum-neutral-subdued-content-color-down\n);--spectrum-menu-item-description-color-focus:var(\n--spectrum-neutral-subdued-content-color-key-focus\n);--spectrum-menu-item-description-color-disabled:var(\n--spectrum-disabled-content-color\n);--spectrum-menu-section-header-line-height:var(--spectrum-line-height-100);--spectrum-menu-section-header-line-height-cjk:var(\n--spectrum-cjk-line-height-100\n);--spectrum-menu-section-header-font-weight:var(\n--spectrum-bold-font-weight\n);--spectrum-menu-section-header-color:var(--spectrum-gray-900);--spectrum-menu-collapsible-icon-color:var(--spectrum-gray-900);--spectrum-menu-checkmark-icon-color-default:var(\n--spectrum-accent-color-900\n);--spectrum-menu-checkmark-icon-color-hover:var(\n--spectrum-accent-color-1000\n);--spectrum-menu-checkmark-icon-color-down:var(\n--spectrum-accent-color-1100\n);--spectrum-menu-checkmark-icon-color-focus:var(\n--spectrum-accent-color-1000\n);--spectrum-menu-drillin-icon-color-default:var(\n--spectrum-neutral-subdued-content-color-default\n);--spectrum-menu-drillin-icon-color-hover:var(\n--spectrum-neutral-subdued-content-color-hover\n);--spectrum-menu-drillin-icon-color-down:var(\n--spectrum-neutral-subdued-content-color-down\n);--spectrum-menu-drillin-icon-color-focus:var(\n--spectrum-neutral-subdued-content-color-key-focus\n);--spectrum-menu-item-value-color-default:var(\n--spectrum-neutral-subdued-content-color-default\n);--spectrum-menu-item-value-color-hover:var(\n--spectrum-neutral-subdued-content-color-hover\n);--spectrum-menu-item-value-color-down:var(\n--spectrum-neutral-subdued-content-color-down\n);--spectrum-menu-item-value-color-focus:var(\n--spectrum-neutral-subdued-content-color-key-focus\n);--spectrum-menu-checkmark-display-hidden:none;--spectrum-menu-checkmark-display-shown:block;--spectrum-menu-checkmark-display:var(\n--spectrum-menu-checkmark-display-shown\n);--spectrum-menu-item-collapsible-has-icon-submenu-item-padding-x-start:calc(var(--spectrum-menu-item-label-inline-edge-to-content) + var(--spectrum-menu-item-checkmark-width) + var(--spectrum-menu-item-text-to-control) + var(--spectrum-menu-item-icon-width) + var(--spectrum-menu-item-label-text-to-visual) + var(--spectrum-menu-item-focus-indicator-width));--spectrum-menu-item-collapsible-no-icon-submenu-item-padding-x-start:calc(var(--spectrum-menu-item-label-inline-edge-to-content) + var(--spectrum-menu-item-checkmark-width) + var(--spectrum-menu-item-label-text-to-visual) + var(--spectrum-menu-item-focus-indicator-width))}:host([size=s]){--spectrum-menu-item-min-height:var(--spectrum-component-height-75);--spectrum-menu-item-icon-height:var(--spectrum-workflow-icon-size-75);--spectrum-menu-item-icon-width:var(--spectrum-workflow-icon-size-75);--spectrum-menu-item-label-font-size:var(--spectrum-font-size-75);--spectrum-menu-item-label-text-to-visual:var(\n--spectrum-text-to-visual-75\n);--spectrum-menu-item-label-inline-edge-to-content:var(\n--spectrum-component-edge-to-text-75\n);--spectrum-menu-item-top-edge-to-text:var(\n--spectrum-component-top-to-text-75\n);--spectrum-menu-item-bottom-edge-to-text:var(\n--spectrum-component-bottom-to-text-75\n);--spectrum-menu-item-text-to-control:var(--spectrum-text-to-control-75);--spectrum-menu-item-description-font-size:var(--spectrum-font-size-50);--spectrum-menu-section-header-font-size:var(--spectrum-font-size-75);--spectrum-menu-section-header-min-width:var(\n--spectrum-component-height-75\n);--spectrum-menu-item-selectable-edge-to-text-not-selected:var(\n--spectrum-menu-item-selectable-edge-to-text-not-selected-small\n);--spectrum-menu-item-checkmark-height:var(\n--spectrum-menu-item-checkmark-height-small\n);--spectrum-menu-item-checkmark-width:var(\n--spectrum-menu-item-checkmark-width-small\n);--spectrum-menu-item-top-to-checkmark:var(\n--spectrum-menu-item-top-to-selected-icon-small\n)}:host([size=l]){--spectrum-menu-item-min-height:var(--spectrum-component-height-200);--spectrum-menu-item-icon-height:var(--spectrum-workflow-icon-size-200);--spectrum-menu-item-icon-width:var(--spectrum-workflow-icon-size-200);--spectrum-menu-item-label-font-size:var(--spectrum-font-size-200);--spectrum-menu-item-label-text-to-visual:var(\n--spectrum-text-to-visual-200\n);--spectrum-menu-item-label-inline-edge-to-content:var(\n--spectrum-component-edge-to-text-200\n);--spectrum-menu-item-top-edge-to-text:var(\n--spectrum-component-top-to-text-200\n);--spectrum-menu-item-bottom-edge-to-text:var(\n--spectrum-component-bottom-to-text-200\n);--spectrum-menu-item-text-to-control:var(--spectrum-text-to-control-200);--spectrum-menu-item-description-font-size:var(--spectrum-font-size-100);--spectrum-menu-section-header-font-size:var(--spectrum-font-size-200);--spectrum-menu-section-header-min-width:var(\n--spectrum-component-height-200\n);--spectrum-menu-item-selectable-edge-to-text-not-selected:var(\n--spectrum-menu-item-selectable-edge-to-text-not-selected-large\n);--spectrum-menu-item-checkmark-height:var(\n--spectrum-menu-item-checkmark-height-large\n);--spectrum-menu-item-checkmark-width:var(\n--spectrum-menu-item-checkmark-width-large\n);--spectrum-menu-item-top-to-checkmark:var(\n--spectrum-menu-item-top-to-selected-icon-large\n)}:host([size=xl]){--spectrum-menu-item-min-height:var(--spectrum-component-height-300);--spectrum-menu-item-icon-height:var(--spectrum-workflow-icon-size-300);--spectrum-menu-item-icon-width:var(--spectrum-workflow-icon-size-300);--spectrum-menu-item-label-font-size:var(--spectrum-font-size-300);--spectrum-menu-item-label-text-to-visual:var(\n--spectrum-text-to-visual-300\n);--spectrum-menu-item-label-inline-edge-to-content:var(\n--spectrum-component-edge-to-text-300\n);--spectrum-menu-item-top-edge-to-text:var(\n--spectrum-component-top-to-text-300\n);--spectrum-menu-item-bottom-edge-to-text:var(\n--spectrum-component-bottom-to-text-300\n);--spectrum-menu-item-text-to-control:var(--spectrum-text-to-control-300);--spectrum-menu-item-description-font-size:var(--spectrum-font-size-200);--spectrum-menu-section-header-font-size:var(--spectrum-font-size-300);--spectrum-menu-section-header-min-width:var(\n--spectrum-component-height-300\n);--spectrum-menu-item-selectable-edge-to-text-not-selected:var(\n--spectrum-menu-item-selectable-edge-to-text-not-selected-extra-large\n);--spectrum-menu-item-checkmark-height:var(\n--spectrum-menu-item-checkmark-height-extra-large\n);--spectrum-menu-item-checkmark-width:var(\n--spectrum-menu-item-checkmark-width-extra-large\n);--spectrum-menu-item-top-to-checkmark:var(\n--spectrum-menu-item-top-to-selected-icon-extra-large\n)}@media (forced-colors:active){:host{--highcontrast-menu-item-background-color-default:ButtonFace;--highcontrast-menu-item-color-default:ButtonText;--highcontrast-menu-item-background-color-focus:Highlight;--highcontrast-menu-item-color-focus:HighlightText;--highcontrast-menu-checkmark-icon-color-default:Highlight;--highcontrast-menu-item-color-disabled:GrayText;--highcontrast-menu-item-focus-indicator-color:Highlight;--highcontrast-menu-item-selected-background-color:Highlight;--highcontrast-menu-item-selected-color:HighlightText}@supports (color:SelectedItem){:host{--highcontrast-menu-item-selected-background-color:SelectedItem;--highcontrast-menu-item-selected-color:SelectedItemText}}}:host{box-sizing:border-box;display:inline-block;list-style-type:none;margin:0;overflow:auto;padding:0}:host:lang(ja),:host:lang(ko),:host:lang(zh){--spectrum-menu-item-label-line-height:var(\n--mod-menu-item-label-line-height-cjk,var(--spectrum-menu-item-label-line-height-cjk)\n);--spectrum-menu-item-description-line-height:var(\n--mod-menu-item-description-line-height-cjk,var(--spectrum-menu-item-description-line-height-cjk)\n);--spectrum-menu-section-header-line-height:var(\n--mod-menu-section-header-line-height-cjk,var(--spectrum-menu-section-header-line-height-cjk)\n)}:host([selects]) ::slotted(sp-menu-item){--spectrum-menu-checkmark-display:var(\n--spectrum-menu-checkmark-display-hidden\n);padding-inline-start:var(\n--mod-menu-item-selectable-edge-to-text-not-selected,var(--spectrum-menu-item-selectable-edge-to-text-not-selected)\n)}:host([selects]) ::slotted(sp-menu-item[selected]){--spectrum-menu-checkmark-display:var(\n--spectrum-menu-checkmark-display-shown\n);padding-inline-start:var(\n--mod-menu-item-label-inline-edge-to-content,var(--spectrum-menu-item-label-inline-edge-to-content)\n)}li:not(::slotted(sp-menu-item),.menu-divider){box-sizing:border-box;display:block;margin:0;padding:0;position:relative}.spectrum-Menu-sectionHeading{color:var(\n--highcontrast-menu-item-color-default,var(\n--mod-menu-section-header-color,var(--spectrum-menu-section-header-color)\n)\n);display:block;font-size:var(\n--mod-menu-section-header-font-size,var(--spectrum-menu-section-header-font-size)\n);font-weight:var(\n--mod-menu-section-header-font-weight,var(--spectrum-menu-section-header-font-weight)\n);grid-area:sectionHeadingArea/1/sectionHeadingArea/-1;line-height:var(\n--mod-menu-section-header-line-height,var(--spectrum-menu-section-header-line-height)\n);min-inline-size:var(\n--mod-menu-section-header-min-width,var(--spectrum-menu-section-header-min-width)\n);padding-block-end:var(\n--mod-menu-section-header-bottom-edge-to-text,var(\n--mod-menu-item-bottom-edge-to-text,var(--spectrum-menu-item-bottom-edge-to-text)\n)\n);padding-block-start:var(\n--mod-menu-section-header-top-edge-to-text,var(\n--mod-menu-item-top-edge-to-text,var(--spectrum-menu-item-top-edge-to-text)\n)\n);padding-inline:var(\n--mod-menu-item-label-inline-edge-to-content,var(--spectrum-menu-item-label-inline-edge-to-content)\n)}:host{display:inline-flex;flex-direction:column;width:var(--swc-menu-width)}:host(:focus){outline:none}::slotted(*){flex-shrink:0}\n`;export default t;\n//# sourceMappingURL=menu.css.js.map\n","\"use strict\";var f=Object.defineProperty;var I=Object.getOwnPropertyDescriptor;var a=(r,o,e,s)=>{for(var t=s>1?void 0:s?I(o,e):o,i=r.length-1,n;i>=0;i--)(n=r[i])&&(t=(s?n(o,e,t):n(t))||t);return s&&t&&f(o,e,t),t};import{html as v,SizedMixin as b,SpectrumElement as g}from\"@spectrum-web-components/base\";import{property as c,query as y}from\"@spectrum-web-components/base/src/decorators.js\";import S from\"./menu.css.js\";function p(r,o){return!!o&&(r===o||r.contains(o))}export class Menu extends b(g,{noDefaultSize:!0}){constructor(){super();this.label=\"\";this.ignore=!1;this.value=\"\";this.valueSeparator=\",\";this._selected=[];this.selectedItems=[];this.childItemSet=new Set;this.focusedItemIndex=0;this.focusInItemIndex=0;this.selectedItemsMap=new Map;this.descendentOverlays=new Map;this.handleSubmenuClosed=e=>{e.stopPropagation(),e.composedPath()[0].dispatchEvent(new Event(\"sp-menu-submenu-closed\",{bubbles:!0,composed:!0}))};this.handleSubmenuOpened=e=>{e.stopPropagation(),e.composedPath()[0].dispatchEvent(new Event(\"sp-menu-submenu-opened\",{bubbles:!0,composed:!0}));const t=this.childItems[this.focusedItemIndex];t&&(t.focused=!1);const i=e.composedPath().find(d=>this.childItemSet.has(d));if(!i)return;const n=this.childItems.indexOf(i);this.focusedItemIndex=n,this.focusInItemIndex=n};this._hasUpdatedSelectedItemIndex=!1;this._willUpdateItems=!1;this.cacheUpdated=Promise.resolve();this.resolveCacheUpdated=()=>{};this.addEventListener(\"sp-menu-item-added-or-updated\",this.onSelectableItemAddedOrUpdated),this.addEventListener(\"sp-menu-item-added-or-updated\",this.onFocusableItemAddedOrUpdated,{capture:!0}),this.addEventListener(\"click\",this.handleClick),this.addEventListener(\"focusin\",this.handleFocusin),this.addEventListener(\"focusout\",this.handleFocusout),this.addEventListener(\"sp-opened\",this.handleSubmenuOpened),this.addEventListener(\"sp-closed\",this.handleSubmenuClosed)}static get styles(){return[S]}get isSubmenu(){return this.slot===\"submenu\"}get selected(){return this._selected}set selected(e){if(e===this.selected)return;const s=this.selected;this._selected=e,this.selectedItems=[],this.selectedItemsMap.clear(),this.childItems.forEach(t=>{t.selected=this.selected.includes(t.value),t.selected&&(this.selectedItems.push(t),this.selectedItemsMap.set(t,!0))}),this.requestUpdate(\"selected\",s)}get childItems(){return this.cachedChildItems||(this.cachedChildItems=this.updateCachedMenuItems()),this.cachedChildItems}updateCachedMenuItems(){if(this.cachedChildItems=[],!this.menuSlot)return[];const e=this.menuSlot.assignedElements({flatten:!0});for(const[s,t]of e.entries()){if(this.childItemSet.has(t)){this.cachedChildItems.push(t);continue}const n=t.localName===\"slot\"?t.assignedElements({flatten:!0}):[...t.querySelectorAll(\":scope > *\")];e.splice(s,1,t,...n)}return this.cachedChildItems}get childRole(){if(this.resolvedRole===\"listbox\")return\"option\";switch(this.resolvedSelects){case\"single\":return\"menuitemradio\";case\"multiple\":return\"menuitemcheckbox\";default:return\"menuitem\"}}get ownRole(){return\"menu\"}onFocusableItemAddedOrUpdated(e){e.menuCascade.set(this,{hadFocusRoot:!!e.item.menuData.focusRoot,ancestorWithSelects:e.currentAncestorWithSelects}),this.selects&&(e.currentAncestorWithSelects=this),e.item.menuData.focusRoot=e.item.menuData.focusRoot||this}onSelectableItemAddedOrUpdated(e){var i,n;const s=e.menuCascade.get(this);if(!s)return;if(e.item.menuData.parentMenu=e.item.menuData.parentMenu||this,s.hadFocusRoot&&!this.ignore&&(this.tabIndex=-1),this.addChildItem(e.item),this.selects===\"inherit\"){this.resolvedSelects=\"inherit\";const d=(i=e.currentAncestorWithSelects)==null?void 0:i.ignore;this.resolvedRole=d?\"none\":((n=e.currentAncestorWithSelects)==null?void 0:n.getAttribute(\"role\"))||this.getAttribute(\"role\")||void 0}else this.selects?(this.resolvedRole=this.ignore?\"none\":this.getAttribute(\"role\")||void 0,this.resolvedSelects=this.selects):(this.resolvedRole=this.ignore?\"none\":this.getAttribute(\"role\")||void 0,this.resolvedSelects=this.resolvedRole===\"none\"?\"ignore\":\"none\");const t=this.resolvedSelects===\"single\"||this.resolvedSelects===\"multiple\";e.item.menuData.cleanupSteps.push(d=>this.removeChildItem(d)),(t||!this.selects&&this.resolvedSelects!==\"ignore\")&&!e.item.menuData.selectionRoot&&(e.item.setRole(this.childRole),e.item.menuData.selectionRoot=e.item.menuData.selectionRoot||this,e.item.selected&&(this.selectedItemsMap.set(e.item,!0),this.selectedItems=[...this.selectedItems,e.item],this._selected=[...this.selected,e.item.value],this.value=this.selected.join(this.valueSeparator)))}addChildItem(e){this.childItemSet.add(e),this.handleItemsChanged()}async removeChildItem(e){this.childItemSet.delete(e),this.cachedChildItems=void 0,e.focused&&(this.handleItemsChanged(),await this.updateComplete,this.focus())}focus({preventScroll:e}={}){if(!this.childItems.length||this.childItems.every(t=>t.disabled))return;if(this.childItems.some(t=>t.menuData.focusRoot!==this)){super.focus({preventScroll:e});return}this.focusMenuItemByOffset(0),super.focus({preventScroll:e});const s=this.selectedItems[0];s&&!e&&s.scrollIntoView({block:\"nearest\"})}handleClick(e){const t=e.composedPath().find(i=>i instanceof Element?i.getAttribute(\"role\")===this.childRole:!1);if(e.defaultPrevented){const i=this.childItems.indexOf(t);(t==null?void 0:t.menuData.focusRoot)===this&&i>-1&&(this.focusedItemIndex=i);return}if(t!=null&&t.href&&t.href.length){this.dispatchEvent(new Event(\"change\",{bubbles:!0,composed:!0}));return}else if((t==null?void 0:t.menuData.selectionRoot)===this&&this.childItems.length){if(e.preventDefault(),t.hasSubmenu||t.open)return;this.selectOrToggleItem(t)}else return;this.prepareToCleanUp()}handleFocusin(e){var n;const s=p(this,e.relatedTarget);if(this.childItems.some(d=>d.menuData.focusRoot!==this))return;const t=this.getRootNode().activeElement,i=((n=this.childItems[this.focusedItemIndex])==null?void 0:n.menuData.selectionRoot)||this;if((t!==i||!s&&e.target!==this)&&(i.focus({preventScroll:!0}),t&&this.focusedItemIndex===0)){const d=this.childItems.findIndex(l=>l===t);this.focusMenuItemByOffset(Math.max(d,0))}this.startListeningToKeyboard()}startListeningToKeyboard(){this.addEventListener(\"keydown\",this.handleKeydown)}handleFocusout(e){p(this,e.relatedTarget)||(this.stopListeningToKeyboard(),this.childItems.forEach(s=>s.focused=!1),this.removeAttribute(\"aria-activedescendant\"))}stopListeningToKeyboard(){this.removeEventListener(\"keydown\",this.handleKeydown)}handleDescendentOverlayOpened(e){const s=e.composedPath()[0];s.overlayElement&&this.descendentOverlays.set(s.overlayElement,s.overlayElement)}handleDescendentOverlayClosed(e){const s=e.composedPath()[0];s.overlayElement&&this.descendentOverlays.delete(s.overlayElement)}async selectOrToggleItem(e){const s=this.resolvedSelects,t=new Map(this.selectedItemsMap),i=this.selected.slice(),n=this.selectedItems.slice(),d=this.value,l=this.childItems[this.focusedItemIndex];if(l&&(l.focused=!1,l.active=!1),this.focusedItemIndex=this.childItems.indexOf(e),this.forwardFocusVisibleToItem(e),s===\"multiple\"){this.selectedItemsMap.has(e)?this.selectedItemsMap.delete(e):this.selectedItemsMap.set(e,!0);const h=[],m=[];this.childItemSet.forEach(u=>{u.menuData.selectionRoot===this&&this.selectedItemsMap.has(u)&&(h.push(u.value),m.push(u))}),this._selected=h,this.selectedItems=m,this.value=this.selected.join(this.valueSeparator)}else this.selectedItemsMap.clear(),this.selectedItemsMap.set(e,!0),this.value=e.value,this._selected=[e.value],this.selectedItems=[e];if(!this.dispatchEvent(new Event(\"change\",{cancelable:!0,bubbles:!0,composed:!0}))){this._selected=i,this.selectedItems=n,this.selectedItemsMap=t,this.value=d;return}if(s===\"single\"){for(const h of t.keys())h!==e&&(h.selected=!1);e.selected=!0}else s===\"multiple\"&&(e.selected=!e.selected)}navigateWithinMenu(e){const{code:s}=e,t=this.childItems[this.focusedItemIndex],i=s===\"ArrowDown\"?1:-1,n=this.focusMenuItemByOffset(i);n!==t&&(e.preventDefault(),e.stopPropagation(),n.scrollIntoView({block:\"nearest\"}))}navigateBetweenRelatedMenus(e){const{code:s}=e,t=this.isLTR&&s===\"ArrowRight\"||!this.isLTR&&s===\"ArrowLeft\",i=this.isLTR&&s===\"ArrowLeft\"||!this.isLTR&&s===\"ArrowRight\";if(t){e.stopPropagation();const n=this.childItems[this.focusedItemIndex];n!=null&&n.hasSubmenu&&n.openOverlay()}else i&&this.isSubmenu&&(e.stopPropagation(),this.dispatchEvent(new Event(\"close\",{bubbles:!0})),this.updateSelectedItemIndex())}handleKeydown(e){var n;if(e.target!==this&&this!==e.target.parentElement||e.defaultPrevented)return;const t=this.childItems[this.focusedItemIndex];t&&(t.focused=!0);const{code:i}=e;if(e.shiftKey&&e.target!==this&&this.hasAttribute(\"tabindex\")){this.removeAttribute(\"tabindex\");const d=l=>{!l.shiftKey&&!this.hasAttribute(\"tabindex\")&&(this.tabIndex=0,document.removeEventListener(\"keyup\",d),this.removeEventListener(\"focusout\",d))};document.addEventListener(\"keyup\",d),this.addEventListener(\"focusout\",d)}if(i===\"Tab\"){this.prepareToCleanUp();return}if(i===\"Space\"&&t!=null&&t.hasSubmenu){t.openOverlay();return}if(i===\"Space\"||i===\"Enter\"){(n=this.childItems[this.focusedItemIndex])==null||n.click();return}if(i===\"ArrowDown\"||i===\"ArrowUp\"){this.navigateWithinMenu(e);return}this.navigateBetweenRelatedMenus(e)}focusMenuItemByOffset(e){const s=e||1,t=this.childItems[this.focusedItemIndex];t&&(t.focused=!1,t.active=t.open),this.focusedItemIndex=(this.childItems.length+this.focusedItemIndex+e)%this.childItems.length;let i=this.childItems[this.focusedItemIndex],n=this.childItems.length;for(;i!=null&&i.disabled&&n;)n-=1,this.focusedItemIndex=(this.childItems.length+this.focusedItemIndex+s)%this.childItems.length,i=this.childItems[this.focusedItemIndex];return i!=null&&i.disabled||this.forwardFocusVisibleToItem(i),i}prepareToCleanUp(){document.addEventListener(\"focusout\",()=>{requestAnimationFrame(()=>{const e=this.childItems[this.focusedItemIndex];e&&(e.focused=!1,this.updateSelectedItemIndex())})},{once:!0})}updateSelectedItemIndex(){let e=0;const s=new Map,t=[],i=[];let n=this.childItems.length;for(;n;){n-=1;const d=this.childItems[n];d.menuData.selectionRoot===this&&((d.selected||!this._hasUpdatedSelectedItemIndex&&this.selected.includes(d.value))&&(e=n,s.set(d,!0),t.unshift(d.value),i.unshift(d)),n!==e&&(d.focused=!1))}i.map((d,l)=>{l>0&&(d.focused=!1)}),this.selectedItemsMap=s,this._selected=t,this.selectedItems=i,this.value=this.selected.join(this.valueSeparator),this.focusedItemIndex=e,this.focusInItemIndex=e}handleItemsChanged(){this.cachedChildItems=void 0,this._willUpdateItems||(this._willUpdateItems=!0,this.cacheUpdated=this.updateCache())}async updateCache(){this.hasUpdated?await new Promise(e=>requestAnimationFrame(()=>e(!0))):await Promise.all([new Promise(e=>requestAnimationFrame(()=>e(!0))),this.updateComplete]),this.cachedChildItems===void 0&&(this.updateSelectedItemIndex(),this.updateItemFocus()),this._willUpdateItems=!1}updateItemFocus(){if(this.childItems.length==0)return;const e=this.childItems[this.focusInItemIndex];this.getRootNode().activeElement===e.menuData.focusRoot&&this.forwardFocusVisibleToItem(e)}closeDescendentOverlays(){this.descendentOverlays.forEach(e=>{e.open=!1}),this.descendentOverlays=new Map}forwardFocusVisibleToItem(e){if(!e||e.menuData.focusRoot!==this)return;this.closeDescendentOverlays();const s=this.hasVisibleFocusInTree()||!!this.childItems.find(t=>t.hasVisibleFocusInTree());e.focused=s,this.setAttribute(\"aria-activedescendant\",e.id),e.menuData.selectionRoot&&e.menuData.selectionRoot!==this&&e.menuData.selectionRoot.focus()}handleSlotchange({target:e}){const s=e.assignedElements({flatten:!0});this.childItems.length!==s.length&&s.forEach(t=>{typeof t.triggerUpdate!=\"undefined\"&&t.triggerUpdate()})}renderMenuItemSlot(){return v`\n            <slot\n                @sp-menu-submenu-opened=${this.handleDescendentOverlayOpened}\n                @sp-menu-submenu-closed=${this.handleDescendentOverlayClosed}\n                @slotchange=${this.handleSlotchange}\n            ></slot>\n        `}render(){return this.renderMenuItemSlot()}firstUpdated(e){super.firstUpdated(e),!this.hasAttribute(\"tabindex\")&&!this.ignore&&(this.getAttribute(\"role\")===\"group\"?this.tabIndex=-1:this.tabIndex=0);const s=[new Promise(t=>requestAnimationFrame(()=>t(!0)))];[...this.children].forEach(t=>{t.localName===\"sp-menu-item\"&&s.push(t.updateComplete)}),this.childItemsUpdated=Promise.all(s)}updated(e){super.updated(e),e.has(\"selects\")&&this.hasUpdated&&this.selectsChanged(),e.has(\"label\")&&(this.label||typeof e.get(\"label\")!=\"undefined\")&&(this.label?this.setAttribute(\"aria-label\",this.label):this.removeAttribute(\"aria-label\"))}selectsChanged(){const e=[new Promise(s=>requestAnimationFrame(()=>s(!0)))];this.childItemSet.forEach(s=>{e.push(s.triggerUpdate())}),this.childItemsUpdated=Promise.all(e)}connectedCallback(){super.connectedCallback(),!this.hasAttribute(\"role\")&&!this.ignore&&this.setAttribute(\"role\",this.ownRole),this.updateComplete.then(()=>this.updateItemFocus())}disconnectedCallback(){this.cachedChildItems=void 0,super.disconnectedCallback()}async getUpdateComplete(){const e=await super.getUpdateComplete();return await this.childItemsUpdated,await this.cacheUpdated,e}}a([c({type:String,reflect:!0})],Menu.prototype,\"label\",2),a([c({type:Boolean,reflect:!0})],Menu.prototype,\"ignore\",2),a([c({type:String,reflect:!0})],Menu.prototype,\"selects\",2),a([c({type:String})],Menu.prototype,\"value\",2),a([c({type:String,attribute:\"value-separator\"})],Menu.prototype,\"valueSeparator\",2),a([c({attribute:!1})],Menu.prototype,\"selected\",1),a([c({attribute:!1})],Menu.prototype,\"selectedItems\",2),a([y(\"slot:not([name])\")],Menu.prototype,\"menuSlot\",2);\n//# sourceMappingURL=Menu.js.map\n","\"use strict\";import{Menu as e}from\"./src/Menu.js\";import{defineElement as m}from\"@spectrum-web-components/base/src/define-element.js\";m(\"sp-menu\",e);\n//# sourceMappingURL=sp-menu.js.map\n"],"names":["css","f","Object","defineProperty","I","getOwnPropertyDescriptor","a","r","o","e","s","n","t","i","length","p","el","isOrContains","contains","Menu","SpectrumElement","noDefaultSize","constructor","super","this","label","ignore","value","valueSeparator","_selected","selectedItems","childItemSet","Set","focusedItemIndex","focusInItemIndex","selectedItemsMap","Map","descendentOverlays","handleSubmenuClosed","event","stopPropagation","composedPath","dispatchEvent","bubbles","composed","handleSubmenuOpened","Event","focusedItem","childItems","focused","openedItem","find","has","openedItemIndex","indexOf","_hasUpdatedSelectedItemIndex","_willUpdateItems","cacheUpdated","Promise","resolve","resolveCacheUpdated","addEventListener","onSelectableItemAddedOrUpdated","onFocusableItemAddedOrUpdated","capture","handleClick","handleFocusin","handleFocusout","styles","menuStyles","isSubmenu","slot","selected","clear","forEach","item","includes","push","set","requestUpdate","old","cachedChildItems","updateCachedMenuItems","menuSlot","assignedElements","flatten","slottedElement","slottedElements","entries","localName","querySelectorAll","splice","flattenedChildren","childRole","resolvedRole","resolvedSelects","ownRole","menuCascade","hadFocusRoot","menuData","focusRoot","ancestorWithSelects","currentAncestorWithSelects","selects","cascadeData","get","parentMenu","tabIndex","addChildItem","ignoreMenu","_a","_b","getAttribute","cleanupSteps","removeChildItem","selectionRoot","setRole","join","add","handleItemsChanged","async","delete","updateComplete","focus","preventScroll","every","childItem","disabled","some","focusMenuItemByOffset","selectedItem","scrollIntoView","block","target","Element","defaultPrevented","index","href","preventDefault","hasSubmenu","open","selectOrToggleItem","prepareToCleanUp","elementIsOrContains","relatedTarget","getRootNode","activeElement","wasOrContainedRelatedTarget","d","findIndex","Math","max","offset","startListeningToKeyboard","handleKeydown","stopListeningToKeyboard","child","removeAttribute","removeEventListener","overlayElement","targetItem","oldSelectedItemsMap","oldSelected","slice","oldSelectedItems","oldValue","focusedChild","active","forwardFocusVisibleToItem","cancelable","oldItem","keys","code","lastFocusedItem","direction","itemToFocus","shouldOpenSubmenu","isLTR","shouldCloseSelfAsSubmenu","openOverlay","updateSelectedItemIndex","parentElement","shiftKey","hasAttribute","document","replaceTabindex","navigateBetweenRelatedMenus","navigateWithinMenu","click","availableItems","step","requestAnimationFrame","once","firstOrFirstSelectedIndex","itemIndex","unshift","map","updateCache","hasUpdated","res","all","updateItemFocus","focusInItem","closeDescendentOverlays","overlay","hasVisibleFocusInTree","setAttribute","id","handleSlotchange","assignedElement","triggerUpdate","renderMenuItemSlot","html","handleDescendentOverlayOpened","handleDescendentOverlayClosed","render","firstUpdated","changed","updates","children","childItemsUpdated","changes","updated","selectsChanged","connectedCallback","then","disconnectedCallback","getUpdateComplete","complete","__decorateClass","property","type","String","reflect","prototype","Boolean","attribute","query","defineElement"],"mappings":"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"}