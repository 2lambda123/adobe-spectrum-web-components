{"version":3,"file":"a438f4d4.js","sources":["../../../packages/menu/src/menu.css.js","../../../packages/menu/src/Menu.js","../../../packages/menu/sp-menu.js"],"sourcesContent":["\"use strict\";import{css as e}from\"@spectrum-web-components/base\";const t=e`\n:host{--spectrum-menu-item-min-height:var(--spectrum-component-height-100);--spectrum-menu-item-icon-height:var(--spectrum-workflow-icon-size-100);--spectrum-menu-item-icon-width:var(--spectrum-workflow-icon-size-100);--spectrum-menu-item-label-font-size:var(--spectrum-font-size-100);--spectrum-menu-item-label-text-to-visual:var(\n--spectrum-text-to-visual-100\n);--spectrum-menu-item-label-inline-edge-to-content:var(\n--spectrum-component-edge-to-text-100\n);--spectrum-menu-item-top-edge-to-text:var(\n--spectrum-component-top-to-text-100\n);--spectrum-menu-item-bottom-edge-to-text:var(\n--spectrum-component-bottom-to-text-100\n);--spectrum-menu-item-text-to-control:var(--spectrum-text-to-control-100);--spectrum-menu-item-description-font-size:var(--spectrum-font-size-75);--spectrum-menu-section-header-font-size:var(--spectrum-font-size-100);--spectrum-menu-section-header-min-width:var(\n--spectrum-component-height-100\n);--spectrum-menu-item-selectable-edge-to-text-not-selected:var(\n--spectrum-menu-item-selectable-edge-to-text-not-selected-medium\n);--spectrum-menu-item-checkmark-height:var(\n--spectrum-menu-item-checkmark-height-medium\n);--spectrum-menu-item-checkmark-width:var(\n--spectrum-menu-item-checkmark-width-medium\n);--spectrum-menu-item-top-to-checkmark:var(\n--spectrum-menu-item-top-to-selected-icon-medium\n);--spectrum-menu-item-label-line-height:var(--spectrum-line-height-100);--spectrum-menu-item-label-line-height-cjk:var(\n--spectrum-cjk-line-height-100\n);--spectrum-menu-item-label-to-description-spacing:var(\n--spectrum-menu-item-label-to-description\n);--spectrum-menu-item-focus-indicator-width:var(\n--spectrum-border-width-200\n);--spectrum-menu-item-focus-indicator-color:var(--spectrum-blue-800);--spectrum-menu-item-label-to-value-area-min-spacing:var(\n--spectrum-spacing-100\n);--spectrum-menu-item-label-content-color-default:var(\n--spectrum-neutral-content-color-default\n);--spectrum-menu-item-label-content-color-hover:var(\n--spectrum-neutral-content-color-hover\n);--spectrum-menu-item-label-content-color-down:var(\n--spectrum-neutral-content-color-down\n);--spectrum-menu-item-label-content-color-focus:var(\n--spectrum-neutral-content-color-key-focus\n);--spectrum-menu-item-label-icon-color-default:var(\n--spectrum-neutral-content-color-default\n);--spectrum-menu-item-label-icon-color-hover:var(\n--spectrum-neutral-content-color-hover\n);--spectrum-menu-item-label-icon-color-down:var(\n--spectrum-neutral-content-color-down\n);--spectrum-menu-item-label-icon-color-focus:var(\n--spectrum-neutral-content-color-key-focus\n);--spectrum-menu-item-label-content-color-disabled:var(\n--spectrum-disabled-content-color\n);--spectrum-menu-item-label-icon-color-disabled:var(\n--spectrum-disabled-content-color\n);--spectrum-menu-item-description-line-height:var(\n--spectrum-line-height-100\n);--spectrum-menu-item-description-line-height-cjk:var(\n--spectrum-cjk-line-height-100\n);--spectrum-menu-item-description-color-default:var(\n--spectrum-neutral-subdued-content-color-default\n);--spectrum-menu-item-description-color-hover:var(\n--spectrum-neutral-subdued-content-color-hover\n);--spectrum-menu-item-description-color-down:var(\n--spectrum-neutral-subdued-content-color-down\n);--spectrum-menu-item-description-color-focus:var(\n--spectrum-neutral-subdued-content-color-key-focus\n);--spectrum-menu-item-description-color-disabled:var(\n--spectrum-disabled-content-color\n);--spectrum-menu-section-header-line-height:var(--spectrum-line-height-100);--spectrum-menu-section-header-line-height-cjk:var(\n--spectrum-cjk-line-height-100\n);--spectrum-menu-section-header-font-weight:var(\n--spectrum-bold-font-weight\n);--spectrum-menu-section-header-color:var(--spectrum-gray-900);--spectrum-menu-collapsible-icon-color:var(--spectrum-gray-900);--spectrum-menu-checkmark-icon-color-default:var(\n--spectrum-accent-color-900\n);--spectrum-menu-checkmark-icon-color-hover:var(\n--spectrum-accent-color-1000\n);--spectrum-menu-checkmark-icon-color-down:var(\n--spectrum-accent-color-1100\n);--spectrum-menu-checkmark-icon-color-focus:var(\n--spectrum-accent-color-1000\n);--spectrum-menu-drillin-icon-color-default:var(\n--spectrum-neutral-subdued-content-color-default\n);--spectrum-menu-drillin-icon-color-hover:var(\n--spectrum-neutral-subdued-content-color-hover\n);--spectrum-menu-drillin-icon-color-down:var(\n--spectrum-neutral-subdued-content-color-down\n);--spectrum-menu-drillin-icon-color-focus:var(\n--spectrum-neutral-subdued-content-color-key-focus\n);--spectrum-menu-item-value-color-default:var(\n--spectrum-neutral-subdued-content-color-default\n);--spectrum-menu-item-value-color-hover:var(\n--spectrum-neutral-subdued-content-color-hover\n);--spectrum-menu-item-value-color-down:var(\n--spectrum-neutral-subdued-content-color-down\n);--spectrum-menu-item-value-color-focus:var(\n--spectrum-neutral-subdued-content-color-key-focus\n);--spectrum-menu-checkmark-display-hidden:none;--spectrum-menu-checkmark-display-shown:block;--spectrum-menu-checkmark-display:var(\n--spectrum-menu-checkmark-display-shown\n);--spectrum-menu-item-collapsible-has-icon-submenu-item-padding-x-start:calc(var(--spectrum-menu-item-label-inline-edge-to-content) + var(--spectrum-menu-item-checkmark-width) + var(--spectrum-menu-item-text-to-control) + var(--spectrum-menu-item-icon-width) + var(--spectrum-menu-item-label-text-to-visual) + var(--spectrum-menu-item-focus-indicator-width));--spectrum-menu-item-collapsible-no-icon-submenu-item-padding-x-start:calc(var(--spectrum-menu-item-label-inline-edge-to-content) + var(--spectrum-menu-item-checkmark-width) + var(--spectrum-menu-item-label-text-to-visual) + var(--spectrum-menu-item-focus-indicator-width))}:host([size=s]){--spectrum-menu-item-min-height:var(--spectrum-component-height-75);--spectrum-menu-item-icon-height:var(--spectrum-workflow-icon-size-75);--spectrum-menu-item-icon-width:var(--spectrum-workflow-icon-size-75);--spectrum-menu-item-label-font-size:var(--spectrum-font-size-75);--spectrum-menu-item-label-text-to-visual:var(\n--spectrum-text-to-visual-75\n);--spectrum-menu-item-label-inline-edge-to-content:var(\n--spectrum-component-edge-to-text-75\n);--spectrum-menu-item-top-edge-to-text:var(\n--spectrum-component-top-to-text-75\n);--spectrum-menu-item-bottom-edge-to-text:var(\n--spectrum-component-bottom-to-text-75\n);--spectrum-menu-item-text-to-control:var(--spectrum-text-to-control-75);--spectrum-menu-item-description-font-size:var(--spectrum-font-size-50);--spectrum-menu-section-header-font-size:var(--spectrum-font-size-75);--spectrum-menu-section-header-min-width:var(\n--spectrum-component-height-75\n);--spectrum-menu-item-selectable-edge-to-text-not-selected:var(\n--spectrum-menu-item-selectable-edge-to-text-not-selected-small\n);--spectrum-menu-item-checkmark-height:var(\n--spectrum-menu-item-checkmark-height-small\n);--spectrum-menu-item-checkmark-width:var(\n--spectrum-menu-item-checkmark-width-small\n);--spectrum-menu-item-top-to-checkmark:var(\n--spectrum-menu-item-top-to-selected-icon-small\n)}:host([size=l]){--spectrum-menu-item-min-height:var(--spectrum-component-height-200);--spectrum-menu-item-icon-height:var(--spectrum-workflow-icon-size-200);--spectrum-menu-item-icon-width:var(--spectrum-workflow-icon-size-200);--spectrum-menu-item-label-font-size:var(--spectrum-font-size-200);--spectrum-menu-item-label-text-to-visual:var(\n--spectrum-text-to-visual-200\n);--spectrum-menu-item-label-inline-edge-to-content:var(\n--spectrum-component-edge-to-text-200\n);--spectrum-menu-item-top-edge-to-text:var(\n--spectrum-component-top-to-text-200\n);--spectrum-menu-item-bottom-edge-to-text:var(\n--spectrum-component-bottom-to-text-200\n);--spectrum-menu-item-text-to-control:var(--spectrum-text-to-control-200);--spectrum-menu-item-description-font-size:var(--spectrum-font-size-100);--spectrum-menu-section-header-font-size:var(--spectrum-font-size-200);--spectrum-menu-section-header-min-width:var(\n--spectrum-component-height-200\n);--spectrum-menu-item-selectable-edge-to-text-not-selected:var(\n--spectrum-menu-item-selectable-edge-to-text-not-selected-large\n);--spectrum-menu-item-checkmark-height:var(\n--spectrum-menu-item-checkmark-height-large\n);--spectrum-menu-item-checkmark-width:var(\n--spectrum-menu-item-checkmark-width-large\n);--spectrum-menu-item-top-to-checkmark:var(\n--spectrum-menu-item-top-to-selected-icon-large\n)}:host([size=xl]){--spectrum-menu-item-min-height:var(--spectrum-component-height-300);--spectrum-menu-item-icon-height:var(--spectrum-workflow-icon-size-300);--spectrum-menu-item-icon-width:var(--spectrum-workflow-icon-size-300);--spectrum-menu-item-label-font-size:var(--spectrum-font-size-300);--spectrum-menu-item-label-text-to-visual:var(\n--spectrum-text-to-visual-300\n);--spectrum-menu-item-label-inline-edge-to-content:var(\n--spectrum-component-edge-to-text-300\n);--spectrum-menu-item-top-edge-to-text:var(\n--spectrum-component-top-to-text-300\n);--spectrum-menu-item-bottom-edge-to-text:var(\n--spectrum-component-bottom-to-text-300\n);--spectrum-menu-item-text-to-control:var(--spectrum-text-to-control-300);--spectrum-menu-item-description-font-size:var(--spectrum-font-size-200);--spectrum-menu-section-header-font-size:var(--spectrum-font-size-300);--spectrum-menu-section-header-min-width:var(\n--spectrum-component-height-300\n);--spectrum-menu-item-selectable-edge-to-text-not-selected:var(\n--spectrum-menu-item-selectable-edge-to-text-not-selected-extra-large\n);--spectrum-menu-item-checkmark-height:var(\n--spectrum-menu-item-checkmark-height-extra-large\n);--spectrum-menu-item-checkmark-width:var(\n--spectrum-menu-item-checkmark-width-extra-large\n);--spectrum-menu-item-top-to-checkmark:var(\n--spectrum-menu-item-top-to-selected-icon-extra-large\n)}@media (forced-colors:active){:host{--highcontrast-menu-item-background-color-default:ButtonFace;--highcontrast-menu-item-color-default:ButtonText;--highcontrast-menu-item-background-color-focus:Highlight;--highcontrast-menu-item-color-focus:HighlightText;--highcontrast-menu-checkmark-icon-color-default:Highlight;--highcontrast-menu-item-color-disabled:GrayText;--highcontrast-menu-item-focus-indicator-color:Highlight;--highcontrast-menu-item-selected-background-color:Highlight;--highcontrast-menu-item-selected-color:HighlightText}@supports (color:SelectedItem){:host{--highcontrast-menu-item-selected-background-color:SelectedItem;--highcontrast-menu-item-selected-color:SelectedItemText}}}:host{box-sizing:border-box;display:inline-block;list-style-type:none;margin:0;overflow:auto;padding:0}:host:lang(ja),:host:lang(ko),:host:lang(zh){--spectrum-menu-item-label-line-height:var(\n--mod-menu-item-label-line-height-cjk,var(--spectrum-menu-item-label-line-height-cjk)\n);--spectrum-menu-item-description-line-height:var(\n--mod-menu-item-description-line-height-cjk,var(--spectrum-menu-item-description-line-height-cjk)\n);--spectrum-menu-section-header-line-height:var(\n--mod-menu-section-header-line-height-cjk,var(--spectrum-menu-section-header-line-height-cjk)\n)}:host([selects]) ::slotted(sp-menu-item){--spectrum-menu-checkmark-display:var(\n--spectrum-menu-checkmark-display-hidden\n);padding-inline-start:var(\n--mod-menu-item-selectable-edge-to-text-not-selected,var(--spectrum-menu-item-selectable-edge-to-text-not-selected)\n)}:host([selects]) ::slotted(sp-menu-item[selected]){--spectrum-menu-checkmark-display:var(\n--spectrum-menu-checkmark-display-shown\n);padding-inline-start:var(\n--mod-menu-item-label-inline-edge-to-content,var(--spectrum-menu-item-label-inline-edge-to-content)\n)}li:not(::slotted(sp-menu-item),.menu-divider){box-sizing:border-box;display:block;margin:0;padding:0;position:relative}.spectrum-Menu-sectionHeading{color:var(\n--highcontrast-menu-item-color-default,var(\n--mod-menu-section-header-color,var(--spectrum-menu-section-header-color)\n)\n);display:block;font-size:var(\n--mod-menu-section-header-font-size,var(--spectrum-menu-section-header-font-size)\n);font-weight:var(\n--mod-menu-section-header-font-weight,var(--spectrum-menu-section-header-font-weight)\n);grid-area:sectionHeadingArea/1/sectionHeadingArea/-1;line-height:var(\n--mod-menu-section-header-line-height,var(--spectrum-menu-section-header-line-height)\n);min-inline-size:var(\n--mod-menu-section-header-min-width,var(--spectrum-menu-section-header-min-width)\n);padding-block-end:var(\n--mod-menu-section-header-bottom-edge-to-text,var(\n--mod-menu-item-bottom-edge-to-text,var(--spectrum-menu-item-bottom-edge-to-text)\n)\n);padding-block-start:var(\n--mod-menu-section-header-top-edge-to-text,var(\n--mod-menu-item-top-edge-to-text,var(--spectrum-menu-item-top-edge-to-text)\n)\n);padding-inline:var(\n--mod-menu-item-label-inline-edge-to-content,var(--spectrum-menu-item-label-inline-edge-to-content)\n)}:host{display:inline-flex;flex-direction:column;width:var(--swc-menu-width)}:host(:focus){outline:none}::slotted(*){flex-shrink:0}\n`;export default t;\n//# sourceMappingURL=menu.css.js.map\n","\"use strict\";var f=Object.defineProperty;var I=Object.getOwnPropertyDescriptor;var a=(r,o,e,s)=>{for(var t=s>1?void 0:s?I(o,e):o,i=r.length-1,n;i>=0;i--)(n=r[i])&&(t=(s?n(o,e,t):n(t))||t);return s&&t&&f(o,e,t),t};import{html as v,SizedMixin as b,SpectrumElement as g}from\"@spectrum-web-components/base\";import{property as c,query as y}from\"@spectrum-web-components/base/src/decorators.js\";import S from\"./menu.css.js\";function p(r,o){return!!o&&(r===o||r.contains(o))}export class Menu extends b(g,{noDefaultSize:!0}){constructor(){super();this.label=\"\";this.ignore=!1;this.value=\"\";this.valueSeparator=\",\";this._selected=[];this.selectedItems=[];this.childItemSet=new Set;this.focusedItemIndex=0;this.focusInItemIndex=0;this.selectedItemsMap=new Map;this.descendentOverlays=new Map;this.handleSubmenuClosed=e=>{e.stopPropagation(),e.composedPath()[0].dispatchEvent(new Event(\"sp-menu-submenu-closed\",{bubbles:!0,composed:!0}))};this.handleSubmenuOpened=e=>{e.stopPropagation(),e.composedPath()[0].dispatchEvent(new Event(\"sp-menu-submenu-opened\",{bubbles:!0,composed:!0}));const t=this.childItems[this.focusedItemIndex];t&&(t.focused=!1);const i=e.composedPath().find(d=>this.childItemSet.has(d));if(!i)return;const n=this.childItems.indexOf(i);this.focusedItemIndex=n,this.focusInItemIndex=n};this._hasUpdatedSelectedItemIndex=!1;this._willUpdateItems=!1;this.cacheUpdated=Promise.resolve();this.resolveCacheUpdated=()=>{};this.addEventListener(\"sp-menu-item-added-or-updated\",this.onSelectableItemAddedOrUpdated),this.addEventListener(\"sp-menu-item-added-or-updated\",this.onFocusableItemAddedOrUpdated,{capture:!0}),this.addEventListener(\"click\",this.handleClick),this.addEventListener(\"focusin\",this.handleFocusin),this.addEventListener(\"focusout\",this.handleFocusout),this.addEventListener(\"sp-opened\",this.handleSubmenuOpened),this.addEventListener(\"sp-closed\",this.handleSubmenuClosed)}static get styles(){return[S]}get isSubmenu(){return this.slot===\"submenu\"}get selected(){return this._selected}set selected(e){if(e===this.selected)return;const s=this.selected;this._selected=e,this.selectedItems=[],this.selectedItemsMap.clear(),this.childItems.forEach(t=>{t.selected=this.selected.includes(t.value),t.selected&&(this.selectedItems.push(t),this.selectedItemsMap.set(t,!0))}),this.requestUpdate(\"selected\",s)}get childItems(){return this.cachedChildItems||(this.cachedChildItems=this.updateCachedMenuItems()),this.cachedChildItems}updateCachedMenuItems(){if(this.cachedChildItems=[],!this.menuSlot)return[];const e=this.menuSlot.assignedElements({flatten:!0});for(const[s,t]of e.entries()){if(this.childItemSet.has(t)){this.cachedChildItems.push(t);continue}const n=t.localName===\"slot\"?t.assignedElements({flatten:!0}):[...t.querySelectorAll(\":scope > *\")];e.splice(s,1,t,...n)}return this.cachedChildItems}get childRole(){if(this.resolvedRole===\"listbox\")return\"option\";switch(this.resolvedSelects){case\"single\":return\"menuitemradio\";case\"multiple\":return\"menuitemcheckbox\";default:return\"menuitem\"}}get ownRole(){return\"menu\"}onFocusableItemAddedOrUpdated(e){e.menuCascade.set(this,{hadFocusRoot:!!e.item.menuData.focusRoot,ancestorWithSelects:e.currentAncestorWithSelects}),this.selects&&(e.currentAncestorWithSelects=this),e.item.menuData.focusRoot=e.item.menuData.focusRoot||this}onSelectableItemAddedOrUpdated(e){var i,n;const s=e.menuCascade.get(this);if(!s)return;if(e.item.menuData.parentMenu=e.item.menuData.parentMenu||this,s.hadFocusRoot&&!this.ignore&&(this.tabIndex=-1),this.addChildItem(e.item),this.selects===\"inherit\"){this.resolvedSelects=\"inherit\";const d=(i=e.currentAncestorWithSelects)==null?void 0:i.ignore;this.resolvedRole=d?\"none\":((n=e.currentAncestorWithSelects)==null?void 0:n.getAttribute(\"role\"))||this.getAttribute(\"role\")||void 0}else this.selects?(this.resolvedRole=this.ignore?\"none\":this.getAttribute(\"role\")||void 0,this.resolvedSelects=this.selects):(this.resolvedRole=this.ignore?\"none\":this.getAttribute(\"role\")||void 0,this.resolvedSelects=this.resolvedRole===\"none\"?\"ignore\":\"none\");const t=this.resolvedSelects===\"single\"||this.resolvedSelects===\"multiple\";e.item.menuData.cleanupSteps.push(d=>this.removeChildItem(d)),(t||!this.selects&&this.resolvedSelects!==\"ignore\")&&!e.item.menuData.selectionRoot&&(e.item.setRole(this.childRole),e.item.menuData.selectionRoot=e.item.menuData.selectionRoot||this,e.item.selected&&(this.selectedItemsMap.set(e.item,!0),this.selectedItems=[...this.selectedItems,e.item],this._selected=[...this.selected,e.item.value],this.value=this.selected.join(this.valueSeparator)))}addChildItem(e){this.childItemSet.add(e),this.handleItemsChanged()}async removeChildItem(e){this.childItemSet.delete(e),this.cachedChildItems=void 0,e.focused&&(this.handleItemsChanged(),await this.updateComplete,this.focus())}focus({preventScroll:e}={}){if(!this.childItems.length||this.childItems.every(t=>t.disabled))return;if(this.childItems.some(t=>t.menuData.focusRoot!==this)){super.focus({preventScroll:e});return}this.focusMenuItemByOffset(0),super.focus({preventScroll:e});const s=this.selectedItems[0];s&&!e&&s.scrollIntoView({block:\"nearest\"})}handleClick(e){const t=e.composedPath().find(i=>i instanceof Element?i.getAttribute(\"role\")===this.childRole:!1);if(e.defaultPrevented){const i=this.childItems.indexOf(t);(t==null?void 0:t.menuData.focusRoot)===this&&i>-1&&(this.focusedItemIndex=i);return}if(t!=null&&t.href&&t.href.length){this.dispatchEvent(new Event(\"change\",{bubbles:!0,composed:!0}));return}else if((t==null?void 0:t.menuData.selectionRoot)===this&&this.childItems.length){if(e.preventDefault(),t.hasSubmenu||t.open)return;this.selectOrToggleItem(t)}else return;this.prepareToCleanUp()}handleFocusin(e){var n;const s=p(this,e.relatedTarget);if(this.childItems.some(d=>d.menuData.focusRoot!==this))return;const t=this.getRootNode().activeElement,i=((n=this.childItems[this.focusedItemIndex])==null?void 0:n.menuData.selectionRoot)||this;if((t!==i||!s&&e.target!==this)&&(i.focus({preventScroll:!0}),t&&this.focusedItemIndex===0)){const d=this.childItems.findIndex(l=>l===t);this.focusMenuItemByOffset(Math.max(d,0))}this.startListeningToKeyboard()}startListeningToKeyboard(){this.addEventListener(\"keydown\",this.handleKeydown)}handleFocusout(e){p(this,e.relatedTarget)||(this.stopListeningToKeyboard(),this.childItems.forEach(s=>s.focused=!1),this.removeAttribute(\"aria-activedescendant\"))}stopListeningToKeyboard(){this.removeEventListener(\"keydown\",this.handleKeydown)}handleDescendentOverlayOpened(e){const s=e.composedPath()[0];s.overlayElement&&this.descendentOverlays.set(s.overlayElement,s.overlayElement)}handleDescendentOverlayClosed(e){const s=e.composedPath()[0];s.overlayElement&&this.descendentOverlays.delete(s.overlayElement)}async selectOrToggleItem(e){const s=this.resolvedSelects,t=new Map(this.selectedItemsMap),i=this.selected.slice(),n=this.selectedItems.slice(),d=this.value,l=this.childItems[this.focusedItemIndex];if(l&&(l.focused=!1,l.active=!1),this.focusedItemIndex=this.childItems.indexOf(e),this.forwardFocusVisibleToItem(e),s===\"multiple\"){this.selectedItemsMap.has(e)?this.selectedItemsMap.delete(e):this.selectedItemsMap.set(e,!0);const h=[],m=[];this.childItemSet.forEach(u=>{u.menuData.selectionRoot===this&&this.selectedItemsMap.has(u)&&(h.push(u.value),m.push(u))}),this._selected=h,this.selectedItems=m,this.value=this.selected.join(this.valueSeparator)}else this.selectedItemsMap.clear(),this.selectedItemsMap.set(e,!0),this.value=e.value,this._selected=[e.value],this.selectedItems=[e];if(await this.updateComplete,!this.dispatchEvent(new Event(\"change\",{cancelable:!0,bubbles:!0,composed:!0}))){this._selected=i,this.selectedItems=n,this.selectedItemsMap=t,this.value=d;return}if(s===\"single\"){for(const h of t.keys())h!==e&&(h.selected=!1);e.selected=!0}else s===\"multiple\"&&(e.selected=!e.selected)}navigateWithinMenu(e){const{code:s}=e,t=this.childItems[this.focusedItemIndex],i=s===\"ArrowDown\"?1:-1,n=this.focusMenuItemByOffset(i);n!==t&&(e.preventDefault(),e.stopPropagation(),n.scrollIntoView({block:\"nearest\"}))}navigateBetweenRelatedMenus(e){const{code:s}=e,t=this.isLTR&&s===\"ArrowRight\"||!this.isLTR&&s===\"ArrowLeft\",i=this.isLTR&&s===\"ArrowLeft\"||!this.isLTR&&s===\"ArrowRight\";if(t){e.stopPropagation();const n=this.childItems[this.focusedItemIndex];n!=null&&n.hasSubmenu&&n.openOverlay()}else i&&this.isSubmenu&&(e.stopPropagation(),this.dispatchEvent(new Event(\"close\",{bubbles:!0})),this.updateSelectedItemIndex())}handleKeydown(e){var n;if(e.target!==this&&this!==e.target.parentElement||e.defaultPrevented)return;const t=this.childItems[this.focusedItemIndex];t&&(t.focused=!0);const{code:i}=e;if(e.shiftKey&&e.target!==this&&this.hasAttribute(\"tabindex\")){this.removeAttribute(\"tabindex\");const d=l=>{!l.shiftKey&&!this.hasAttribute(\"tabindex\")&&(this.tabIndex=0,document.removeEventListener(\"keyup\",d),this.removeEventListener(\"focusout\",d))};document.addEventListener(\"keyup\",d),this.addEventListener(\"focusout\",d)}if(i===\"Tab\"){this.prepareToCleanUp();return}if(i===\"Space\"&&t!=null&&t.hasSubmenu){t.openOverlay();return}if(i===\"Space\"||i===\"Enter\"){(n=this.childItems[this.focusedItemIndex])==null||n.click();return}if(i===\"ArrowDown\"||i===\"ArrowUp\"){this.navigateWithinMenu(e);return}this.navigateBetweenRelatedMenus(e)}focusMenuItemByOffset(e){const s=e||1,t=this.childItems[this.focusedItemIndex];t&&(t.focused=!1,t.active=t.open),this.focusedItemIndex=(this.childItems.length+this.focusedItemIndex+e)%this.childItems.length;let i=this.childItems[this.focusedItemIndex],n=this.childItems.length;for(;i!=null&&i.disabled&&n;)n-=1,this.focusedItemIndex=(this.childItems.length+this.focusedItemIndex+s)%this.childItems.length,i=this.childItems[this.focusedItemIndex];return i!=null&&i.disabled||this.forwardFocusVisibleToItem(i),i}prepareToCleanUp(){document.addEventListener(\"focusout\",()=>{requestAnimationFrame(()=>{const e=this.childItems[this.focusedItemIndex];e&&(e.focused=!1,this.updateSelectedItemIndex())})},{once:!0})}updateSelectedItemIndex(){let e=0;const s=new Map,t=[],i=[];let n=this.childItems.length;for(;n;){n-=1;const d=this.childItems[n];d.menuData.selectionRoot===this&&((d.selected||!this._hasUpdatedSelectedItemIndex&&this.selected.includes(d.value))&&(e=n,s.set(d,!0),t.unshift(d.value),i.unshift(d)),n!==e&&(d.focused=!1))}i.map((d,l)=>{l>0&&(d.focused=!1)}),this.selectedItemsMap=s,this._selected=t,this.selectedItems=i,this.value=this.selected.join(this.valueSeparator),this.focusedItemIndex=e,this.focusInItemIndex=e}handleItemsChanged(){this.cachedChildItems=void 0,this._willUpdateItems||(this._willUpdateItems=!0,this.cacheUpdated=this.updateCache())}async updateCache(){this.hasUpdated?await new Promise(e=>requestAnimationFrame(()=>e(!0))):await Promise.all([new Promise(e=>requestAnimationFrame(()=>e(!0))),this.updateComplete]),this.cachedChildItems===void 0&&(this.updateSelectedItemIndex(),this.updateItemFocus()),this._willUpdateItems=!1}updateItemFocus(){if(this.childItems.length==0)return;const e=this.childItems[this.focusInItemIndex];this.getRootNode().activeElement===e.menuData.focusRoot&&this.forwardFocusVisibleToItem(e)}closeDescendentOverlays(){this.descendentOverlays.forEach(e=>{e.open=!1}),this.descendentOverlays=new Map}forwardFocusVisibleToItem(e){if(!e||e.menuData.focusRoot!==this)return;this.closeDescendentOverlays();const s=this.hasVisibleFocusInTree()||!!this.childItems.find(t=>t.hasVisibleFocusInTree());e.focused=s,this.setAttribute(\"aria-activedescendant\",e.id),e.menuData.selectionRoot&&e.menuData.selectionRoot!==this&&e.menuData.selectionRoot.focus()}handleSlotchange({target:e}){const s=e.assignedElements({flatten:!0});this.childItems.length!==s.length&&s.forEach(t=>{typeof t.triggerUpdate!=\"undefined\"&&t.triggerUpdate()})}renderMenuItemSlot(){return v`\n            <slot\n                @sp-menu-submenu-opened=${this.handleDescendentOverlayOpened}\n                @sp-menu-submenu-closed=${this.handleDescendentOverlayClosed}\n                @slotchange=${this.handleSlotchange}\n            ></slot>\n        `}render(){return this.renderMenuItemSlot()}firstUpdated(e){super.firstUpdated(e),!this.hasAttribute(\"tabindex\")&&!this.ignore&&(this.getAttribute(\"role\")===\"group\"?this.tabIndex=-1:this.tabIndex=0);const s=[new Promise(t=>requestAnimationFrame(()=>t(!0)))];[...this.children].forEach(t=>{t.localName===\"sp-menu-item\"&&s.push(t.updateComplete)}),this.childItemsUpdated=Promise.all(s)}updated(e){super.updated(e),e.has(\"selects\")&&this.hasUpdated&&this.selectsChanged(),e.has(\"label\")&&(this.label||typeof e.get(\"label\")!=\"undefined\")&&(this.label?this.setAttribute(\"aria-label\",this.label):this.removeAttribute(\"aria-label\"))}selectsChanged(){const e=[new Promise(s=>requestAnimationFrame(()=>s(!0)))];this.childItemSet.forEach(s=>{e.push(s.triggerUpdate())}),this.childItemsUpdated=Promise.all(e)}connectedCallback(){super.connectedCallback(),!this.hasAttribute(\"role\")&&!this.ignore&&this.setAttribute(\"role\",this.ownRole),this.updateComplete.then(()=>this.updateItemFocus())}disconnectedCallback(){this.cachedChildItems=void 0,super.disconnectedCallback()}async getUpdateComplete(){const e=await super.getUpdateComplete();return await this.childItemsUpdated,await this.cacheUpdated,e}}a([c({type:String,reflect:!0})],Menu.prototype,\"label\",2),a([c({type:Boolean,reflect:!0})],Menu.prototype,\"ignore\",2),a([c({type:String,reflect:!0})],Menu.prototype,\"selects\",2),a([c({type:String})],Menu.prototype,\"value\",2),a([c({type:String,attribute:\"value-separator\"})],Menu.prototype,\"valueSeparator\",2),a([c({attribute:!1})],Menu.prototype,\"selected\",1),a([c({attribute:!1})],Menu.prototype,\"selectedItems\",2),a([y(\"slot:not([name])\")],Menu.prototype,\"menuSlot\",2);\n//# sourceMappingURL=Menu.js.map\n","\"use strict\";import{Menu as e}from\"./src/Menu.js\";import{defineElement as m}from\"@spectrum-web-components/base/src/define-element.js\";m(\"sp-menu\",e);\n//# sourceMappingURL=sp-menu.js.map\n"],"names":["css","f","Object","defineProperty","I","getOwnPropertyDescriptor","a","r","o","e","s","n","t","i","length","p","el","isOrContains","contains","Menu","SpectrumElement","noDefaultSize","constructor","super","this","label","ignore","value","valueSeparator","_selected","selectedItems","childItemSet","Set","focusedItemIndex","focusInItemIndex","selectedItemsMap","Map","descendentOverlays","handleSubmenuClosed","event","stopPropagation","composedPath","dispatchEvent","bubbles","composed","handleSubmenuOpened","Event","focusedItem","childItems","focused","openedItem","find","has","openedItemIndex","indexOf","_hasUpdatedSelectedItemIndex","_willUpdateItems","cacheUpdated","Promise","resolve","resolveCacheUpdated","addEventListener","onSelectableItemAddedOrUpdated","onFocusableItemAddedOrUpdated","capture","handleClick","handleFocusin","handleFocusout","styles","menuStyles","isSubmenu","slot","selected","clear","forEach","item","includes","push","set","requestUpdate","old","cachedChildItems","updateCachedMenuItems","menuSlot","assignedElements","flatten","slottedElement","entries","flattenedChildren","localName","querySelectorAll","slottedElements","splice","childRole","resolvedRole","resolvedSelects","ownRole","menuCascade","hadFocusRoot","menuData","focusRoot","ancestorWithSelects","currentAncestorWithSelects","selects","get","cascadeData","parentMenu","tabIndex","addChildItem","_a","ignoreMenu","_b","getAttribute","cleanupSteps","removeChildItem","selectionRoot","setRole","join","add","handleItemsChanged","async","delete","updateComplete","focus","preventScroll","every","childItem","disabled","some","focusMenuItemByOffset","selectedItem","scrollIntoView","block","target","defaultPrevented","index","href","preventDefault","hasSubmenu","open","selectOrToggleItem","prepareToCleanUp","elementIsOrContains","relatedTarget","getRootNode","activeElement","wasOrContainedRelatedTarget","offset","findIndex","Math","max","startListeningToKeyboard","handleKeydown","stopListeningToKeyboard","child","removeAttribute","removeEventListener","handleDescendentOverlayOpened","overlayElement","targetItem","oldSelectedItemsMap","oldSelected","slice","oldSelectedItems","oldValue","focusedChild","active","forwardFocusVisibleToItem","h","cancelable","oldItem","keys","code","lastFocusedItem","direction","itemToFocus","navigateBetweenRelatedMenus","shouldOpenSubmenu","isLTR","shouldCloseSelfAsSubmenu","openOverlay","updateSelectedItemIndex","parentElement","shiftKey","hasAttribute","replaceTabindex","document","navigateWithinMenu","click","step","availableItems","requestAnimationFrame","once","firstOrFirstSelectedIndex","itemIndex","unshift","map","updateCache","hasUpdated","res","all","updateItemFocus","focusInItem","closeDescendentOverlays","overlay","hasVisibleFocusInTree","setAttribute","id","handleSlotchange","assignedElement","triggerUpdate","renderMenuItemSlot","html","handleDescendentOverlayClosed","render","firstUpdated","changed","updates","children","childItemsUpdated","changes","updated","selectsChanged","connectedCallback","then","disconnectedCallback","getUpdateComplete","complete","__decorateClass","property","type","String","reflect","prototype","Boolean","attribute","query","defineElement"],"mappings":"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"}