{"version":3,"file":"fec37e09.js","sources":["../../../packages/menu/src/menu.css.js","../../../packages/menu/src/Menu.js","../../../packages/menu/sp-menu.js"],"sourcesContent":["\"use strict\";import{css as e}from\"@spectrum-web-components/base\";const t=e`\n:host{--spectrum-menu-item-min-height:var(--spectrum-component-height-100);--spectrum-menu-item-icon-height:var(--spectrum-workflow-icon-size-100);--spectrum-menu-item-icon-width:var(--spectrum-workflow-icon-size-100);--spectrum-menu-item-label-font-size:var(--spectrum-font-size-100);--spectrum-menu-item-label-text-to-visual:var(\n--spectrum-text-to-visual-100\n);--spectrum-menu-item-label-inline-edge-to-content:var(\n--spectrum-component-edge-to-text-100\n);--spectrum-menu-item-top-edge-to-text:var(\n--spectrum-component-top-to-text-100\n);--spectrum-menu-item-bottom-edge-to-text:var(\n--spectrum-component-bottom-to-text-100\n);--spectrum-menu-item-text-to-control:var(--spectrum-text-to-control-100);--spectrum-menu-item-description-font-size:var(--spectrum-font-size-75);--spectrum-menu-section-header-font-size:var(--spectrum-font-size-100);--spectrum-menu-section-header-min-width:var(\n--spectrum-component-height-100\n);--spectrum-menu-item-selectable-edge-to-text-not-selected:var(\n--spectrum-menu-item-selectable-edge-to-text-not-selected-medium\n);--spectrum-menu-item-checkmark-height:var(\n--spectrum-menu-item-checkmark-height-medium\n);--spectrum-menu-item-checkmark-width:var(\n--spectrum-menu-item-checkmark-width-medium\n);--spectrum-menu-item-top-to-checkmark:var(\n--spectrum-menu-item-top-to-selected-icon-medium\n);--spectrum-menu-item-top-to-action:var(--spectrum-spacing-50);--spectrum-menu-item-top-to-checkbox:var(--spectrum-spacing-50);--spectrum-menu-item-label-line-height:var(--spectrum-line-height-100);--spectrum-menu-item-label-line-height-cjk:var(\n--spectrum-cjk-line-height-100\n);--spectrum-menu-item-label-to-description-spacing:var(\n--spectrum-menu-item-label-to-description\n);--spectrum-menu-item-focus-indicator-width:var(\n--spectrum-border-width-200\n);--spectrum-menu-item-focus-indicator-color:var(--spectrum-blue-800);--spectrum-menu-item-label-to-value-area-min-spacing:var(\n--spectrum-spacing-100\n);--spectrum-menu-item-label-content-color-default:var(\n--spectrum-neutral-content-color-default\n);--spectrum-menu-item-label-content-color-hover:var(\n--spectrum-neutral-content-color-hover\n);--spectrum-menu-item-label-content-color-down:var(\n--spectrum-neutral-content-color-down\n);--spectrum-menu-item-label-content-color-focus:var(\n--spectrum-neutral-content-color-key-focus\n);--spectrum-menu-item-label-icon-color-default:var(\n--spectrum-neutral-content-color-default\n);--spectrum-menu-item-label-icon-color-hover:var(\n--spectrum-neutral-content-color-hover\n);--spectrum-menu-item-label-icon-color-down:var(\n--spectrum-neutral-content-color-down\n);--spectrum-menu-item-label-icon-color-focus:var(\n--spectrum-neutral-content-color-key-focus\n);--spectrum-menu-item-label-content-color-disabled:var(\n--spectrum-disabled-content-color\n);--spectrum-menu-item-label-icon-color-disabled:var(\n--spectrum-disabled-content-color\n);--spectrum-menu-item-description-line-height:var(\n--spectrum-line-height-100\n);--spectrum-menu-item-description-line-height-cjk:var(\n--spectrum-cjk-line-height-100\n);--spectrum-menu-item-description-color-default:var(\n--spectrum-neutral-subdued-content-color-default\n);--spectrum-menu-item-description-color-hover:var(\n--spectrum-neutral-subdued-content-color-hover\n);--spectrum-menu-item-description-color-down:var(\n--spectrum-neutral-subdued-content-color-down\n);--spectrum-menu-item-description-color-focus:var(\n--spectrum-neutral-subdued-content-color-key-focus\n);--spectrum-menu-item-description-color-disabled:var(\n--spectrum-disabled-content-color\n);--spectrum-menu-section-header-line-height:var(--spectrum-line-height-100);--spectrum-menu-section-header-line-height-cjk:var(\n--spectrum-cjk-line-height-100\n);--spectrum-menu-section-header-font-weight:var(\n--spectrum-bold-font-weight\n);--spectrum-menu-section-header-color:var(--spectrum-gray-900);--spectrum-menu-collapsible-icon-color:var(--spectrum-gray-900);--spectrum-menu-checkmark-icon-color-default:var(\n--spectrum-accent-color-900\n);--spectrum-menu-checkmark-icon-color-hover:var(\n--spectrum-accent-color-1000\n);--spectrum-menu-checkmark-icon-color-down:var(\n--spectrum-accent-color-1100\n);--spectrum-menu-checkmark-icon-color-focus:var(\n--spectrum-accent-color-1000\n);--spectrum-menu-drillin-icon-color-default:var(\n--spectrum-neutral-subdued-content-color-default\n);--spectrum-menu-drillin-icon-color-hover:var(\n--spectrum-neutral-subdued-content-color-hover\n);--spectrum-menu-drillin-icon-color-down:var(\n--spectrum-neutral-subdued-content-color-down\n);--spectrum-menu-drillin-icon-color-focus:var(\n--spectrum-neutral-subdued-content-color-key-focus\n);--spectrum-menu-item-value-color-default:var(\n--spectrum-neutral-subdued-content-color-default\n);--spectrum-menu-item-value-color-hover:var(\n--spectrum-neutral-subdued-content-color-hover\n);--spectrum-menu-item-value-color-down:var(\n--spectrum-neutral-subdued-content-color-down\n);--spectrum-menu-item-value-color-focus:var(\n--spectrum-neutral-subdued-content-color-key-focus\n);--spectrum-menu-checkmark-display-hidden:none;--spectrum-menu-checkmark-display-shown:block;--spectrum-menu-checkmark-display:var(\n--spectrum-menu-checkmark-display-shown\n);--spectrum-menu-back-icon-margin:var(\n--spectrum-navigational-indicator-top-to-back-icon-medium\n);--spectrum-menu-item-collapsible-has-icon-submenu-item-padding-x-start:calc(var(--spectrum-menu-item-label-inline-edge-to-content) + var(--spectrum-menu-item-checkmark-width) + var(--spectrum-menu-item-text-to-control) + var(--spectrum-menu-item-icon-width) + var(--spectrum-menu-item-label-text-to-visual) + var(--spectrum-menu-item-focus-indicator-width));--spectrum-menu-item-collapsible-no-icon-submenu-item-padding-x-start:calc(var(--spectrum-menu-item-label-inline-edge-to-content) + var(--spectrum-menu-item-checkmark-width) + var(--spectrum-menu-item-label-text-to-visual) + var(--spectrum-menu-item-focus-indicator-width))}:host([size=s]){--spectrum-menu-item-min-height:var(--spectrum-component-height-75);--spectrum-menu-item-icon-height:var(--spectrum-workflow-icon-size-75);--spectrum-menu-item-icon-width:var(--spectrum-workflow-icon-size-75);--spectrum-menu-item-label-font-size:var(--spectrum-font-size-75);--spectrum-menu-item-label-text-to-visual:var(\n--spectrum-text-to-visual-75\n);--spectrum-menu-item-label-inline-edge-to-content:var(\n--spectrum-component-edge-to-text-75\n);--spectrum-menu-item-top-edge-to-text:var(\n--spectrum-component-top-to-text-75\n);--spectrum-menu-item-bottom-edge-to-text:var(\n--spectrum-component-bottom-to-text-75\n);--spectrum-menu-item-text-to-control:var(--spectrum-text-to-control-75);--spectrum-menu-item-description-font-size:var(--spectrum-font-size-50);--spectrum-menu-section-header-font-size:var(--spectrum-font-size-75);--spectrum-menu-section-header-min-width:var(\n--spectrum-component-height-75\n);--spectrum-menu-item-selectable-edge-to-text-not-selected:var(\n--spectrum-menu-item-selectable-edge-to-text-not-selected-small\n);--spectrum-menu-item-checkmark-height:var(\n--spectrum-menu-item-checkmark-height-small\n);--spectrum-menu-item-checkmark-width:var(\n--spectrum-menu-item-checkmark-width-small\n);--spectrum-menu-item-top-to-checkmark:var(\n--spectrum-menu-item-top-to-selected-icon-small\n);--spectrum-menu-back-icon-margin:var(\n--spectrum-navigational-indicator-top-to-back-icon-small\n)}:host([size=l]){--spectrum-menu-item-min-height:var(--spectrum-component-height-200);--spectrum-menu-item-icon-height:var(--spectrum-workflow-icon-size-200);--spectrum-menu-item-icon-width:var(--spectrum-workflow-icon-size-200);--spectrum-menu-item-label-font-size:var(--spectrum-font-size-200);--spectrum-menu-item-label-text-to-visual:var(\n--spectrum-text-to-visual-200\n);--spectrum-menu-item-label-inline-edge-to-content:var(\n--spectrum-component-edge-to-text-200\n);--spectrum-menu-item-top-edge-to-text:var(\n--spectrum-component-top-to-text-200\n);--spectrum-menu-item-bottom-edge-to-text:var(\n--spectrum-component-bottom-to-text-200\n);--spectrum-menu-item-text-to-control:var(--spectrum-text-to-control-200);--spectrum-menu-item-description-font-size:var(--spectrum-font-size-100);--spectrum-menu-section-header-font-size:var(--spectrum-font-size-200);--spectrum-menu-section-header-min-width:var(\n--spectrum-component-height-200\n);--spectrum-menu-item-selectable-edge-to-text-not-selected:var(\n--spectrum-menu-item-selectable-edge-to-text-not-selected-large\n);--spectrum-menu-item-checkmark-height:var(\n--spectrum-menu-item-checkmark-height-large\n);--spectrum-menu-item-checkmark-width:var(\n--spectrum-menu-item-checkmark-width-large\n);--spectrum-menu-item-top-to-checkmark:var(\n--spectrum-menu-item-top-to-selected-icon-large\n);--spectrum-menu-back-icon-margin:var(\n--spectrum-navigational-indicator-top-to-back-icon-large\n)}:host([size=xl]){--spectrum-menu-item-min-height:var(--spectrum-component-height-300);--spectrum-menu-item-icon-height:var(--spectrum-workflow-icon-size-300);--spectrum-menu-item-icon-width:var(--spectrum-workflow-icon-size-300);--spectrum-menu-item-label-font-size:var(--spectrum-font-size-300);--spectrum-menu-item-label-text-to-visual:var(\n--spectrum-text-to-visual-300\n);--spectrum-menu-item-label-inline-edge-to-content:var(\n--spectrum-component-edge-to-text-300\n);--spectrum-menu-item-top-edge-to-text:var(\n--spectrum-component-top-to-text-300\n);--spectrum-menu-item-bottom-edge-to-text:var(\n--spectrum-component-bottom-to-text-300\n);--spectrum-menu-item-text-to-control:var(--spectrum-text-to-control-300);--spectrum-menu-item-description-font-size:var(--spectrum-font-size-200);--spectrum-menu-section-header-font-size:var(--spectrum-font-size-300);--spectrum-menu-section-header-min-width:var(\n--spectrum-component-height-300\n);--spectrum-menu-item-selectable-edge-to-text-not-selected:var(\n--spectrum-menu-item-selectable-edge-to-text-not-selected-extra-large\n);--spectrum-menu-item-checkmark-height:var(\n--spectrum-menu-item-checkmark-height-extra-large\n);--spectrum-menu-item-checkmark-width:var(\n--spectrum-menu-item-checkmark-width-extra-large\n);--spectrum-menu-item-top-to-checkmark:var(\n--spectrum-menu-item-top-to-selected-icon-extra-large\n);--spectrum-menu-back-icon-margin:var(\n--spectrum-navigational-indicator-top-to-back-icon-extra-large\n)}@media (forced-colors:active){:host{--highcontrast-menu-item-background-color-default:ButtonFace;--highcontrast-menu-item-color-default:ButtonText;--highcontrast-menu-item-background-color-focus:Highlight;--highcontrast-menu-item-color-focus:HighlightText;--highcontrast-menu-checkmark-icon-color-default:Highlight;--highcontrast-menu-item-color-disabled:GrayText;--highcontrast-menu-item-focus-indicator-color:Highlight;--highcontrast-menu-item-selected-background-color:Highlight;--highcontrast-menu-item-selected-color:HighlightText}@supports (color:SelectedItem){:host{--highcontrast-menu-item-selected-background-color:SelectedItem;--highcontrast-menu-item-selected-color:SelectedItemText}}}:host{box-sizing:border-box;display:inline-block;inline-size:var(--mod-menu-inline-size,auto);list-style-type:none;margin:0;overflow:auto;padding:0}:host:lang(ja),:host:lang(ko),:host:lang(zh){--spectrum-menu-item-label-line-height:var(\n--mod-menu-item-label-line-height-cjk,var(--spectrum-menu-item-label-line-height-cjk)\n);--spectrum-menu-item-description-line-height:var(\n--mod-menu-item-description-line-height-cjk,var(--spectrum-menu-item-description-line-height-cjk)\n);--spectrum-menu-section-header-line-height:var(\n--mod-menu-section-header-line-height-cjk,var(--spectrum-menu-section-header-line-height-cjk)\n)}:host([selects]) ::slotted(sp-menu-item){--spectrum-menu-checkmark-display:var(\n--spectrum-menu-checkmark-display-hidden\n);padding-inline-start:var(\n--mod-menu-item-selectable-edge-to-text-not-selected,var(--spectrum-menu-item-selectable-edge-to-text-not-selected)\n)}:host([selects]) ::slotted(sp-menu-item[selected]){--spectrum-menu-checkmark-display:var(\n--spectrum-menu-checkmark-display-shown\n);padding-inline-start:var(\n--mod-menu-item-label-inline-edge-to-content,var(--spectrum-menu-item-label-inline-edge-to-content)\n)}li:not(::slotted(sp-menu-item),.menu-divider){box-sizing:border-box;display:block;margin:0;padding:0;position:relative}.spectrum-Menu-back.focus-visible{box-shadow:inset calc(var(\n--mod-menu-item-focus-indicator-width,\nvar(--spectrum-menu-item-focus-indicator-width)\n)*var(--spectrum-menu-item-focus-indicator-direction-scalar, 1)) 0 0 0 var(\n--highcontrast-menu-item-focus-indicator-color,var(\n--mod-menu-item-focus-indicator-color,var(--spectrum-menu-item-focus-indicator-color)\n)\n)}.spectrum-Menu-back:focus-visible{box-shadow:inset calc(var(\n--mod-menu-item-focus-indicator-width,\nvar(--spectrum-menu-item-focus-indicator-width)\n)*var(--spectrum-menu-item-focus-indicator-direction-scalar, 1)) 0 0 0 var(\n--highcontrast-menu-item-focus-indicator-color,var(\n--mod-menu-item-focus-indicator-color,var(--spectrum-menu-item-focus-indicator-color)\n)\n)}.spectrum-Menu-sectionHeading{color:var(\n--highcontrast-menu-item-color-default,var(\n--mod-menu-section-header-color,var(--spectrum-menu-section-header-color)\n)\n);display:block;font-size:var(\n--mod-menu-section-header-font-size,var(--spectrum-menu-section-header-font-size)\n);font-weight:var(\n--mod-menu-section-header-font-weight,var(--spectrum-menu-section-header-font-weight)\n);grid-area:sectionHeadingArea/1/sectionHeadingArea/-1;line-height:var(\n--mod-menu-section-header-line-height,var(--spectrum-menu-section-header-line-height)\n);min-inline-size:var(\n--mod-menu-section-header-min-width,var(--spectrum-menu-section-header-min-width)\n);padding-block-end:var(\n--mod-menu-section-header-bottom-edge-to-text,var(\n--mod-menu-item-bottom-edge-to-text,var(--spectrum-menu-item-bottom-edge-to-text)\n)\n);padding-block-start:var(\n--mod-menu-section-header-top-edge-to-text,var(\n--mod-menu-item-top-edge-to-text,var(--spectrum-menu-item-top-edge-to-text)\n)\n);padding-inline:var(\n--mod-menu-item-label-inline-edge-to-content,var(--spectrum-menu-item-label-inline-edge-to-content)\n)}.spectrum-Menu-back{align-items:center;display:flex;flex-flow:wrap;padding-block:var(--mod-menu-back-padding-block-start,0) var(--mod-menu-back-padding-block-end,0);padding-inline:var(--mod-menu-back-padding-inline-start,0) var(\n--mod-menu-back-padding-inline-end,var(--spectrum-menu-item-label-inline-edge-to-content)\n)}.spectrum-Menu-back .spectrum-Menu-sectionHeading{padding:0}.spectrum-Menu-backButton{background:none;border:0;cursor:pointer;display:inline-flex;margin:0;padding:0}.spectrum-Menu-backButton.focus-visible{outline:var(--spectrum-focus-indicator-thickness) solid var(--spectrum-focus-indicator-color);outline-offset:calc((var(--spectrum-focus-indicator-thickness) + 1px)*-1)}.spectrum-Menu-backButton:focus-visible{outline:var(--spectrum-focus-indicator-thickness) solid var(--spectrum-focus-indicator-color);outline-offset:calc((var(--spectrum-focus-indicator-thickness) + 1px)*-1)}.spectrum-Menu-backHeading{color:var(\n--highcontrast-menu-item-color-default,var(\n--mod-menu-back-heading-color,var(--spectrum-menu-section-header-color)\n)\n);display:block;font-size:var(\n--mod-menu-section-header-font-size,var(--spectrum-menu-section-header-font-size)\n);font-weight:var(\n--mod-menu-section-header-font-weight,var(--spectrum-menu-section-header-font-weight)\n);line-height:var(\n--mod-menu-section-header-line-height,var(--spectrum-menu-section-header-line-height)\n)}.spectrum-Menu-backIcon{fill:var(\n--highcontrast-menu-item-color-default,var(--mod-menu-back-icon-color-default)\n);color:var(\n--highcontrast-menu-item-color-default,var(--mod-menu-back-icon-color-default)\n);margin-block:var(\n--mod-menu-back-icon-margin-block,var(--spectrum-menu-back-icon-margin)\n);margin-inline:var(\n--mod-menu-back-icon-margin-inline,var(--spectrum-menu-back-icon-margin)\n)}:host{display:inline-flex;flex-direction:column;width:var(--swc-menu-width)}:host(:focus){outline:none}::slotted(*){flex-shrink:0}\n`;export default t;\n//# sourceMappingURL=menu.css.js.map\n","\"use strict\";var p=Object.defineProperty;var f=Object.getOwnPropertyDescriptor;var l=(c,o,e,s)=>{for(var t=s>1?void 0:s?f(o,e):o,i=c.length-1,n;i>=0;i--)(n=c[i])&&(t=(s?n(o,e,t):n(t))||t);return s&&t&&p(o,e,t),t};import{html as I,SizedMixin as v,SpectrumElement as b}from\"@spectrum-web-components/base\";import{property as a,query as g}from\"@spectrum-web-components/base/src/decorators.js\";import y from\"./menu.css.js\";function S(c,o){return!!o&&(c===o||c.contains(o))}export class Menu extends v(b,{noDefaultSize:!0}){constructor(){super();this.label=\"\";this.ignore=!1;this.value=\"\";this.valueSeparator=\",\";this._selected=[];this.selectedItems=[];this.childItemSet=new Set;this.focusedItemIndex=0;this.focusInItemIndex=0;this.selectedItemsMap=new Map;this.willSynthesizeClick=0;this.descendentOverlays=new Map;this.handleSubmenuClosed=e=>{e.stopPropagation(),e.composedPath()[0].dispatchEvent(new Event(\"sp-menu-submenu-closed\",{bubbles:!0,composed:!0}))};this.handleSubmenuOpened=e=>{e.stopPropagation(),e.composedPath()[0].dispatchEvent(new Event(\"sp-menu-submenu-opened\",{bubbles:!0,composed:!0}));const t=this.childItems[this.focusedItemIndex];t&&(t.focused=!1);const i=e.composedPath().find(d=>this.childItemSet.has(d));if(!i)return;const n=this.childItems.indexOf(i);this.focusedItemIndex=n,this.focusInItemIndex=n};this._hasUpdatedSelectedItemIndex=!1;this._willUpdateItems=!1;this.cacheUpdated=Promise.resolve();this.resolveCacheUpdated=()=>{};this.addEventListener(\"sp-menu-item-added-or-updated\",this.onSelectableItemAddedOrUpdated),this.addEventListener(\"sp-menu-item-added-or-updated\",this.onFocusableItemAddedOrUpdated,{capture:!0}),this.addEventListener(\"click\",this.handleClick),this.addEventListener(\"pointerup\",this.handlePointerup),this.addEventListener(\"focusin\",this.handleFocusin),this.addEventListener(\"blur\",this.handleBlur),this.addEventListener(\"sp-opened\",this.handleSubmenuOpened),this.addEventListener(\"sp-closed\",this.handleSubmenuClosed)}static get styles(){return[y]}get isSubmenu(){return this.slot===\"submenu\"}get selected(){return this._selected}set selected(e){if(e===this.selected)return;const s=this.selected;this._selected=e,this.selectedItems=[],this.selectedItemsMap.clear(),this.childItems.forEach(t=>{t.selected=this.selected.includes(t.value),t.selected&&(this.selectedItems.push(t),this.selectedItemsMap.set(t,!0))}),this.requestUpdate(\"selected\",s)}get childItems(){return this.cachedChildItems||(this.cachedChildItems=this.updateCachedMenuItems()),this.cachedChildItems}updateCachedMenuItems(){if(this.cachedChildItems=[],!this.menuSlot)return[];const e=this.menuSlot.assignedElements({flatten:!0});for(const[s,t]of e.entries()){if(this.childItemSet.has(t)){this.cachedChildItems.push(t);continue}const n=t.localName===\"slot\"?t.assignedElements({flatten:!0}):[...t.querySelectorAll(\":scope > *\")];e.splice(s,1,t,...n)}return this.cachedChildItems}get childRole(){if(this.resolvedRole===\"listbox\")return\"option\";switch(this.resolvedSelects){case\"single\":return\"menuitemradio\";case\"multiple\":return\"menuitemcheckbox\";default:return\"menuitem\"}}get ownRole(){return\"menu\"}onFocusableItemAddedOrUpdated(e){e.menuCascade.set(this,{hadFocusRoot:!!e.item.menuData.focusRoot,ancestorWithSelects:e.currentAncestorWithSelects}),this.selects&&(e.currentAncestorWithSelects=this),e.item.menuData.focusRoot=e.item.menuData.focusRoot||this}onSelectableItemAddedOrUpdated(e){var i,n;const s=e.menuCascade.get(this);if(!s)return;if(e.item.menuData.parentMenu=e.item.menuData.parentMenu||this,s.hadFocusRoot&&!this.ignore&&(this.tabIndex=-1),this.addChildItem(e.item),this.selects===\"inherit\"){this.resolvedSelects=\"inherit\";const d=(i=e.currentAncestorWithSelects)==null?void 0:i.ignore;this.resolvedRole=d?\"none\":((n=e.currentAncestorWithSelects)==null?void 0:n.getAttribute(\"role\"))||this.getAttribute(\"role\")||void 0}else this.selects?(this.resolvedRole=this.ignore?\"none\":this.getAttribute(\"role\")||void 0,this.resolvedSelects=this.selects):(this.resolvedRole=this.ignore?\"none\":this.getAttribute(\"role\")||void 0,this.resolvedSelects=this.resolvedRole===\"none\"?\"ignore\":\"none\");const t=this.resolvedSelects===\"single\"||this.resolvedSelects===\"multiple\";e.item.menuData.cleanupSteps.push(d=>this.removeChildItem(d)),(t||!this.selects&&this.resolvedSelects!==\"ignore\")&&!e.item.menuData.selectionRoot&&(e.item.setRole(this.childRole),e.item.menuData.selectionRoot=e.item.menuData.selectionRoot||this,e.item.selected&&(this.selectedItemsMap.set(e.item,!0),this.selectedItems=[...this.selectedItems,e.item],this._selected=[...this.selected,e.item.value],this.value=this.selected.join(this.valueSeparator)))}addChildItem(e){this.childItemSet.add(e),this.handleItemsChanged()}async removeChildItem(e){this.childItemSet.delete(e),this.cachedChildItems=void 0,e.focused&&(this.handleItemsChanged(),await this.updateComplete,this.focus())}focus({preventScroll:e}={}){if(!this.childItems.length||this.childItems.every(t=>t.disabled))return;if(this.childItems.some(t=>t.menuData.focusRoot!==this)){super.focus({preventScroll:e});return}this.focusMenuItemByOffset(0),super.focus({preventScroll:e});const s=this.selectedItems[0];s&&!e&&s.scrollIntoView({block:\"nearest\"})}handleClick(e){if(this.willSynthesizeClick){cancelAnimationFrame(this.willSynthesizeClick);return}this.handlePointerBasedSelection(e)}handlePointerup(e){this.willSynthesizeClick=requestAnimationFrame(()=>{var s;(s=e.target)==null||s.dispatchEvent(new Event(\"click\"))}),this.handlePointerBasedSelection(e)}handlePointerBasedSelection(e){const t=e.composedPath().find(i=>i instanceof Element?i.getAttribute(\"role\")===this.childRole:!1);if(e.defaultPrevented){const i=this.childItems.indexOf(t);(t==null?void 0:t.menuData.focusRoot)===this&&i>-1&&(this.focusedItemIndex=i);return}if(t!=null&&t.href&&t.href.length){this.dispatchEvent(new Event(\"change\",{bubbles:!0,composed:!0}));return}else if((t==null?void 0:t.menuData.selectionRoot)===this&&this.childItems.length){if(e.preventDefault(),t.hasSubmenu||t.open)return;this.selectOrToggleItem(t)}else return;this.prepareToCleanUp()}handleFocusin(e){var i;if(this.childItems.some(n=>n.menuData.focusRoot!==this))return;const s=this.getRootNode().activeElement,t=((i=this.childItems[this.focusedItemIndex])==null?void 0:i.menuData.selectionRoot)||this;if((s!==t||e.target!==this)&&(t.focus({preventScroll:!0}),s&&this.focusedItemIndex===0)){const n=this.childItems.findIndex(d=>d===s);this.focusMenuItemByOffset(Math.max(n,0))}this.startListeningToKeyboard()}startListeningToKeyboard(){this.addEventListener(\"keydown\",this.handleKeydown)}handleBlur(e){S(this,e.relatedTarget)||(this.stopListeningToKeyboard(),this.childItems.forEach(s=>s.focused=!1),this.removeAttribute(\"aria-activedescendant\"))}stopListeningToKeyboard(){this.removeEventListener(\"keydown\",this.handleKeydown)}handleDescendentOverlayOpened(e){const s=e.composedPath()[0];s.overlayElement&&this.descendentOverlays.set(s.overlayElement,s.overlayElement)}handleDescendentOverlayClosed(e){const s=e.composedPath()[0];s.overlayElement&&this.descendentOverlays.delete(s.overlayElement)}async selectOrToggleItem(e){const s=this.resolvedSelects,t=new Map(this.selectedItemsMap),i=this.selected.slice(),n=this.selectedItems.slice(),d=this.value,r=this.childItems[this.focusedItemIndex];if(r&&(r.focused=!1,r.active=!1),this.focusedItemIndex=this.childItems.indexOf(e),this.forwardFocusVisibleToItem(e),s===\"multiple\"){this.selectedItemsMap.has(e)?this.selectedItemsMap.delete(e):this.selectedItemsMap.set(e,!0);const h=[],m=[];this.childItemSet.forEach(u=>{u.menuData.selectionRoot===this&&this.selectedItemsMap.has(u)&&(h.push(u.value),m.push(u))}),this._selected=h,this.selectedItems=m,this.value=this.selected.join(this.valueSeparator)}else this.selectedItemsMap.clear(),this.selectedItemsMap.set(e,!0),this.value=e.value,this._selected=[e.value],this.selectedItems=[e];if(!this.dispatchEvent(new Event(\"change\",{cancelable:!0,bubbles:!0,composed:!0}))){this._selected=i,this.selectedItems=n,this.selectedItemsMap=t,this.value=d;return}if(s===\"single\"){for(const h of t.keys())h!==e&&(h.selected=!1);e.selected=!0}else s===\"multiple\"&&(e.selected=!e.selected)}navigateWithinMenu(e){const{code:s}=e,t=this.childItems[this.focusedItemIndex],i=s===\"ArrowDown\"?1:-1,n=this.focusMenuItemByOffset(i);n!==t&&(e.preventDefault(),e.stopPropagation(),n.scrollIntoView({block:\"nearest\"}))}navigateBetweenRelatedMenus(e){const{code:s}=e,t=this.isLTR&&s===\"ArrowRight\"||!this.isLTR&&s===\"ArrowLeft\",i=this.isLTR&&s===\"ArrowLeft\"||!this.isLTR&&s===\"ArrowRight\";if(t){e.stopPropagation();const n=this.childItems[this.focusedItemIndex];n!=null&&n.hasSubmenu&&n.openOverlay()}else i&&this.isSubmenu&&(e.stopPropagation(),this.dispatchEvent(new Event(\"close\",{bubbles:!0})),this.updateSelectedItemIndex())}handleKeydown(e){if(e.defaultPrevented)return;const s=this.childItems[this.focusedItemIndex];s&&(s.focused=!0);const{code:t}=e;if(e.shiftKey&&e.target!==this&&this.hasAttribute(\"tabindex\")){this.removeAttribute(\"tabindex\");const i=n=>{!n.shiftKey&&!this.hasAttribute(\"tabindex\")&&(this.tabIndex=0,document.removeEventListener(\"keyup\",i),this.removeEventListener(\"focusout\",i))};document.addEventListener(\"keyup\",i),this.addEventListener(\"focusout\",i)}if(t===\"Tab\"){this.prepareToCleanUp();return}if(t===\"Space\"&&s!=null&&s.hasSubmenu){s.openOverlay();return}if(t===\"Space\"||t===\"Enter\"){const i=this.childItems[this.focusedItemIndex];i&&i.menuData.selectionRoot===e.target&&(e.preventDefault(),i.click());return}if(t===\"ArrowDown\"||t===\"ArrowUp\"){const i=this.childItems[this.focusedItemIndex];i&&i.menuData.selectionRoot===e.target&&this.navigateWithinMenu(e);return}this.navigateBetweenRelatedMenus(e)}focusMenuItemByOffset(e){const s=e||1,t=this.childItems[this.focusedItemIndex];t&&(t.focused=!1,t.active=t.open),this.focusedItemIndex=(this.childItems.length+this.focusedItemIndex+e)%this.childItems.length;let i=this.childItems[this.focusedItemIndex],n=this.childItems.length;for(;i!=null&&i.disabled&&n;)n-=1,this.focusedItemIndex=(this.childItems.length+this.focusedItemIndex+s)%this.childItems.length,i=this.childItems[this.focusedItemIndex];return i!=null&&i.disabled||this.forwardFocusVisibleToItem(i),i}prepareToCleanUp(){document.addEventListener(\"focusout\",()=>{requestAnimationFrame(()=>{const e=this.childItems[this.focusedItemIndex];e&&(e.focused=!1,this.updateSelectedItemIndex())})},{once:!0})}updateSelectedItemIndex(){let e=0;const s=new Map,t=[],i=[];let n=this.childItems.length;for(;n;){n-=1;const d=this.childItems[n];d.menuData.selectionRoot===this&&((d.selected||!this._hasUpdatedSelectedItemIndex&&this.selected.includes(d.value))&&(e=n,s.set(d,!0),t.unshift(d.value),i.unshift(d)),n!==e&&(d.focused=!1))}i.map((d,r)=>{r>0&&(d.focused=!1)}),this.selectedItemsMap=s,this._selected=t,this.selectedItems=i,this.value=this.selected.join(this.valueSeparator),this.focusedItemIndex=e,this.focusInItemIndex=e}handleItemsChanged(){this.cachedChildItems=void 0,this._willUpdateItems||(this._willUpdateItems=!0,this.cacheUpdated=this.updateCache())}async updateCache(){this.hasUpdated?await new Promise(e=>requestAnimationFrame(()=>e(!0))):await Promise.all([new Promise(e=>requestAnimationFrame(()=>e(!0))),this.updateComplete]),this.cachedChildItems===void 0&&(this.updateSelectedItemIndex(),this.updateItemFocus()),this._willUpdateItems=!1}updateItemFocus(){if(this.childItems.length==0)return;const e=this.childItems[this.focusInItemIndex];this.getRootNode().activeElement===e.menuData.focusRoot&&this.forwardFocusVisibleToItem(e)}closeDescendentOverlays(){this.descendentOverlays.forEach(e=>{e.open=!1}),this.descendentOverlays=new Map}forwardFocusVisibleToItem(e){if(!e||e.menuData.focusRoot!==this)return;this.closeDescendentOverlays();const s=this.hasVisibleFocusInTree()||!!this.childItems.find(t=>t.hasVisibleFocusInTree());e.focused=s,this.setAttribute(\"aria-activedescendant\",e.id),e.menuData.selectionRoot&&e.menuData.selectionRoot!==this&&e.menuData.selectionRoot.focus()}handleSlotchange({target:e}){const s=e.assignedElements({flatten:!0});this.childItems.length!==s.length&&s.forEach(t=>{typeof t.triggerUpdate!=\"undefined\"&&t.triggerUpdate()})}renderMenuItemSlot(){return I`\n            <slot\n                @sp-menu-submenu-opened=${this.handleDescendentOverlayOpened}\n                @sp-menu-submenu-closed=${this.handleDescendentOverlayClosed}\n                @slotchange=${this.handleSlotchange}\n            ></slot>\n        `}render(){return this.renderMenuItemSlot()}firstUpdated(e){super.firstUpdated(e),!this.hasAttribute(\"tabindex\")&&!this.ignore&&(this.getAttribute(\"role\")===\"group\"?this.tabIndex=-1:this.tabIndex=0);const s=[new Promise(t=>requestAnimationFrame(()=>t(!0)))];[...this.children].forEach(t=>{t.localName===\"sp-menu-item\"&&s.push(t.updateComplete)}),this.childItemsUpdated=Promise.all(s)}updated(e){super.updated(e),e.has(\"selects\")&&this.hasUpdated&&this.selectsChanged(),e.has(\"label\")&&(this.label||typeof e.get(\"label\")!=\"undefined\")&&(this.label?this.setAttribute(\"aria-label\",this.label):this.removeAttribute(\"aria-label\"))}selectsChanged(){const e=[new Promise(s=>requestAnimationFrame(()=>s(!0)))];this.childItemSet.forEach(s=>{e.push(s.triggerUpdate())}),this.childItemsUpdated=Promise.all(e)}connectedCallback(){super.connectedCallback(),!this.hasAttribute(\"role\")&&!this.ignore&&this.setAttribute(\"role\",this.ownRole),this.updateComplete.then(()=>this.updateItemFocus())}disconnectedCallback(){this.cachedChildItems=void 0,super.disconnectedCallback()}async getUpdateComplete(){const e=await super.getUpdateComplete();return await this.childItemsUpdated,await this.cacheUpdated,e}}l([a({type:String,reflect:!0})],Menu.prototype,\"label\",2),l([a({type:Boolean,reflect:!0})],Menu.prototype,\"ignore\",2),l([a({type:String,reflect:!0})],Menu.prototype,\"selects\",2),l([a({type:String})],Menu.prototype,\"value\",2),l([a({type:String,attribute:\"value-separator\"})],Menu.prototype,\"valueSeparator\",2),l([a({attribute:!1})],Menu.prototype,\"selected\",1),l([a({attribute:!1})],Menu.prototype,\"selectedItems\",2),l([g(\"slot:not([name])\")],Menu.prototype,\"menuSlot\",2);\n//# sourceMappingURL=Menu.js.map\n","\"use strict\";import{Menu as e}from\"./src/Menu.js\";import{defineElement as m}from\"@spectrum-web-components/base/src/define-element.js\";m(\"sp-menu\",e);\n//# sourceMappingURL=sp-menu.js.map\n"],"names":["css","p","Object","defineProperty","f","getOwnPropertyDescriptor","l","c","o","e","s","n","t","i","length","Menu","SpectrumElement","noDefaultSize","constructor","super","this","label","ignore","value","valueSeparator","_selected","selectedItems","childItemSet","focusedItemIndex","focusInItemIndex","selectedItemsMap","Map","willSynthesizeClick","descendentOverlays","handleSubmenuClosed","event","stopPropagation","composedPath","dispatchEvent","Event","bubbles","composed","handleSubmenuOpened","focusedItem","childItems","focused","find","el","has","openedItem","indexOf","openedItemIndex","_hasUpdatedSelectedItemIndex","_willUpdateItems","cacheUpdated","Promise","resolve","resolveCacheUpdated","addEventListener","onSelectableItemAddedOrUpdated","onFocusableItemAddedOrUpdated","capture","handleClick","handlePointerup","handleFocusin","handleBlur","styles","menuStyles","isSubmenu","slot","selected","clear","forEach","item","includes","push","set","requestUpdate","old","cachedChildItems","updateCachedMenuItems","menuSlot","assignedElements","flatten","slottedElement","slottedElements","entries","localName","querySelectorAll","splice","flattenedChildren","childRole","resolvedRole","resolvedSelects","ownRole","menuCascade","hadFocusRoot","menuData","focusRoot","ancestorWithSelects","currentAncestorWithSelects","selects","cascadeData","get","parentMenu","tabIndex","addChildItem","_a","ignoreMenu","_b","getAttribute","cleanupSteps","removeChildItem","selectionRoot","setRole","join","add","handleItemsChanged","async","delete","updateComplete","focus","preventScroll","every","childItem","disabled","some","focusMenuItemByOffset","selectedItem","scrollIntoView","block","cancelAnimationFrame","handlePointerBasedSelection","requestAnimationFrame","target","defaultPrevented","index","href","preventDefault","hasSubmenu","open","selectOrToggleItem","prepareToCleanUp","getRootNode","activeElement","offset","findIndex","Math","max","startListeningToKeyboard","handleKeydown","isOrContains","relatedTarget","contains","stopListeningToKeyboard","child","removeAttribute","removeEventListener","overlayElement","targetItem","oldSelectedItemsMap","oldSelected","slice","oldSelectedItems","oldValue","focusedChild","active","forwardFocusVisibleToItem","h","cancelable","keys","oldItem","code","lastFocusedItem","direction","itemToFocus","shouldOpenSubmenu","isLTR","shouldCloseSelfAsSubmenu","openOverlay","updateSelectedItemIndex","shiftKey","hasAttribute","document","replaceTabindex","navigateBetweenRelatedMenus","navigateWithinMenu","click","availableItems","step","once","itemIndex","firstOrFirstSelectedIndex","unshift","map","updateCache","hasUpdated","res","all","updateItemFocus","focusInItem","closeDescendentOverlays","overlay","hasVisibleFocusInTree","setAttribute","id","handleSlotchange","assignedElement","triggerUpdate","renderMenuItemSlot","html","handleDescendentOverlayOpened","handleDescendentOverlayClosed","render","firstUpdated","changed","updates","children","childItemsUpdated","changes","updated","selectsChanged","connectedCallback","then","disconnectedCallback","getUpdateComplete","complete","__decorateClass","property","type","String","reflect","prototype","Boolean","attribute","query","defineElement"],"mappings":"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"}