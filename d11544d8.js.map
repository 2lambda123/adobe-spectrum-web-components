{"version":3,"file":"d11544d8.js","sources":["../../../tools/reactive-controllers/src/ElementResolution.js"],"sourcesContent":["\"use strict\";export const elementResolverUpdatedSymbol=Symbol(\"element resolver updated\");export class ElementResolutionController{constructor(e,{selector:t}={selector:\"\"}){this._element=null;this._selector=\"\";this.mutationCallback=e=>{let t=!1;e.forEach(s=>{if(!t){if(s.type===\"childList\"){const r=this.element&&[...s.removedNodes].includes(this.element),l=!!this.selector&&[...s.addedNodes].some(this.elementIsSelected);t=t||r||l}if(s.type===\"attributes\"){const r=s.target===this.element,l=!!this.selector&&this.elementIsSelected(s.target);t=t||r||l}}}),t&&this.resolveElement()};this.elementIsSelected=e=>{var t;return this.selectorIsId?(e==null?void 0:e.id)===this.selectorAsId:(t=e==null?void 0:e.matches)==null?void 0:t.call(e,this.selector)};this.host=e,this.selector=t,this.observer=new MutationObserver(this.mutationCallback),this.host.addController(this)}get element(){return this._element}set element(e){if(e===this.element)return;const t=this.element;this._element=e,this.host.requestUpdate(elementResolverUpdatedSymbol,t)}get selector(){return this._selector}set selector(e){e!==this.selector&&(this.releaseElement(),this._selector=e,this.resolveElement())}get selectorAsId(){return this.selector.slice(1)}get selectorIsId(){return!!this.selector&&this.selector.startsWith(\"#\")}hostConnected(){this.resolveElement(),this.observer.observe(this.host.getRootNode(),{subtree:!0,childList:!0,attributes:!0})}hostDisconnected(){this.releaseElement(),this.observer.disconnect()}resolveElement(){if(!this.selector){this.releaseElement();return}const e=this.host.getRootNode();this.element=this.selectorIsId?e.getElementById(this.selectorAsId):e.querySelector(this.selector)}releaseElement(){this.element=null}}\n//# sourceMappingURL=ElementResolution.js.map\n"],"names":["elementResolverUpdatedSymbol","Symbol","constructor","host","selector","this","_element","_selector","mutationCallback","mutationList","forEach","mutation","type","r","element","removedNodes","includes","matchingElementAdded","addedNodes","some","elementIsSelected","needsResolution","currentElementRemoved","attributeChangedOnCurrentElement","target","attributeChangedOnMatchingElement","resolveElement","el","t","selectorIsId","id","selectorAsId","_a","matches","call","e","observer","MutationObserver","addController","requestUpdate","previous","releaseElement","slice","startsWith","hostConnected","observe","getRootNode","subtree","childList","attributes","disconnect","parent","getElementById","querySelector"],"mappings":"AAaaA,QAA+BC,OAAO,4BAE5C,QAyCHC,YACIC,GACEC,YAAmC,CAAEA,SAAU,KA7BrDC,KAAQC,SAA+B,KAiBvCD,KAAQE,UAAY,GAsBpBF,KAAUG,iBAAsCC,IAC5C,OAAsB,EACtBA,EAAaC,SAASC,IAClB,MACA,CAAA,GAAsB,cAAlBA,EAASC,KAAsB,CAC/B,MACIC,EAAAR,KAAKS,SACL,IAAIH,EAASI,cAAcC,SAASX,KAAKS,SACvCG,IACAZ,KAAKD,UACN,IAAIO,EAASO,YAA8BC,KACxCd,KAAKe,mBAEbC,EACIA,GACAC,GACAL,CAER,IAAsB,eAAlBN,EAASC,KAAuB,CAChC,MAAMW,EACFZ,EAASa,SAAWnB,KAAKS,QACvBW,IACApB,KAAKD,UACPC,KAAKe,kBAAkBT,EAASa,QACpCH,EACIA,GACAE,GACAE,CACR,CACJ,KACIJ,GACAhB,KAAKqB,gBA7BTjB,EA+DJJ,KAAQe,kBAAqBO,IArIjC,IAAAC,EAsIQ,OAAYC,KAAAA,cACNF,MAAAA,OAAAA,EAAAA,EAAIG,MAAOzB,KAAK0B,aAChB,OAAAC,mBAAIC,cAAJ,EAAAD,EAAcE,KAAAC,EAAA9B,KAAKD,SAFzB,EA1EAC,KAAKF,KAAOA,EACZE,KAAKD,SAAWA,EAChBC,KAAK+B,SAAW,IAAAC,iBAAqBhC,KAAKG,kBAG1CH,KAAKF,KAAKmC,cAAcjC,KAjD5B,CAAkCS,cAC9B,OAAYR,KAAAA,QAGhB,CAAIQ,YAAQA,GACR,GAAIA,IAAYT,KAAKS,QAAS,OAC9B,MAAiBc,EAAAvB,KAAKS,QACtBT,KAAKC,SAAWQ,EAGhBT,KAAKF,KAAKoC,cAAcvC,EAA8BwC,EAS1D,gBACI,YAAYjC,SAGhB,CAAaH,aAAAA,GACLA,IAAaC,KAAKD,WACtBC,KAAKoC,iBACLpC,KAAKE,UAAYH,EACjBC,KAAKqB,iBAKT,CAA2BK,mBACvB,OAAY3B,KAAAA,SAASsC,MAAM,EAG/B,CAA4Bb,mBACxB,QAASxB,KAAKD,UAAYC,KAAKD,SAASuC,WAAW,IAkDhD,CAAAC,gBACHvC,KAAKqB,iBACLrB,KAAK+B,SAASS,QAAQxC,KAAKF,KAAK2C,cAAe,CAC3CC,SAAS,EACTC,WAAW,EACXC,YAAY,GAIb,oBACH5C,KAAKoC,iBACLpC,KAAK+B,SAASc,YAGV,CAAAxB,iBACJ,IAAKrB,KAAKD,SAEN,YADAC,KAAKoC,iBAIT,QAAepC,KAAKF,KAAK2C,cACzBzC,KAAKS,QAAUT,KAAKwB,aACbsB,EAAOC,eAAe/C,KAAK0B,cAC3BoB,EAAOE,cAAchD,KAAKD,SAG7B,kBACJC,KAAKS,QAAU,IAQvB"}