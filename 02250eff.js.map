{"version":3,"file":"02250eff.js","sources":["../../../tools/shared/src/reparent-children.js","../../../tools/shared/src/first-focusable-in.js","../../../tools/reactive-controllers/src/FocusGroup.js","../../../tools/reactive-controllers/src/RovingTabindex.js"],"sourcesContent":["\"use strict\";function T(o,i,l=[]){for(let e=0;e<i.length;++e){const n=i[e],r=o[e],t=r.parentElement||r.getRootNode();l[e]&&l[e](n),t&&t!==r&&t.replaceChild(n,r),delete o[e]}return i}export const reparentChildren=(o,i,{position:l,prepareCallback:e}={position:\"beforeend\"})=>{let{length:n}=o;if(n===0)return()=>o;let r=1,t=0;(l===\"afterbegin\"||l===\"afterend\")&&(r=-1,t=n-1);const a=new Array(n),c=new Array(n),p=document.createComment(\"placeholder for reparented element\");do{const d=o[t];e&&(c[t]=e(d)),a[t]=p.cloneNode();const m=d.parentElement||d.getRootNode();m&&m!==d&&m.replaceChild(a[t],d),i.insertAdjacentElement(l,d),t+=r}while(--n>0);return function(){return T(a,o,c)}};\n//# sourceMappingURL=reparent-children.js.map\n","\"use strict\";const e='button:not([tabindex=\"-1\"]), [href]:not([tabindex=\"-1\"]), input:not([tabindex=\"-1\"]), select:not([tabindex=\"-1\"]), textarea:not([tabindex=\"-1\"]), [tabindex]:not([tabindex=\"-1\"]), [focusable]:not([tabindex=\"-1\"])';export const firstFocusableIn=t=>t.querySelector(e);\n//# sourceMappingURL=first-focusable-in.js.map\n","\"use strict\";function r(i,e,t){return typeof i===e?()=>i:typeof i==\"function\"?i:t}export class FocusGroupController{constructor(e,{direction:t,elementEnterAction:n,elements:s,focusInIndex:o,isFocusableElement:h,listenerScope:c}={elements:()=>[]}){this._currentIndex=-1;this._direction=()=>\"both\";this.directionLength=5;this.elementEnterAction=e=>{};this._focused=!1;this._focusInIndex=e=>0;this.isFocusableElement=e=>!0;this._listenerScope=()=>this.host;this.offset=0;this.handleFocusin=e=>{if(!this.isEventWithinListenerScope(e))return;this.isRelatedTargetAnElement(e)&&this.hostContainsFocus();const t=e.composedPath();let n=-1;t.find(s=>(n=this.elements.indexOf(s),n!==-1)),this.currentIndex=n>-1?n:this.currentIndex};this.handleFocusout=e=>{this.isRelatedTargetAnElement(e)&&this.hostNoLongerContainsFocus()};this.handleKeydown=e=>{if(!this.acceptsEventCode(e.code)||e.defaultPrevented)return;let t=0;switch(e.code){case\"ArrowRight\":t+=1;break;case\"ArrowDown\":t+=this.direction===\"grid\"?this.directionLength:1;break;case\"ArrowLeft\":t-=1;break;case\"ArrowUp\":t-=this.direction===\"grid\"?this.directionLength:1;break;case\"End\":this.currentIndex=0,t-=1;break;case\"Home\":this.currentIndex=this.elements.length-1,t+=1;break}e.preventDefault(),this.direction===\"grid\"&&this.currentIndex+t<0?this.currentIndex=0:this.direction===\"grid\"&&this.currentIndex+t>this.elements.length-1?this.currentIndex=this.elements.length-1:this.setCurrentIndexCircularly(t),this.elementEnterAction(this.elements[this.currentIndex]),this.focus()};this.host=e,this.host.addController(this),this._elements=s,this.isFocusableElement=h||this.isFocusableElement,this._direction=r(t,\"string\",this._direction),this.elementEnterAction=n||this.elementEnterAction,this._focusInIndex=r(o,\"number\",this._focusInIndex),this._listenerScope=r(c,\"object\",this._listenerScope)}get currentIndex(){return this._currentIndex===-1&&(this._currentIndex=this.focusInIndex),this._currentIndex-this.offset}set currentIndex(e){this._currentIndex=e+this.offset}get direction(){return this._direction()}get elements(){return this.cachedElements||(this.cachedElements=this._elements()),this.cachedElements}set focused(e){e!==this.focused&&(this._focused=e)}get focused(){return this._focused}get focusInElement(){return this.elements[this.focusInIndex]}get focusInIndex(){return this._focusInIndex(this.elements)}isEventWithinListenerScope(e){return this._listenerScope()===this.host?!0:e.composedPath().includes(this._listenerScope())}update({elements:e}={elements:()=>[]}){this.unmanage(),this._elements=e,this.clearElementCache(),this.manage()}focus(e){let t=this.elements[this.currentIndex];(!t||!this.isFocusableElement(t))&&(this.setCurrentIndexCircularly(1),t=this.elements[this.currentIndex]),t&&this.isFocusableElement(t)&&t.focus(e)}clearElementCache(e=0){delete this.cachedElements,this.offset=e}setCurrentIndexCircularly(e){const{length:t}=this.elements;let n=t,s=(t+this.currentIndex+e)%t;for(;n&&this.elements[s]&&!this.isFocusableElement(this.elements[s]);)s=(t+s+e)%t,n-=1;this.currentIndex=s}hostContainsFocus(){this.host.addEventListener(\"focusout\",this.handleFocusout),this.host.addEventListener(\"keydown\",this.handleKeydown),this.focused=!0}hostNoLongerContainsFocus(){this.host.addEventListener(\"focusin\",this.handleFocusin),this.host.removeEventListener(\"focusout\",this.handleFocusout),this.host.removeEventListener(\"keydown\",this.handleKeydown),this.currentIndex=this.focusInIndex,this.focused=!1}isRelatedTargetAnElement(e){const t=e.relatedTarget;return!this.elements.includes(t)}acceptsEventCode(e){if(e===\"End\"||e===\"Home\")return!0;switch(this.direction){case\"horizontal\":return e===\"ArrowLeft\"||e===\"ArrowRight\";case\"vertical\":return e===\"ArrowUp\"||e===\"ArrowDown\";case\"both\":case\"grid\":return e.startsWith(\"Arrow\")}}manage(){this.addEventListeners()}unmanage(){this.removeEventListeners()}addEventListeners(){this.host.addEventListener(\"focusin\",this.handleFocusin)}removeEventListeners(){this.host.removeEventListener(\"focusin\",this.handleFocusin),this.host.removeEventListener(\"focusout\",this.handleFocusout),this.host.removeEventListener(\"keydown\",this.handleKeydown)}hostConnected(){this.addEventListeners()}hostDisconnected(){this.removeEventListeners()}}\n//# sourceMappingURL=FocusGroup.js.map\n","\"use strict\";import{FocusGroupController as s}from\"./FocusGroup.js\";export class RovingTabindexController extends s{constructor(){super(...arguments);this.managed=!0;this.manageIndexesAnimationFrame=0}set focused(e){e!==this.focused&&(super.focused=e,this.manageTabindexes())}get focused(){return super.focused}clearElementCache(e=0){cancelAnimationFrame(this.manageIndexesAnimationFrame),super.clearElementCache(e),this.managed&&(this.manageIndexesAnimationFrame=requestAnimationFrame(()=>this.manageTabindexes()))}manageTabindexes(){this.focused?this.updateTabindexes(()=>({tabIndex:-1})):this.updateTabindexes(e=>({removeTabIndex:e.contains(this.focusInElement)&&e!==this.focusInElement,tabIndex:e===this.focusInElement?0:-1}))}updateTabindexes(e){this.elements.forEach(a=>{const{tabIndex:t,removeTabIndex:i}=e(a);if(!i){a.tabIndex=t;return}a.removeAttribute(\"tabindex\");const n=a;n.requestUpdate&&n.requestUpdate()})}manage(){this.managed=!0,this.manageTabindexes(),super.manage()}unmanage(){this.managed=!1,this.updateTabindexes(()=>({tabIndex:0})),super.unmanage()}hostUpdated(){this.host.hasUpdated||this.manageTabindexes()}}\n//# sourceMappingURL=RovingTabindex.js.map\n"],"names":["reparentChildren","srcElements","destination","position","prepareCallback","length","index","step","cleanupCallbacks","placeholderTemplate","document","createComment","srcElement","placeholderItems","cloneNode","parentElement","getRootNode","replaceChild","insertAdjacentElement","placeholderItem","root","querySelector","value","type","fallback","constructor","host","direction","elementEnterAction","elements","focusInIndex","isFocusableElement","listenerScope","this","_currentIndex","directionLength","_el","_focused","_elements","event","isEventWithinListenerScope","isRelatedTargetAnElement","hostContainsFocus","composedPath","path","find","el","targetIndex","indexOf","currentIndex","hostNoLongerContainsFocus","acceptsEventCode","code","defaultPrevented","diff","preventDefault","setCurrentIndexCircularly","focus","addController","_direction","ensureMethod","_focusInIndex","_listenerScope","offset","cachedElements","focused","includes","unmanage","clearElementCache","manage","options","focusElement","nextIndex","steps","addEventListener","handleFocusout","handleKeydown","handleFocusin","removeEventListener","relatedTarget","startsWith","addEventListeners","removeEventListeners","managed","manageIndexesAnimationFrame","super","manageTabindexes","cancelAnimationFrame","requestAnimationFrame","updateTabindexes","tabIndex","removeTabIndex","contains","focusInElement","getTabIndex","forEach","removeAttribute","updatable","requestUpdate","hasUpdated"],"mappings":"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"}