{"version":3,"file":"02250eff.js","sources":["../../../tools/shared/src/reparent-children.js","../../../tools/shared/src/first-focusable-in.js","../../../tools/reactive-controllers/src/FocusGroup.js","../../../tools/reactive-controllers/src/RovingTabindex.js"],"sourcesContent":["\"use strict\";function T(o,i,l=[]){for(let e=0;e<i.length;++e){const n=i[e],r=o[e],t=r.parentElement||r.getRootNode();l[e]&&l[e](n),t&&t!==r&&t.replaceChild(n,r),delete o[e]}return i}export const reparentChildren=(o,i,{position:l,prepareCallback:e}={position:\"beforeend\"})=>{let{length:n}=o;if(n===0)return()=>o;let r=1,t=0;(l===\"afterbegin\"||l===\"afterend\")&&(r=-1,t=n-1);const a=new Array(n),c=new Array(n),p=document.createComment(\"placeholder for reparented element\");do{const d=o[t];e&&(c[t]=e(d)),a[t]=p.cloneNode();const m=d.parentElement||d.getRootNode();m&&m!==d&&m.replaceChild(a[t],d),i.insertAdjacentElement(l,d),t+=r}while(--n>0);return function(){return T(a,o,c)}};\n//# sourceMappingURL=reparent-children.js.map\n","\"use strict\";const e='button:not([tabindex=\"-1\"]), [href]:not([tabindex=\"-1\"]), input:not([tabindex=\"-1\"]), select:not([tabindex=\"-1\"]), textarea:not([tabindex=\"-1\"]), [tabindex]:not([tabindex=\"-1\"]), [focusable]:not([tabindex=\"-1\"])';export const firstFocusableIn=t=>t.querySelector(e);\n//# sourceMappingURL=first-focusable-in.js.map\n","\"use strict\";function r(i,e,t){return typeof i===e?()=>i:typeof i==\"function\"?i:t}export class FocusGroupController{constructor(e,{direction:t,elementEnterAction:n,elements:s,focusInIndex:o,isFocusableElement:h,listenerScope:c}={elements:()=>[]}){this._currentIndex=-1;this._direction=()=>\"both\";this.directionLength=5;this.elementEnterAction=e=>{};this._focused=!1;this._focusInIndex=e=>0;this.isFocusableElement=e=>!0;this._listenerScope=()=>this.host;this.offset=0;this.handleFocusin=e=>{if(!this.isEventWithinListenerScope(e))return;this.isRelatedTargetAnElement(e)&&this.hostContainsFocus();const t=e.composedPath();let n=-1;t.find(s=>(n=this.elements.indexOf(s),n!==-1)),this.currentIndex=n>-1?n:this.currentIndex};this.handleFocusout=e=>{this.isRelatedTargetAnElement(e)&&this.hostNoLongerContainsFocus()};this.handleKeydown=e=>{if(!this.acceptsEventCode(e.code)||e.defaultPrevented)return;let t=0;switch(e.code){case\"ArrowRight\":t+=1;break;case\"ArrowDown\":t+=this.direction===\"grid\"?this.directionLength:1;break;case\"ArrowLeft\":t-=1;break;case\"ArrowUp\":t-=this.direction===\"grid\"?this.directionLength:1;break;case\"End\":this.currentIndex=0,t-=1;break;case\"Home\":this.currentIndex=this.elements.length-1,t+=1;break}e.preventDefault(),this.direction===\"grid\"&&this.currentIndex+t<0?this.currentIndex=0:this.direction===\"grid\"&&this.currentIndex+t>this.elements.length-1?this.currentIndex=this.elements.length-1:this.setCurrentIndexCircularly(t),this.elementEnterAction(this.elements[this.currentIndex]),this.focus()};this.host=e,this.host.addController(this),this._elements=s,this.isFocusableElement=h||this.isFocusableElement,this._direction=r(t,\"string\",this._direction),this.elementEnterAction=n||this.elementEnterAction,this._focusInIndex=r(o,\"number\",this._focusInIndex),this._listenerScope=r(c,\"object\",this._listenerScope)}get currentIndex(){return this._currentIndex===-1&&(this._currentIndex=this.focusInIndex),this._currentIndex-this.offset}set currentIndex(e){this._currentIndex=e+this.offset}get direction(){return this._direction()}get elements(){return this.cachedElements||(this.cachedElements=this._elements()),this.cachedElements}set focused(e){e!==this.focused&&(this._focused=e)}get focused(){return this._focused}get focusInElement(){return this.elements[this.focusInIndex]}get focusInIndex(){return this._focusInIndex(this.elements)}isEventWithinListenerScope(e){return this._listenerScope()===this.host?!0:e.composedPath().includes(this._listenerScope())}update({elements:e}={elements:()=>[]}){this.unmanage(),this._elements=e,this.clearElementCache(),this.manage()}focus(e){let t=this.elements[this.currentIndex];(!t||!this.isFocusableElement(t))&&(this.setCurrentIndexCircularly(1),t=this.elements[this.currentIndex]),t&&this.isFocusableElement(t)&&t.focus(e)}clearElementCache(e=0){delete this.cachedElements,this.offset=e}setCurrentIndexCircularly(e){const{length:t}=this.elements;let n=t,s=(t+this.currentIndex+e)%t;for(;n&&this.elements[s]&&!this.isFocusableElement(this.elements[s]);)s=(t+s+e)%t,n-=1;this.currentIndex=s}hostContainsFocus(){this.host.addEventListener(\"focusout\",this.handleFocusout),this.host.addEventListener(\"keydown\",this.handleKeydown),this.focused=!0}hostNoLongerContainsFocus(){this.host.addEventListener(\"focusin\",this.handleFocusin),this.host.removeEventListener(\"focusout\",this.handleFocusout),this.host.removeEventListener(\"keydown\",this.handleKeydown),this.currentIndex=this.focusInIndex,this.focused=!1}isRelatedTargetAnElement(e){const t=e.relatedTarget;return!this.elements.includes(t)}acceptsEventCode(e){if(e===\"End\"||e===\"Home\")return!0;switch(this.direction){case\"horizontal\":return e===\"ArrowLeft\"||e===\"ArrowRight\";case\"vertical\":return e===\"ArrowUp\"||e===\"ArrowDown\";case\"both\":case\"grid\":return e.startsWith(\"Arrow\")}}manage(){this.addEventListeners()}unmanage(){this.removeEventListeners()}addEventListeners(){this.host.addEventListener(\"focusin\",this.handleFocusin)}removeEventListeners(){this.host.removeEventListener(\"focusin\",this.handleFocusin),this.host.removeEventListener(\"focusout\",this.handleFocusout),this.host.removeEventListener(\"keydown\",this.handleKeydown)}hostConnected(){this.addEventListeners()}hostDisconnected(){this.removeEventListeners()}}\n//# sourceMappingURL=FocusGroup.js.map\n","\"use strict\";import{FocusGroupController as s}from\"./FocusGroup.js\";export class RovingTabindexController extends s{constructor(){super(...arguments);this.managed=!0;this.manageIndexesAnimationFrame=0}set focused(e){e!==this.focused&&(super.focused=e,this.manageTabindexes())}get focused(){return super.focused}clearElementCache(e=0){cancelAnimationFrame(this.manageIndexesAnimationFrame),super.clearElementCache(e),this.managed&&(this.manageIndexesAnimationFrame=requestAnimationFrame(()=>this.manageTabindexes()))}manageTabindexes(){this.focused?this.updateTabindexes(()=>({tabIndex:-1})):this.updateTabindexes(e=>({removeTabIndex:e.contains(this.focusInElement)&&e!==this.focusInElement,tabIndex:e===this.focusInElement?0:-1}))}updateTabindexes(e){this.elements.forEach(a=>{const{tabIndex:t,removeTabIndex:i}=e(a);if(!i){a.tabIndex=t;return}a.removeAttribute(\"tabindex\");const n=a;n.requestUpdate&&n.requestUpdate()})}manage(){this.managed=!0,this.manageTabindexes(),super.manage()}unmanage(){this.managed=!1,this.updateTabindexes(()=>({tabIndex:0})),super.unmanage()}hostUpdated(){this.host.hasUpdated||this.manageTabindexes()}}\n//# sourceMappingURL=RovingTabindex.js.map\n"],"names":["reparentChildren","srcElements","destination","position","l","prepareCallback","e","length","n","r","index","step","placeholderItems","Array","cleanupCallbacks","placeholderTemplate","document","createComment","srcElement","cloneNode","parentElement","getRootNode","replaceChild","insertAdjacentElement","placeholderItem","firstFocusableIn","root","querySelector","ensureMethod","value","type","fallback","i","FocusGroupController","constructor","host","direction","elementEnterAction","elements","focusInIndex","o","isFocusableElement","h","listenerScope","c","this","_currentIndex","_direction","directionLength","_el","_focused","_elements","_listenerScope","offset","event","isEventWithinListenerScope","isRelatedTargetAnElement","hostContainsFocus","path","composedPath","find","el","targetIndex","indexOf","currentIndex","hostNoLongerContainsFocus","acceptsEventCode","code","defaultPrevented","diff","preventDefault","setCurrentIndexCircularly","focus","addController","_focusInIndex","cachedElements","focused","focusInElement","includes","update","unmanage","clearElementCache","manage","options","t","focusElement","steps","nextIndex","addEventListener","handleFocusout","handleKeydown","handleFocusin","removeEventListener","relatedTarget","startsWith","addEventListeners","removeEventListeners","hostConnected","RovingTabindexController","s","super","arguments","managed","manageIndexesAnimationFrame","manageTabindexes","cancelAnimationFrame","requestAnimationFrame","updateTabindexes","tabIndex","removeTabIndex","contains","getTabIndex","forEach","removeAttribute","updatable","requestUpdate","hostUpdated","hasUpdated"],"mappings":"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"}