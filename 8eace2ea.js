import{I as e,y as t,_ as s,e as n}from"./62b05a9e.js";import{l as i,i as o}from"./a41a5416.js";class a{constructor(){this.iconsetMap=new Map}static getInstance(){return a.instance||(a.instance=new a),a.instance}addIconset(e,t){this.iconsetMap.set(e,t);const s=new CustomEvent("sp-iconset-added",{bubbles:!0,composed:!0,detail:{name:e,iconset:t}});setTimeout((()=>window.dispatchEvent(s)),0)}removeIconset(e){this.iconsetMap.delete(e);const t=new CustomEvent("sp-iconset-removed",{bubbles:!0,composed:!0,detail:{name:e}});setTimeout((()=>window.dispatchEvent(t)),0)}getIconset(e){return this.iconsetMap.get(e)}}class c extends e{constructor(){super(...arguments),this.iconsetListener=e=>{if(!this.name)return;const t=this.parseIcon(this.name);e.detail.name===t.iconset&&(this.updateIconPromise=this.updateIcon())}}connectedCallback(){super.connectedCallback(),window.addEventListener("sp-iconset-added",this.iconsetListener)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("sp-iconset-added",this.iconsetListener)}firstUpdated(){this.updateIconPromise=this.updateIcon()}attributeChangedCallback(e,t,s){super.attributeChangedCallback(e,t,s),this.updateIconPromise=this.updateIcon()}render(){return this.name?t`<div id="container"></div>`:this.src?t`<img src="${this.src}" alt="${i(this.label)}">`:super.render()}async updateIcon(){if(this.updateIconPromise&&await this.updateIconPromise,!this.name)return Promise.resolve();const e=this.parseIcon(this.name),t=a.getInstance().getIconset(e.iconset);return t&&this.iconContainer?(this.iconContainer.innerHTML="",t.applyIconToElement(this.iconContainer,e.icon,this.size||"",this.label?this.label:"")):Promise.resolve()}parseIcon(e){const t=e.split(":");let s="default",n=e;return t.length>1&&(s=t[0],n=t[1]),{iconset:s,icon:n}}async getUpdateComplete(){const e=await super.getUpdateComplete();return await this.updateIconPromise,e}}s([n()],c.prototype,"src",void 0),s([n()],c.prototype,"name",void 0),s([o("#container")],c.prototype,"iconContainer",void 0),customElements.define("sp-icon",c);export{a as I};
//# sourceMappingURL=8eace2ea.js.map
