{"version":3,"file":"e555a536.js","sources":["../../../packages/overlay/src/active-overlay.css.js","../../../node_modules/@floating-ui/core/dist/floating-ui.core.esm.min.js","../../../node_modules/@floating-ui/dom/dist/floating-ui.dom.esm.min.js","../../../packages/overlay/src/ActiveOverlay.js","../../../packages/overlay/src/overlay-timer.js","../../../packages/overlay/active-overlay.js","../../../packages/overlay/src/overlay.js","../../../packages/overlay/src/overlay-stack.js"],"sourcesContent":["/*\nCopyright 2020 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\nimport { css } from '@spectrum-web-components/base';\nconst styles = css `\n@keyframes sp-overlay-fade-in{0%{opacity:0;transform:var(--sp-overlay-from)}to{opacity:1;transform:translate(0)}}@keyframes sp-overlay-fade-out{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:var(--sp-overlay-from)}}:host{display:inline-block;left:-9999em;pointer-events:none;position:absolute;top:-9999em;z-index:1000}:host(:focus){outline:none}:host([placement=none]){height:100vh;height:-webkit-fill-available;height:fill-available;left:0;max-height:var(--swc-visual-viewport-height);position:fixed;top:0}#contents,sp-theme{height:100%}#contents{--swc-overlay-animation-distance:var(\n--spectrum-picker-m-texticon-popover-offset-y,var(--spectrum-global-dimension-size-75)\n);animation-duration:var(\n--swc-test-duration,var(--spectrum-global-animation-duration-200,.16s)\n);animation-timing-function:var(\n--spectrum-global-animation-ease-out,ease-out\n);box-sizing:border-box;display:inline-block;opacity:1;pointer-events:none;visibility:visible}:host([actual-placement*=top]) #contents{--sp-overlay-from:translateY(var(--spectrum-global-dimension-size-75));align-items:flex-end;display:inline-flex;padding-top:var(--swc-overlay-animation-distance)}:host([actual-placement*=right]) #contents{--sp-overlay-from:translateX(calc(var(--spectrum-global-dimension-size-75)*-1));padding-right:var(--swc-overlay-animation-distance)}:host([actual-placement*=bottom]) #contents{--sp-overlay-from:translateY(calc(var(--spectrum-global-dimension-size-75)*-1));padding-bottom:var(--swc-overlay-animation-distance)}:host([actual-placement*=left]) #contents{--sp-overlay-from:translateX(var(--spectrum-global-dimension-size-75));padding-left:var(--swc-overlay-animation-distance)}:host([animating]) ::slotted(*){pointer-events:none}:host(:not([animating])) ::slotted(*){pointer-events:auto}#contents ::slotted(*){position:relative}\n`;\nexport default styles;\n//# sourceMappingURL=active-overlay.css.js.map","function t(t){return t.split(\"-\")[0]}function e(t){return t.split(\"-\")[1]}function n(e){return[\"top\",\"bottom\"].includes(t(e))?\"x\":\"y\"}function r(t){return\"y\"===t?\"height\":\"width\"}function i(i,o,a){let{reference:l,floating:s}=i;const c=l.x+l.width/2-s.width/2,f=l.y+l.height/2-s.height/2,u=n(o),m=r(u),g=l[m]/2-s[m]/2,d=\"x\"===u;let p;switch(t(o)){case\"top\":p={x:c,y:l.y-s.height};break;case\"bottom\":p={x:c,y:l.y+l.height};break;case\"right\":p={x:l.x+l.width,y:f};break;case\"left\":p={x:l.x-s.width,y:f};break;default:p={x:l.x,y:l.y}}switch(e(o)){case\"start\":p[u]-=g*(a&&d?-1:1);break;case\"end\":p[u]+=g*(a&&d?-1:1)}return p}const o=async(t,e,n)=>{const{placement:r=\"bottom\",strategy:o=\"absolute\",middleware:a=[],platform:l}=n,s=await(null==l.isRTL?void 0:l.isRTL(e));let c=await l.getElementRects({reference:t,floating:e,strategy:o}),{x:f,y:u}=i(c,r,s),m=r,g={};for(let n=0;n<a.length;n++){const{name:d,fn:p}=a[n],{x:h,y:y,data:x,reset:w}=await p({x:f,y:u,initialPlacement:r,placement:m,strategy:o,middlewareData:g,rects:c,platform:l,elements:{reference:t,floating:e}});f=null!=h?h:f,u=null!=y?y:u,g={...g,[d]:{...g[d],...x}},w&&(\"object\"==typeof w&&(w.placement&&(m=w.placement),w.rects&&(c=!0===w.rects?await l.getElementRects({reference:t,floating:e,strategy:o}):w.rects),({x:f,y:u}=i(c,m,s))),n=-1)}return{x:f,y:u,placement:m,strategy:o,middlewareData:g}};function a(t){return\"number\"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}function l(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function s(t,e){var n;void 0===e&&(e={});const{x:r,y:i,platform:o,rects:s,elements:c,strategy:f}=t,{boundary:u=\"clippingAncestors\",rootBoundary:m=\"viewport\",elementContext:g=\"floating\",altBoundary:d=!1,padding:p=0}=e,h=a(p),y=c[d?\"floating\"===g?\"reference\":\"floating\":g],x=l(await o.getClippingRect({element:null==(n=await(null==o.isElement?void 0:o.isElement(y)))||n?y:y.contextElement||await(null==o.getDocumentElement?void 0:o.getDocumentElement(c.floating)),boundary:u,rootBoundary:m,strategy:f})),w=l(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:\"floating\"===g?{...s.floating,x:r,y:i}:s.reference,offsetParent:await(null==o.getOffsetParent?void 0:o.getOffsetParent(c.floating)),strategy:f}):s[g]);return{top:x.top-w.top+h.top,bottom:w.bottom-x.bottom+h.bottom,left:x.left-w.left+h.left,right:w.right-x.right+h.right}}const c=Math.min,f=Math.max;function u(t,e,n){return f(t,c(e,n))}const m=t=>({name:\"arrow\",options:t,async fn(e){const{element:i,padding:o=0}=null!=t?t:{},{x:l,y:s,placement:c,rects:f,platform:m}=e;if(null==i)return{};const g=a(o),d={x:l,y:s},p=n(c),h=r(p),y=await m.getDimensions(i),x=\"y\"===p?\"top\":\"left\",w=\"y\"===p?\"bottom\":\"right\",v=f.reference[h]+f.reference[p]-d[p]-f.floating[h],b=d[p]-f.reference[p],R=await(null==m.getOffsetParent?void 0:m.getOffsetParent(i)),A=R?\"y\"===p?R.clientHeight||0:R.clientWidth||0:0,P=v/2-b/2,T=g[x],O=A-y[h]-g[w],D=A/2-y[h]/2+P,L=u(T,D,O);return{data:{[p]:L,centerOffset:D-L}}}}),g={left:\"right\",right:\"left\",bottom:\"top\",top:\"bottom\"};function d(t){return t.replace(/left|right|bottom|top/g,(t=>g[t]))}function p(t,i,o){void 0===o&&(o=!1);const a=e(t),l=n(t),s=r(l);let c=\"x\"===l?a===(o?\"end\":\"start\")?\"right\":\"left\":\"start\"===a?\"bottom\":\"top\";return i.reference[s]>i.floating[s]&&(c=d(c)),{main:c,cross:d(c)}}const h={start:\"end\",end:\"start\"};function y(t){return t.replace(/start|end/g,(t=>h[t]))}const x=[\"top\",\"right\",\"bottom\",\"left\"],w=x.reduce(((t,e)=>t.concat(e,e+\"-start\",e+\"-end\")),[]);const v=function(n){return void 0===n&&(n={}),{name:\"autoPlacement\",options:n,async fn(r){var i,o,a,l,c;const{x:f,y:u,rects:m,middlewareData:g,placement:d,platform:h,elements:x}=r,{alignment:v=null,allowedPlacements:b=w,autoAlignment:R=!0,...A}=n,P=function(n,r,i){return(n?[...i.filter((t=>e(t)===n)),...i.filter((t=>e(t)!==n))]:i.filter((e=>t(e)===e))).filter((t=>!n||e(t)===n||!!r&&y(t)!==t))}(v,R,b),T=await s(r,A),O=null!=(i=null==(o=g.autoPlacement)?void 0:o.index)?i:0,D=P[O];if(null==D)return{};const{main:L,cross:k}=p(D,m,await(null==h.isRTL?void 0:h.isRTL(x.floating)));if(d!==D)return{x:f,y:u,reset:{placement:P[0]}};const E=[T[t(D)],T[L],T[k]],C=[...null!=(a=null==(l=g.autoPlacement)?void 0:l.overflows)?a:[],{placement:D,overflows:E}],B=P[O+1];if(B)return{data:{index:O+1,overflows:C},reset:{placement:B}};const H=C.slice().sort(((t,e)=>t.overflows[0]-e.overflows[0])),V=null==(c=H.find((t=>{let{overflows:e}=t;return e.every((t=>t<=0))})))?void 0:c.placement,F=null!=V?V:H[0].placement;return F!==d?{data:{index:O+1,overflows:C},reset:{placement:F}}:{}}}};const b=function(e){return void 0===e&&(e={}),{name:\"flip\",options:e,async fn(n){var r;const{placement:i,middlewareData:o,rects:a,initialPlacement:l,platform:c,elements:f}=n,{mainAxis:u=!0,crossAxis:m=!0,fallbackPlacements:g,fallbackStrategy:h=\"bestFit\",flipAlignment:x=!0,...w}=e,v=t(i),b=g||(v===l||!x?[d(l)]:function(t){const e=d(t);return[y(t),e,y(e)]}(l)),R=[l,...b],A=await s(n,w),P=[];let T=(null==(r=o.flip)?void 0:r.overflows)||[];if(u&&P.push(A[v]),m){const{main:t,cross:e}=p(i,a,await(null==c.isRTL?void 0:c.isRTL(f.floating)));P.push(A[t],A[e])}if(T=[...T,{placement:i,overflows:P}],!P.every((t=>t<=0))){var O,D;const t=(null!=(O=null==(D=o.flip)?void 0:D.index)?O:0)+1,e=R[t];if(e)return{data:{index:t,overflows:T},reset:{placement:e}};let n=\"bottom\";switch(h){case\"bestFit\":{var L;const t=null==(L=T.slice().sort(((t,e)=>t.overflows.filter((t=>t>0)).reduce(((t,e)=>t+e),0)-e.overflows.filter((t=>t>0)).reduce(((t,e)=>t+e),0)))[0])?void 0:L.placement;t&&(n=t);break}case\"initialPlacement\":n=l}if(i!==n)return{reset:{placement:n}}}return{}}}};function R(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function A(t){return x.some((e=>t[e]>=0))}const P=function(t){let{strategy:e=\"referenceHidden\",...n}=void 0===t?{}:t;return{name:\"hide\",async fn(t){const{rects:r}=t;switch(e){case\"referenceHidden\":{const e=R(await s(t,{...n,elementContext:\"reference\"}),r.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:A(e)}}}case\"escaped\":{const e=R(await s(t,{...n,altBoundary:!0}),r.floating);return{data:{escapedOffsets:e,escaped:A(e)}}}default:return{}}}}};const T=function(r){return void 0===r&&(r=0),{name:\"offset\",options:r,async fn(i){const{x:o,y:a,placement:l,rects:s,platform:c,elements:f}=i,u=function(r,i,o,a){void 0===a&&(a=!1);const l=t(r),s=e(r),c=\"x\"===n(r),f=[\"left\",\"top\"].includes(l)?-1:1,u=a&&c?-1:1,m=\"function\"==typeof o?o({...i,placement:r}):o,g=\"number\"==typeof m;let{mainAxis:d,crossAxis:p,alignmentAxis:h}=g?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...m};return s&&\"number\"==typeof h&&(p=\"end\"===s?-1*h:h),c?{x:p*u,y:d*f}:{x:d*f,y:p*u}}(l,s,r,await(null==c.isRTL?void 0:c.isRTL(f.floating)));return{x:o+u.x,y:a+u.y,data:u}}}};function O(t){return\"x\"===t?\"y\":\"x\"}const D=function(e){return void 0===e&&(e={}),{name:\"shift\",options:e,async fn(r){const{x:i,y:o,placement:a}=r,{mainAxis:l=!0,crossAxis:c=!1,limiter:f={fn:t=>{let{x:e,y:n}=t;return{x:e,y:n}}},...m}=e,g={x:i,y:o},d=await s(r,m),p=n(t(a)),h=O(p);let y=g[p],x=g[h];if(l){const t=\"y\"===p?\"bottom\":\"right\";y=u(y+d[\"y\"===p?\"top\":\"left\"],y,y-d[t])}if(c){const t=\"y\"===h?\"bottom\":\"right\";x=u(x+d[\"y\"===h?\"top\":\"left\"],x,x-d[t])}const w=f.fn({...r,[p]:y,[h]:x});return{...w,data:{x:w.x-i,y:w.y-o}}}}},L=function(e){return void 0===e&&(e={}),{options:e,fn(r){const{x:i,y:o,placement:a,rects:l,middlewareData:s}=r,{offset:c=0,mainAxis:f=!0,crossAxis:u=!0}=e,m={x:i,y:o},g=n(a),d=O(g);let p=m[g],h=m[d];const y=\"function\"==typeof c?c({...l,placement:a}):c,x=\"number\"==typeof y?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(f){const t=\"y\"===g?\"height\":\"width\",e=l.reference[g]-l.floating[t]+x.mainAxis,n=l.reference[g]+l.reference[t]-x.mainAxis;p<e?p=e:p>n&&(p=n)}if(u){var w,v,b,R;const e=\"y\"===g?\"width\":\"height\",n=[\"top\",\"left\"].includes(t(a)),r=l.reference[d]-l.floating[e]+(n&&null!=(w=null==(v=s.offset)?void 0:v[d])?w:0)+(n?0:x.crossAxis),i=l.reference[d]+l.reference[e]+(n?0:null!=(b=null==(R=s.offset)?void 0:R[d])?b:0)-(n?x.crossAxis:0);h<r?h=r:h>i&&(h=i)}return{[g]:p,[d]:h}}}},k=function(n){return void 0===n&&(n={}),{name:\"size\",options:n,async fn(r){const{placement:i,rects:o,platform:a,elements:l}=r,{apply:c,...u}=n,m=await s(r,u),g=t(i),d=e(i);let p,h;\"top\"===g||\"bottom\"===g?(p=g,h=d===(await(null==a.isRTL?void 0:a.isRTL(l.floating))?\"start\":\"end\")?\"left\":\"right\"):(h=g,p=\"end\"===d?\"top\":\"bottom\");const y=f(m.left,0),x=f(m.right,0),w=f(m.top,0),v=f(m.bottom,0),b={height:o.floating.height-([\"left\",\"right\"].includes(i)?2*(0!==w||0!==v?w+v:f(m.top,m.bottom)):m[p]),width:o.floating.width-([\"top\",\"bottom\"].includes(i)?2*(0!==y||0!==x?y+x:f(m.left,m.right)):m[h])},R=await a.getDimensions(l.floating);null==c||c({...b,...o});const A=await a.getDimensions(l.floating);return R.width!==A.width||R.height!==A.height?{reset:{rects:!0}}:{}}}},E=function(e){return void 0===e&&(e={}),{name:\"inline\",options:e,async fn(r){var i;const{placement:o,elements:s,rects:u,platform:m,strategy:g}=r,{padding:d=2,x:p,y:h}=e,y=l(m.convertOffsetParentRelativeRectToViewportRelativeRect?await m.convertOffsetParentRelativeRectToViewportRelativeRect({rect:u.reference,offsetParent:await(null==m.getOffsetParent?void 0:m.getOffsetParent(s.floating)),strategy:g}):u.reference),x=null!=(i=await(null==m.getClientRects?void 0:m.getClientRects(s.reference)))?i:[],w=a(d);const v=await m.getElementRects({reference:{getBoundingClientRect:function(){var e;if(2===x.length&&x[0].left>x[1].right&&null!=p&&null!=h)return null!=(e=x.find((t=>p>t.left-w.left&&p<t.right+w.right&&h>t.top-w.top&&h<t.bottom+w.bottom)))?e:y;if(x.length>=2){if(\"x\"===n(o)){const e=x[0],n=x[x.length-1],r=\"top\"===t(o),i=e.top,a=n.bottom,l=r?e.left:n.left,s=r?e.right:n.right;return{top:i,bottom:a,left:l,right:s,width:s-l,height:a-i,x:l,y:i}}const e=\"left\"===t(o),r=f(...x.map((t=>t.right))),i=c(...x.map((t=>t.left))),a=x.filter((t=>e?t.left===i:t.right===r)),l=a[0].top,s=a[a.length-1].bottom;return{top:l,bottom:s,left:i,right:r,width:r-i,height:s-l,x:i,y:l}}return y}},floating:s.floating,strategy:g});return u.reference.x!==v.reference.x||u.reference.y!==v.reference.y||u.reference.width!==v.reference.width||u.reference.height!==v.reference.height?{reset:{rects:v}}:{}}}};export{m as arrow,v as autoPlacement,o as computePosition,s as detectOverflow,b as flip,P as hide,E as inline,L as limitShift,T as offset,l as rectToClientRect,D as shift,k as size};\n","import{rectToClientRect as t,computePosition as e}from\"@floating-ui/core\";export{arrow,autoPlacement,detectOverflow,flip,hide,inline,limitShift,offset,shift,size}from\"@floating-ui/core\";function n(t){return t&&t.document&&t.location&&t.alert&&t.setInterval}function o(t){if(null==t)return window;if(!n(t)){const e=t.ownerDocument;return e&&e.defaultView||window}return t}function i(t){return o(t).getComputedStyle(t)}function r(t){return n(t)?\"\":t?(t.nodeName||\"\").toLowerCase():\"\"}function l(t){return t instanceof o(t).HTMLElement}function c(t){return t instanceof o(t).Element}function f(t){return t instanceof o(t).ShadowRoot||t instanceof ShadowRoot}function s(t){const{overflow:e,overflowX:n,overflowY:o}=i(t);return/auto|scroll|overlay|hidden/.test(e+o+n)}function u(t){return[\"table\",\"td\",\"th\"].includes(r(t))}function d(t){const e=navigator.userAgent.toLowerCase().includes(\"firefox\"),n=i(t);return\"none\"!==n.transform||\"none\"!==n.perspective||\"paint\"===n.contain||[\"transform\",\"perspective\"].includes(n.willChange)||e&&\"filter\"===n.willChange||e&&!!n.filter&&\"none\"!==n.filter}function h(){return!/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}const a=Math.min,g=Math.max,p=Math.round;function m(t,e,n){var i,r,f,s;void 0===e&&(e=!1),void 0===n&&(n=!1);const u=t.getBoundingClientRect();let d=1,a=1;e&&l(t)&&(d=t.offsetWidth>0&&p(u.width)/t.offsetWidth||1,a=t.offsetHeight>0&&p(u.height)/t.offsetHeight||1);const g=c(t)?o(t):window,m=!h()&&n,w=(u.left+(m&&null!=(i=null==(r=g.visualViewport)?void 0:r.offsetLeft)?i:0))/d,v=(u.top+(m&&null!=(f=null==(s=g.visualViewport)?void 0:s.offsetTop)?f:0))/a,y=u.width/d,x=u.height/a;return{width:y,height:x,top:v,right:w+y,bottom:v+x,left:w,x:w,y:v}}function w(t){return(e=t,(e instanceof o(e).Node?t.ownerDocument:t.document)||window.document).documentElement;var e}function v(t){return c(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function y(t){return m(w(t)).left+v(t).scrollLeft}function x(t,e,n){const o=l(e),i=w(e),c=m(t,o&&function(t){const e=m(t);return p(e.width)!==t.offsetWidth||p(e.height)!==t.offsetHeight}(e),\"fixed\"===n);let f={scrollLeft:0,scrollTop:0};const u={x:0,y:0};if(o||!o&&\"fixed\"!==n)if((\"body\"!==r(e)||s(i))&&(f=v(e)),l(e)){const t=m(e,!0);u.x=t.x+e.clientLeft,u.y=t.y+e.clientTop}else i&&(u.x=y(i));return{x:c.left+f.scrollLeft-u.x,y:c.top+f.scrollTop-u.y,width:c.width,height:c.height}}function L(t){return\"html\"===r(t)?t:t.assignedSlot||t.parentNode||(f(t)?t.host:null)||w(t)}function b(t){return l(t)&&\"fixed\"!==getComputedStyle(t).position?t.offsetParent:null}function R(t){const e=o(t);let n=b(t);for(;n&&u(n)&&\"static\"===getComputedStyle(n).position;)n=b(n);return n&&(\"html\"===r(n)||\"body\"===r(n)&&\"static\"===getComputedStyle(n).position&&!d(n))?e:n||function(t){let e=L(t);for(f(e)&&(e=e.host);l(e)&&![\"html\",\"body\"].includes(r(e));){if(d(e))return e;e=e.parentNode}return null}(t)||e}function T(t){if(l(t))return{width:t.offsetWidth,height:t.offsetHeight};const e=m(t);return{width:e.width,height:e.height}}function W(t){const e=L(t);return[\"html\",\"body\",\"#document\"].includes(r(e))?t.ownerDocument.body:l(e)&&s(e)?e:W(e)}function C(t,e){var n;void 0===e&&(e=[]);const i=W(t),r=i===(null==(n=t.ownerDocument)?void 0:n.body),l=o(i),c=r?[l].concat(l.visualViewport||[],s(i)?i:[]):i,f=e.concat(c);return r?f:f.concat(C(c))}function E(e,n,r){return\"viewport\"===n?t(function(t,e){const n=o(t),i=w(t),r=n.visualViewport;let l=i.clientWidth,c=i.clientHeight,f=0,s=0;if(r){l=r.width,c=r.height;const t=h();(t||!t&&\"fixed\"===e)&&(f=r.offsetLeft,s=r.offsetTop)}return{width:l,height:c,x:f,y:s}}(e,r)):c(n)?function(t,e){const n=m(t,!1,\"fixed\"===e),o=n.top+t.clientTop,i=n.left+t.clientLeft;return{top:o,left:i,x:i,y:o,right:i+t.clientWidth,bottom:o+t.clientHeight,width:t.clientWidth,height:t.clientHeight}}(n,r):t(function(t){var e;const n=w(t),o=v(t),r=null==(e=t.ownerDocument)?void 0:e.body,l=g(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),c=g(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0);let f=-o.scrollLeft+y(t);const s=-o.scrollTop;return\"rtl\"===i(r||n).direction&&(f+=g(n.clientWidth,r?r.clientWidth:0)-l),{width:l,height:c,x:f,y:s}}(w(e)))}function H(t){const e=C(t),n=[\"absolute\",\"fixed\"].includes(i(t).position)&&l(t)?R(t):t;return c(n)?e.filter((t=>c(t)&&function(t,e){const n=null==e||null==e.getRootNode?void 0:e.getRootNode();if(null!=t&&t.contains(e))return!0;if(n&&f(n)){let n=e;do{if(n&&t===n)return!0;n=n.parentNode||n.host}while(n)}return!1}(t,n)&&\"body\"!==r(t))):[]}const S={getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:o,strategy:i}=t;const r=[...\"clippingAncestors\"===n?H(e):[].concat(n),o],l=r[0],c=r.reduce(((t,n)=>{const o=E(e,n,i);return t.top=g(o.top,t.top),t.right=a(o.right,t.right),t.bottom=a(o.bottom,t.bottom),t.left=g(o.left,t.left),t}),E(e,l,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:n,strategy:o}=t;const i=l(n),c=w(n);if(n===c)return e;let f={scrollLeft:0,scrollTop:0};const u={x:0,y:0};if((i||!i&&\"fixed\"!==o)&&((\"body\"!==r(n)||s(c))&&(f=v(n)),l(n))){const t=m(n,!0);u.x=t.x+n.clientLeft,u.y=t.y+n.clientTop}return{...e,x:e.x-f.scrollLeft+u.x,y:e.y-f.scrollTop+u.y}},isElement:c,getDimensions:T,getOffsetParent:R,getDocumentElement:w,getElementRects:t=>{let{reference:e,floating:n,strategy:o}=t;return{reference:x(e,R(n),o),floating:{...T(n),x:0,y:0}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>\"rtl\"===i(t).direction};function D(t,e,n,o){void 0===o&&(o={});const{ancestorScroll:i=!0,ancestorResize:r=!0,elementResize:l=!0,animationFrame:f=!1}=o;let s=!1;const u=i&&!f,d=r&&!f,h=l&&!f,a=u||d?[...c(t)?C(t):[],...C(e)]:[];a.forEach((t=>{u&&t.addEventListener(\"scroll\",n,{passive:!0}),d&&t.addEventListener(\"resize\",n)}));let g,p=null;h&&(p=new ResizeObserver(n),c(t)&&p.observe(t),p.observe(e));let w=f?m(t):null;return f&&function e(){if(s)return;const o=m(t);!w||o.x===w.x&&o.y===w.y&&o.width===w.width&&o.height===w.height||n();w=o,g=requestAnimationFrame(e)}(),()=>{var t;s=!0,a.forEach((t=>{u&&t.removeEventListener(\"scroll\",n),d&&t.removeEventListener(\"resize\",n)})),null==(t=p)||t.disconnect(),p=null,f&&cancelAnimationFrame(g)}}const N=(t,n,o)=>e(t,n,{platform:S,...o});export{D as autoUpdate,N as computePosition,C as getOverflowAncestors};\n","/*\nCopyright 2020 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\nimport { __decorate } from \"tslib\";\nimport { html, SpectrumElement, } from '@spectrum-web-components/base';\nimport { ifDefined } from '@spectrum-web-components/base/src/directives.js';\nimport { property } from '@spectrum-web-components/base/src/decorators.js';\nimport { reparentChildren } from '@spectrum-web-components/shared/src/reparent-children.js';\nimport { firstFocusableIn } from '@spectrum-web-components/shared/src/first-focusable-in.js';\nimport styles from './active-overlay.css.js';\nimport { arrow, computePosition, flip, offset, shift, size, } from '@floating-ui/dom';\nconst stateMachine = {\n    initial: 'idle',\n    states: {\n        idle: {\n            on: {\n                active: 'active',\n            },\n        },\n        active: {\n            on: {\n                hiding: 'hiding',\n                idle: 'idle',\n            },\n        },\n        hiding: {\n            on: {\n                dispose: 'dispose',\n            },\n        },\n        dispose: {\n            on: {\n                disposed: 'disposed',\n            },\n        },\n        disposed: {\n            on: {},\n        },\n    },\n};\nconst stateTransition = (state, event) => {\n    if (!state)\n        return stateMachine.initial;\n    /* c8 ignore next */\n    if (!event)\n        return state;\n    return stateMachine.states[state].on[event] || state;\n};\nconst parentOverlayOf = (el) => {\n    const closestOverlay = el.closest('active-overlay');\n    if (closestOverlay) {\n        return closestOverlay;\n    }\n    const rootNode = el.getRootNode();\n    if (rootNode.host) {\n        return parentOverlayOf(rootNode.host);\n    }\n    return null;\n};\n/**\n * @element active-overlay\n *\n * @slot - content to display in the overlay\n */\nexport class ActiveOverlay extends SpectrumElement {\n    constructor() {\n        super();\n        this._state = stateTransition();\n        this.animating = false;\n        this.theme = {};\n        this.tabbingAway = false;\n        this.offset = 6;\n        this.skidding = 0;\n        this.interaction = 'hover';\n        this.positionAnimationFrame = 0;\n        this.willNotifyClosed = false;\n        this.isConstrained = false;\n        this.updateOverlayPosition = async () => {\n            if (!this.placement || this.placement === 'none') {\n                return;\n            }\n            await (document.fonts ? document.fonts.ready : Promise.resolve());\n            function roundByDPR(num) {\n                const dpr = window.devicePixelRatio || 1;\n                return Math.round(num * dpr) / dpr || -10000;\n            }\n            // See: https://spectrum.adobe.com/page/popover/#Container-padding\n            const REQUIRED_DISTANCE_TO_EDGE = 8;\n            // See: https://github.com/adobe/spectrum-web-components/issues/910\n            const MIN_OVERLAY_HEIGHT = 100;\n            const middleware = [\n                offset({\n                    mainAxis: this.offset,\n                    crossAxis: this.skidding,\n                }),\n                flip({\n                    fallbackStrategy: 'initialPlacement',\n                }),\n                shift({ padding: REQUIRED_DISTANCE_TO_EDGE }),\n                size({\n                    padding: REQUIRED_DISTANCE_TO_EDGE,\n                    apply: ({ width, height, floating }) => {\n                        const maxHeight = Math.max(MIN_OVERLAY_HEIGHT, Math.floor(height));\n                        const actualHeight = floating.height;\n                        this.initialHeight = !this.isConstrained\n                            ? actualHeight\n                            : this.initialHeight || actualHeight;\n                        this.isConstrained =\n                            actualHeight < this.initialHeight ||\n                                maxHeight <= actualHeight;\n                        const appliedHeight = this.isConstrained\n                            ? `${maxHeight}px`\n                            : '';\n                        Object.assign(this.style, {\n                            maxWidth: `${Math.floor(width)}px`,\n                            maxHeight: appliedHeight,\n                            height: appliedHeight,\n                        });\n                    },\n                }),\n            ];\n            if (this.overlayContentTip) {\n                middleware.push(arrow({ element: this.overlayContentTip }));\n            }\n            const { x, y, placement, middlewareData } = await computePosition(this.virtualTrigger || this.trigger, this, {\n                placement: this.placement,\n                middleware,\n            });\n            Object.assign(this.style, {\n                top: '0px',\n                left: '0px',\n                transform: `translate(${roundByDPR(x)}px, ${roundByDPR(y)}px)`,\n            });\n            if (placement !== this.getAttribute('actual-placement')) {\n                this.setAttribute('actual-placement', placement);\n                this.overlayContent.setAttribute('placement', placement);\n            }\n            if (this.overlayContentTip && middlewareData.arrow) {\n                const { x: arrowX, y: arrowY } = middlewareData.arrow;\n                Object.assign(this.overlayContentTip.style, {\n                    left: arrowX != null ? `${roundByDPR(arrowX)}px` : '',\n                    top: arrowY != null ? `${roundByDPR(arrowY)}px` : '',\n                    right: '',\n                    bottom: '',\n                });\n            }\n        };\n        this.handleInlineTriggerKeydown = (event) => {\n            const { code, shiftKey } = event;\n            /* c8 ignore next */\n            if (code !== 'Tab')\n                return;\n            if (shiftKey) {\n                this.tabbingAway = true;\n                this.dispatchEvent(new Event('close'));\n                return;\n            }\n            event.stopPropagation();\n            event.preventDefault();\n            this.focus();\n        };\n        this.stealOverlayContentPromise = Promise.resolve();\n        this.stealOverlayContentPromise = new Promise((res) => (this.stealOverlayContentResolver = res));\n    }\n    get state() {\n        return this._state;\n    }\n    set state(state) {\n        const nextState = stateTransition(this.state, state);\n        if (nextState === this.state) {\n            return;\n        }\n        this._state = nextState;\n        if (this.state === 'active' || this.state === 'hiding') {\n            this.setAttribute('state', this.state);\n        }\n        else {\n            this.removeAttribute('state');\n        }\n    }\n    async focus() {\n        const firstFocusable = firstFocusableIn(this);\n        if (firstFocusable) {\n            if (firstFocusable.updateComplete) {\n                await firstFocusable.updateComplete;\n            }\n            const activeElement = this.getRootNode()\n                .activeElement;\n            if (activeElement === this || !this.contains(activeElement)) {\n                firstFocusable.focus();\n            }\n            /* c8 ignore next 3 */\n        }\n        else {\n            super.focus();\n        }\n        this.removeAttribute('tabindex');\n    }\n    get hasTheme() {\n        return !!this.theme.color || !!this.theme.scale || !!this.theme.lang;\n    }\n    static get styles() {\n        return [styles];\n    }\n    get hasModalRoot() {\n        return !!this._modalRoot;\n    }\n    feature() {\n        this.tabIndex = -1;\n        const parentOverlay = parentOverlayOf(this.trigger);\n        const parentIsModal = parentOverlay && parentOverlay.slot === 'open';\n        if (parentIsModal) {\n            this._modalRoot = parentOverlay._modalRoot || parentOverlay;\n        }\n        // If an overlay it triggered from within a \"modal\" overlay, it needs to continue\n        // to act like one to get treated correctly in regards to tab trapping.\n        if (this.interaction === 'modal' || this._modalRoot) {\n            this.slot = 'open';\n            if (this.interaction === 'modal') {\n                this.setAttribute('aria-modal', 'true');\n            }\n            // If this isn't a modal root, walk up the overlays to the next modal root\n            // and \"feature\" each on of the intervening overlays.\n            if (this._modalRoot) {\n                parentOverlay === null || parentOverlay === void 0 ? void 0 : parentOverlay.feature();\n            }\n        }\n    }\n    obscure(nextOverlayInteraction) {\n        if (this.slot && nextOverlayInteraction === 'modal') {\n            this.removeAttribute('slot');\n            this.removeAttribute('aria-modal');\n            // Obscure upto and including the next modal root.\n            if (this.interaction !== 'modal') {\n                const parentOverlay = parentOverlayOf(this.trigger);\n                this._modalRoot = parentOverlay === null || parentOverlay === void 0 ? void 0 : parentOverlay.obscure(nextOverlayInteraction);\n                return this._modalRoot;\n            }\n            return this;\n        }\n        return undefined;\n    }\n    async firstUpdated(changedProperties) {\n        super.firstUpdated(changedProperties);\n        /* c8 ignore next */\n        if (!this.overlayContent || !this.trigger)\n            return;\n        this.stealOverlayContent(this.overlayContent);\n        this.state = 'active';\n        this.feature();\n        if (this.placement === 'none') {\n            this.style.setProperty('--swc-visual-viewport-height', `${window.innerHeight}px`);\n        }\n        else if (this.placement) {\n            await this.updateOverlayPosition();\n            document.addEventListener('sp-update-overlays', this.updateOverlayPosition);\n            window.addEventListener('scroll', this.updateOverlayPosition);\n        }\n        const actions = [];\n        if (this.placement && this.placement !== 'none') {\n            actions.push(this.applyContentAnimation('sp-overlay-fade-in'));\n        }\n        if (typeof this.overlayContent.updateComplete !==\n            'undefined') {\n            actions.push(this.overlayContent.updateComplete);\n        }\n        this.childrenReady = Promise.all(actions);\n    }\n    async openCallback() {\n        await this.updateComplete;\n        if (this.receivesFocus) {\n            await this.focus();\n        }\n        this.trigger.dispatchEvent(new CustomEvent('sp-opened', {\n            bubbles: true,\n            composed: true,\n            cancelable: true,\n            detail: {\n                interaction: this.interaction,\n            },\n        }));\n    }\n    open(openDetail) {\n        this.extractDetail(openDetail);\n    }\n    extractDetail(detail) {\n        this.overlayContent = detail.content;\n        this.overlayContentTip = detail.contentTip;\n        this.trigger = detail.trigger;\n        this.virtualTrigger = detail.virtualTrigger;\n        this.placement = detail.placement;\n        this.offset = detail.offset;\n        this.skidding = detail.skidding || 0;\n        this.interaction = detail.interaction;\n        this.theme = detail.theme;\n        this.receivesFocus = detail.receivesFocus;\n    }\n    dispose() {\n        /* c8 ignore next */\n        if (this.state !== 'dispose')\n            return;\n        /* c8 ignore next 4 */\n        if (this.timeout) {\n            clearTimeout(this.timeout);\n            delete this.timeout;\n        }\n        this.trigger.removeEventListener('keydown', this.handleInlineTriggerKeydown);\n        this.returnOverlayContent();\n        this.state = 'disposed';\n        if (this.willNotifyClosed) {\n            this.overlayContent.dispatchEvent(new Event('sp-overlay-closed'));\n            this.willNotifyClosed = false;\n        }\n    }\n    stealOverlayContent(element) {\n        this.originalPlacement = element.getAttribute('placement');\n        this.restoreContent = reparentChildren([element], this, {\n            position: 'beforeend',\n            prepareCallback: (el) => {\n                const slotName = el.slot;\n                const placement = el.placement;\n                el.removeAttribute('slot');\n                return (el) => {\n                    el.slot = slotName;\n                    el.placement = placement;\n                };\n            },\n        });\n        this.stealOverlayContentResolver();\n    }\n    returnOverlayContent() {\n        /* c8 ignore next */\n        if (!this.restoreContent)\n            return;\n        const [element] = this.restoreContent();\n        this.restoreContent = undefined;\n        this.willNotifyClosed = true;\n        if (this.originalPlacement) {\n            element.setAttribute('placement', this.originalPlacement);\n            delete this.originalPlacement;\n        }\n    }\n    async hide(animated = true) {\n        this.state = 'hiding';\n        if (animated) {\n            await this.applyContentAnimation('sp-overlay-fade-out');\n        }\n        this.state = 'dispose';\n    }\n    schedulePositionUpdate() {\n        // Edge needs a little time to update the DOM before computing the layout\n        cancelAnimationFrame(this.positionAnimationFrame);\n        this.positionAnimationFrame = requestAnimationFrame(() => this.updateOverlayPosition());\n    }\n    onSlotChange() {\n        this.schedulePositionUpdate();\n    }\n    applyContentAnimation(animation) {\n        if (this.placement === 'none') {\n            return Promise.resolve(true);\n        }\n        return new Promise((resolve) => {\n            const contents = this.shadowRoot.querySelector('#contents');\n            const doneHandler = (event) => {\n                if (animation !== event.animationName)\n                    return;\n                contents.removeEventListener('animationend', doneHandler);\n                contents.removeEventListener('animationcancel', doneHandler);\n                this.animating = false;\n                resolve(event.type === 'animationcancel');\n            };\n            contents.addEventListener('animationend', doneHandler);\n            contents.addEventListener('animationcancel', doneHandler);\n            contents.style.animationName = animation;\n            this.animating = true;\n        });\n    }\n    renderTheme(content) {\n        const { color, scale, lang, theme } = this.theme;\n        return html `\n            <sp-theme\n                theme=${ifDefined(theme)}\n                color=${ifDefined(color)}\n                scale=${ifDefined(scale)}\n                lang=${ifDefined(lang)}\n                part=\"theme\"\n            >\n                ${content}\n            </sp-theme>\n        `;\n    }\n    render() {\n        const content = html `\n            <div id=\"contents\">\n                <slot @slotchange=${this.onSlotChange}></slot>\n            </div>\n        `;\n        return this.hasTheme ? this.renderTheme(content) : content;\n    }\n    static create(details) {\n        const overlay = new ActiveOverlay();\n        if (details.content) {\n            overlay.open(details);\n        }\n        return overlay;\n    }\n    async getUpdateComplete() {\n        const actions = [\n            super.getUpdateComplete(),\n            this.stealOverlayContentPromise,\n        ];\n        if (this.childrenReady) {\n            actions.push(this.childrenReady);\n        }\n        const [complete] = await Promise.all(actions);\n        return complete;\n    }\n    disconnectedCallback() {\n        document.removeEventListener('sp-update-overlays', this.updateOverlayPosition);\n        window.removeEventListener('scroll', this.updateOverlayPosition);\n        super.disconnectedCallback();\n    }\n}\n__decorate([\n    property()\n], ActiveOverlay.prototype, \"_state\", void 0);\n__decorate([\n    property({ reflect: true, type: Boolean })\n], ActiveOverlay.prototype, \"animating\", void 0);\n__decorate([\n    property({ reflect: true })\n], ActiveOverlay.prototype, \"placement\", void 0);\n__decorate([\n    property({ attribute: false })\n], ActiveOverlay.prototype, \"theme\", void 0);\n__decorate([\n    property({ attribute: false })\n], ActiveOverlay.prototype, \"receivesFocus\", void 0);\n//# sourceMappingURL=ActiveOverlay.js.map","/*\nCopyright 2020 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\nconst DEFAULT_WARMUP = 1000;\nconst DEFAULT_COOLDOWN = 1000;\n/**\n * A timer to help with implementation of warnup/cooldown behavior as described here:\n * https://spectrum.adobe.com/page/tooltip/#Immediate-or-delayed-appearance\n */\nexport class OverlayTimer {\n    constructor(options = {}) {\n        this.warmUpDelay = DEFAULT_WARMUP;\n        this.coolDownDelay = DEFAULT_COOLDOWN;\n        this.isWarm = false;\n        this.timeout = 0;\n        Object.assign(this, options);\n    }\n    async openTimer(component) {\n        this.cancelCooldownTimer();\n        if (!this.component || component !== this.component) {\n            if (this.component) {\n                this.close(this.component);\n                this.cancelCooldownTimer();\n            }\n            this.component = component;\n            if (this.isWarm) {\n                return false;\n            }\n            this.promise = new Promise((resolve) => {\n                this.resolve = resolve;\n                this.timeout = window.setTimeout(() => {\n                    if (this.resolve) {\n                        this.resolve(false);\n                        this.isWarm = true;\n                    }\n                }, this.warmUpDelay);\n            });\n            return this.promise;\n        }\n        else if (this.promise) {\n            return this.promise;\n        }\n        else {\n            // This should never happen\n            throw new Error('Inconsistent state');\n        }\n    }\n    close(component) {\n        if (this.component && this.component === component) {\n            this.resetCooldownTimer();\n            if (this.timeout > 0) {\n                clearTimeout(this.timeout);\n                this.timeout = 0;\n            }\n            if (this.resolve) {\n                this.resolve(true);\n                delete this.resolve;\n            }\n            delete this.promise;\n            delete this.component;\n        }\n    }\n    resetCooldownTimer() {\n        if (this.isWarm) {\n            if (this.cooldownTimeout) {\n                window.clearTimeout(this.cooldownTimeout);\n            }\n            this.cooldownTimeout = window.setTimeout(() => {\n                this.isWarm = false;\n                delete this.cooldownTimeout;\n            }, this.coolDownDelay);\n        }\n    }\n    cancelCooldownTimer() {\n        if (this.cooldownTimeout) {\n            window.clearTimeout(this.cooldownTimeout);\n        }\n        delete this.cooldownTimeout;\n    }\n}\n//# sourceMappingURL=overlay-timer.js.map","/*\nCopyright 2020 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\nimport { ActiveOverlay } from './src/ActiveOverlay.js';\ncustomElements.define('active-overlay', ActiveOverlay);\n//# sourceMappingURL=active-overlay.js.map","/*\nCopyright 2020 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\nimport { OverlayStack } from './overlay-stack.js';\n/**\n * This class allows access to the overlay system which allows a client to\n * position an element in the overlay positioned relative to another node.\n */\nexport class Overlay {\n    /**\n     *\n     * @param owner the parent element we will use to position the overlay element\n     * @param interaction the type of interaction that caused this overlay to be shown\n     * @param overlayElement the item to display as an overlay\n     */\n    constructor(owner, interaction, overlayElement) {\n        this.isOpen = false;\n        this.owner = owner;\n        this.overlayElement = overlayElement;\n        this.interaction = interaction;\n    }\n    /**\n     * Open an overlay\n     *\n     * @param owner the parent element we will use to position the overlay element\n     * @param interaction the type of interaction that caused this overlay to be shown\n     * @param overlayElement the item to display as an overlay\n     * @param options display parameters\n     * @param options.delayed if true delay opening of the overlay based on the global warmup/cooldown timer\n     * @param options.offset distance to offset the overlay\n     * @param options.placement side on which to position the overlay\n     * @returns an Overlay object which can be used to close the overlay\n     */\n    static async open(owner, interaction, overlayElement, options) {\n        const overlay = new Overlay(owner, interaction, overlayElement);\n        await overlay.open(options);\n        return () => {\n            overlay.close();\n        };\n    }\n    static update() {\n        const overlayUpdateEvent = new CustomEvent('sp-update-overlays', {\n            bubbles: true,\n            composed: true,\n            cancelable: true,\n        });\n        document.dispatchEvent(overlayUpdateEvent);\n    }\n    /**\n     * Open an overlay\n     *\n     * @param options display parameters\n     * @param options.delayed delay before opening the overlay\n     * @param options.offset distance to offset the overlay\n     * @param options.placement side on which to position the overlay\n     * @returns a Promise that resolves to true if this operation was cancelled\n     */\n    async open({ abortPromise, delayed, offset = 0, placement = 'top', receivesFocus, notImmediatelyClosable, virtualTrigger, }) {\n        /* c8 ignore next */\n        if (this.isOpen)\n            return true;\n        if (delayed === undefined) {\n            delayed = this.overlayElement.hasAttribute('delayed');\n        }\n        const queryThemeDetail = {\n            color: undefined,\n            scale: undefined,\n            lang: undefined,\n            theme: undefined,\n        };\n        const queryThemeEvent = new CustomEvent('sp-query-theme', {\n            bubbles: true,\n            composed: true,\n            detail: queryThemeDetail,\n            cancelable: true,\n        });\n        this.owner.dispatchEvent(queryThemeEvent);\n        const overlayDetailQuery = {};\n        const queryOverlayDetailEvent = new CustomEvent('sp-overlay-query', {\n            bubbles: true,\n            composed: true,\n            detail: overlayDetailQuery,\n            cancelable: true,\n        });\n        this.overlayElement.dispatchEvent(queryOverlayDetailEvent);\n        await Overlay.overlayStack.openOverlay(Object.assign({ abortPromise, content: this.overlayElement, contentTip: overlayDetailQuery.overlayContentTipElement, delayed, offset: offset, placement: placement, trigger: this.owner, interaction: this.interaction, theme: queryThemeDetail, receivesFocus,\n            notImmediatelyClosable,\n            virtualTrigger }, overlayDetailQuery));\n        this.isOpen = true;\n        return true;\n    }\n    /**\n     * Close the overlay if it is open\n     */\n    close() {\n        Overlay.overlayStack.closeOverlay(this.overlayElement);\n    }\n}\nOverlay.overlayStack = new OverlayStack();\n/**\n * Announces that an overlay-based UI element has opened\n * @event sp-open\n * @type {object}\n * @property {TriggerInteractions} interaction type of interaction that triggered the opening\n */\n/**\n * Announces that an overlay-based UI element has opened\n * @event sp-close\n * @type {object}\n * @property {TriggerInteractions} interaction type of interaction that triggered the closing\n */\n//# sourceMappingURL=overlay.js.map","/*\nCopyright 2020 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\nimport { ActiveOverlay } from './ActiveOverlay.js';\nimport { OverlayTimer } from './overlay-timer.js';\nimport '../active-overlay.js';\nfunction isLeftClick(event) {\n    return event.button === 0;\n}\nfunction hasModifier(event) {\n    return !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\n}\nexport class OverlayStack {\n    constructor() {\n        this.overlays = [];\n        this.preventMouseRootClose = false;\n        this.root = document.body;\n        this.handlingResize = false;\n        this.overlayTimer = new OverlayTimer();\n        this.canTabTrap = true;\n        this.trappingInited = false;\n        this._eventsAreBound = false;\n        this._bodyMarginsApplied = false;\n        this.forwardContextmenuEvent = async (event) => {\n            const topOverlay = this.overlays[this.overlays.length - 1];\n            if (!this.trappingInited ||\n                topOverlay.interaction !== 'modal' ||\n                event.target !== this.overlayHolder) {\n                return;\n            }\n            event.stopPropagation();\n            event.preventDefault();\n            await this.closeTopOverlay();\n            let target = document.elementFromPoint(event.clientX, event.clientY);\n            while (target === null || target === void 0 ? void 0 : target.shadowRoot) {\n                const innerTarget = target.shadowRoot.elementFromPoint(event.clientX, event.clientY);\n                if (!innerTarget || innerTarget === target) {\n                    break;\n                }\n                target = innerTarget;\n            }\n            target === null || target === void 0 ? void 0 : target.dispatchEvent(new MouseEvent('contextmenu', event));\n        };\n        this.handleMouseCapture = (event) => {\n            const topOverlay = this.topOverlay;\n            if (!event.target ||\n                !topOverlay ||\n                !topOverlay.overlayContent ||\n                hasModifier(event) ||\n                !isLeftClick(event)) {\n                this.preventMouseRootClose = true;\n                return;\n            }\n            if (event.target instanceof Node) {\n                const path = event.composedPath();\n                if (path.indexOf(topOverlay.overlayContent) >= 0) {\n                    this.preventMouseRootClose = true;\n                    return;\n                }\n                this.preventMouseRootClose = false;\n            }\n        };\n        /**\n         * A \"longpress\" occurs before the \"click\" that creates it has occured.\n         * In that way the first click will still be part of the \"longpress\" and\n         * not part of closing the overlay.\n         */\n        this._doesNotCloseOnFirstClick = false;\n        this.handleMouse = (event) => {\n            if (this._doesNotCloseOnFirstClick) {\n                this._doesNotCloseOnFirstClick = false;\n                return;\n            }\n            if (this.preventMouseRootClose || event.defaultPrevented) {\n                return;\n            }\n            this.closeTopOverlay(true);\n        };\n        this.handleKeyUp = (event) => {\n            if (event.code === 'Escape') {\n                this.closeTopOverlay();\n            }\n        };\n        this.handleResize = () => {\n            if (this.handlingResize)\n                return;\n            this.handlingResize = true;\n            requestAnimationFrame(async () => {\n                const promises = this.overlays.map((overlay) => overlay.updateOverlayPosition());\n                await Promise.all(promises);\n                this.handlingResize = false;\n            });\n        };\n    }\n    initTabTrapping() {\n        if (this.trappingInited)\n            return;\n        this.trappingInited = true;\n        /* c8 ignore next 4 */\n        if (this.document.body.shadowRoot) {\n            this.canTabTrap = false;\n            return;\n        }\n        this.document.body.attachShadow({ mode: 'open' });\n        /* c8 ignore next 3 */\n        if (!this.document.body.shadowRoot) {\n            return;\n        }\n        const root = this.document.body.shadowRoot;\n        root.innerHTML = `\n            <style>\n            :host {\n                position: relative;\n            }\n            #actual {\n                position: relative;\n                height: calc(100% - var(--swc-body-margins-block, 0px));\n                z-index: 0;\n                min-height: calc(100vh - var(--swc-body-margins-block, 0px));\n            }\n            #holder {\n                display: none;\n                align-items: center;\n                justify-content: center;\n                flex-flow: column;\n                width: 100%;\n                height: 100%;\n                position: absolute;\n                top: 0;\n                left: 0;\n            }\n            [name=\"open\"]::slotted(*) {\n                pointer-events: all;\n            }\n            #actual[aria-hidden] + #holder {\n                display: flex;\n            }\n            </style>\n            <div id=\"actual\"><slot></slot></div>\n            <div id=\"holder\"><slot name=\"open\"></slot></div>\n        `;\n        this.tabTrapper = root.querySelector('#actual');\n        this.overlayHolder = root.querySelector('#holder');\n        this.tabTrapper.attachShadow({ mode: 'open' });\n        if (this.tabTrapper.shadowRoot) {\n            this.tabTrapper.shadowRoot.innerHTML = '<slot></slot>';\n        }\n        this.overlayHolder.addEventListener('contextmenu', this.forwardContextmenuEvent, true);\n        requestAnimationFrame(() => {\n            this.applyBodyMargins();\n            const observer = new ResizeObserver(() => {\n                this.applyBodyMargins();\n            });\n            observer.observe(document.body);\n        });\n    }\n    applyBodyMargins() {\n        const { marginLeft, marginRight, marginTop, marginBottom } = getComputedStyle(document.body);\n        const allZero = parseFloat(marginLeft) === 0 &&\n            parseFloat(marginRight) === 0 &&\n            parseFloat(marginTop) === 0 &&\n            parseFloat(marginBottom) === 0;\n        if (allZero && !this._bodyMarginsApplied) {\n            return;\n        }\n        this.tabTrapper.style.setProperty('--swc-body-margins-inline', `calc(${marginLeft} + ${marginRight})`);\n        this.tabTrapper.style.setProperty('--swc-body-margins-block', `calc(${marginTop} + ${marginBottom})`);\n        this._bodyMarginsApplied = !allZero;\n    }\n    startTabTrapping() {\n        this.initTabTrapping();\n        /* c8 ignore next 3 */\n        if (!this.canTabTrap) {\n            return;\n        }\n        this.tabTrapper.tabIndex = -1;\n        this.tabTrapper.setAttribute('aria-hidden', 'true');\n    }\n    stopTabTrapping() {\n        /* c8 ignore next 3 */\n        if (!this.canTabTrap || !this.trappingInited) {\n            return;\n        }\n        this.tabTrapper.removeAttribute('tabindex');\n        this.tabTrapper.removeAttribute('aria-hidden');\n    }\n    get document() {\n        return this.root.ownerDocument /* c8 ignore next */ || document;\n    }\n    get topOverlay() {\n        return this.overlays.slice(-1)[0];\n    }\n    findOverlayForContent(overlayContent) {\n        for (const item of this.overlays) {\n            if (overlayContent === item.overlayContent) {\n                return item;\n            }\n        }\n        return undefined;\n    }\n    addEventListeners() {\n        if (this._eventsAreBound)\n            return;\n        this._eventsAreBound = true;\n        this.document.addEventListener('click', this.handleMouseCapture, true);\n        this.document.addEventListener('click', this.handleMouse);\n        this.document.addEventListener('keyup', this.handleKeyUp);\n        window.addEventListener('resize', this.handleResize);\n    }\n    isClickOverlayActiveForTrigger(trigger) {\n        return this.overlays.some((item) => trigger === item.trigger && item.interaction === 'click');\n    }\n    async openOverlay(details) {\n        this.addEventListeners();\n        if (this.findOverlayForContent(details.content)) {\n            return false;\n        }\n        if (details.notImmediatelyClosable) {\n            this._doesNotCloseOnFirstClick = true;\n        }\n        if (details.interaction === 'modal') {\n            this.startTabTrapping();\n        }\n        const contentWithLifecycle = details.content;\n        if (contentWithLifecycle.overlayWillOpenCallback) {\n            const { trigger } = details;\n            contentWithLifecycle.overlayWillOpenCallback({ trigger });\n        }\n        if (details.delayed) {\n            const cancelledPromise = this.overlayTimer.openTimer(details.content);\n            const promises = [cancelledPromise];\n            if (details.abortPromise) {\n                promises.push(details.abortPromise);\n            }\n            const cancelled = await Promise.race(promises);\n            if (cancelled) {\n                if (contentWithLifecycle.overlayOpenCancelledCallback) {\n                    const { trigger } = details;\n                    contentWithLifecycle.overlayOpenCancelledCallback({\n                        trigger,\n                    });\n                }\n                return cancelled;\n            }\n        }\n        if (details.interaction === 'click') {\n            this.closeAllHoverOverlays();\n        }\n        else if (details.interaction === 'hover' &&\n            this.isClickOverlayActiveForTrigger(details.trigger)) {\n            // Don't show a hover popover if the click popover is already active\n            return true;\n        }\n        const activeOverlay = ActiveOverlay.create(details);\n        if (this.overlays.length) {\n            const topOverlay = this.overlays[this.overlays.length - 1];\n            topOverlay.obscure(activeOverlay.interaction);\n        }\n        document.body.appendChild(activeOverlay);\n        /**\n         * The following work to make the new overlay the \"top\" of the stack\n         * has to happen AFTER the current call stack completes in case there\n         * is work there in to remove the previous \"top\" overlay.\n         */\n        return new Promise((res) => requestAnimationFrame(res)).then(async () => {\n            this.overlays.push(activeOverlay);\n            await activeOverlay.updateComplete;\n            this.addOverlayEventListeners(activeOverlay);\n            if (typeof contentWithLifecycle.open !== 'undefined') {\n                contentWithLifecycle.open = true;\n            }\n            if (contentWithLifecycle.overlayOpenCallback) {\n                const { trigger } = activeOverlay;\n                contentWithLifecycle.overlayOpenCallback({ trigger });\n            }\n            activeOverlay.openCallback();\n            return false;\n        });\n    }\n    addOverlayEventListeners(activeOverlay) {\n        activeOverlay.addEventListener('close', ((event) => {\n            var _a;\n            this.hideAndCloseOverlay(activeOverlay, true, // animated?\n            !!((_a = event.detail) === null || _a === void 0 ? void 0 : _a.reason) // clickAway?\n            );\n        }));\n        switch (activeOverlay.interaction) {\n            case 'replace':\n                this.addReplaceOverlayEventListeners(activeOverlay);\n                break;\n            case 'inline':\n                this.addInlineOverlayEventListeners(activeOverlay);\n                break;\n        }\n    }\n    addReplaceOverlayEventListeners(activeOverlay) {\n        activeOverlay.addEventListener('keydown', (event) => {\n            const { code } = event;\n            /* c8 ignore next */\n            if (code !== 'Tab')\n                return;\n            event.stopPropagation();\n            this.closeOverlay(activeOverlay.overlayContent);\n            activeOverlay.tabbingAway = true;\n            activeOverlay.trigger.focus();\n            activeOverlay.trigger.dispatchEvent(new KeyboardEvent('keydown', event));\n        });\n    }\n    addInlineOverlayEventListeners(activeOverlay) {\n        activeOverlay.trigger.addEventListener('keydown', activeOverlay.handleInlineTriggerKeydown);\n        activeOverlay.addEventListener('keydown', (event) => {\n            const { code, shiftKey } = event;\n            /* c8 ignore next */\n            if (code !== 'Tab')\n                return;\n            activeOverlay.tabbingAway = true;\n            if (shiftKey) {\n                const returnFocusElement = document.createElement('span');\n                returnFocusElement.tabIndex = -1;\n                if (activeOverlay.trigger.hasAttribute('slot')) {\n                    returnFocusElement.slot = activeOverlay.trigger.slot;\n                }\n                activeOverlay.trigger.insertAdjacentElement('afterend', returnFocusElement);\n                returnFocusElement.focus();\n                returnFocusElement.remove();\n                return;\n            }\n            event.stopPropagation();\n            const triggerWithLifecycle = activeOverlay.trigger;\n            if (typeof triggerWithLifecycle.open !== 'undefined') {\n                triggerWithLifecycle.open = false;\n            }\n            this.closeOverlay(activeOverlay.overlayContent);\n            activeOverlay.trigger.focus();\n        });\n    }\n    closeOverlay(content) {\n        this.overlayTimer.close(content);\n        requestAnimationFrame(() => {\n            const overlay = this.findOverlayForContent(content);\n            this.hideAndCloseOverlay(overlay);\n        });\n    }\n    closeAllHoverOverlays() {\n        for (const overlay of this.overlays) {\n            if (overlay.interaction === 'hover') {\n                this.hideAndCloseOverlay(overlay, false);\n            }\n        }\n    }\n    async manageFocusAfterCloseWhenOverlaysRemain() {\n        const topOverlay = this.overlays[this.overlays.length - 1];\n        topOverlay.feature();\n        // Push focus in the the next remaining overlay as needed when a `type=\"modal\"` overlay exists.\n        if (topOverlay.interaction === 'modal' || topOverlay.hasModalRoot) {\n            await topOverlay.focus();\n        }\n        else {\n            this.stopTabTrapping();\n        }\n    }\n    manageFocusAfterCloseWhenLastOverlay(overlay) {\n        this.stopTabTrapping();\n        const isModal = overlay.interaction === 'modal';\n        const isReceivesFocus = overlay.receivesFocus === 'auto';\n        const isReplace = overlay.interaction === 'replace';\n        const isInline = overlay.interaction === 'inline';\n        const isTabbingAwayFromInlineOrReplace = (isReplace || isInline) && !overlay.tabbingAway;\n        overlay.tabbingAway = false;\n        if (!isModal && !isReceivesFocus && !isTabbingAwayFromInlineOrReplace) {\n            return;\n        }\n        // Manage post closure focus when needed.\n        const overlayRoot = overlay.overlayContent.getRootNode();\n        const overlayContentActiveElement = overlayRoot.activeElement;\n        let triggerRoot;\n        let triggerActiveElement;\n        const contentContainsActiveElement = () => overlay.overlayContent.contains(overlayContentActiveElement);\n        const triggerRootContainsActiveElement = () => {\n            triggerRoot = overlay.trigger.getRootNode();\n            triggerActiveElement = triggerRoot.activeElement;\n            return triggerRoot.contains(triggerActiveElement);\n        };\n        const triggerHostIsActiveElement = () => triggerRoot.host && triggerRoot.host === triggerActiveElement;\n        // Return focus to the trigger as long as the user hasn't actively focused\n        // something outside of the current overlay interface; trigger, root, host.\n        if (isModal ||\n            contentContainsActiveElement() ||\n            triggerRootContainsActiveElement() ||\n            triggerHostIsActiveElement()) {\n            overlay.trigger.focus();\n        }\n    }\n    async hideAndCloseOverlay(overlay, animated, clickAway) {\n        if (!overlay) {\n            return;\n        }\n        const contentWithLifecycle = overlay.overlayContent;\n        if (typeof contentWithLifecycle.overlayWillCloseCallback !== 'undefined') {\n            const { trigger } = overlay;\n            if (contentWithLifecycle.overlayWillCloseCallback({ trigger })) {\n                return;\n            }\n        }\n        await overlay.hide(animated);\n        if (typeof contentWithLifecycle.open !== 'undefined') {\n            contentWithLifecycle.open = false;\n        }\n        if (contentWithLifecycle.overlayCloseCallback) {\n            const { trigger } = overlay;\n            contentWithLifecycle.overlayCloseCallback({ trigger });\n        }\n        if (overlay.state != 'dispose')\n            return;\n        const index = this.overlays.indexOf(overlay);\n        if (index >= 0) {\n            this.overlays.splice(index, 1);\n        }\n        if (this.overlays.length) {\n            await this.manageFocusAfterCloseWhenOverlaysRemain();\n        }\n        else {\n            this.manageFocusAfterCloseWhenLastOverlay(overlay);\n        }\n        overlay.remove();\n        overlay.dispose();\n        overlay.trigger.dispatchEvent(new CustomEvent('sp-closed', {\n            bubbles: true,\n            composed: true,\n            cancelable: true,\n            detail: {\n                interaction: overlay.interaction,\n                reason: clickAway ? 'external-click' : undefined,\n            },\n        }));\n    }\n    closeTopOverlay(clickAway) {\n        return this.hideAndCloseOverlay(this.topOverlay, true, clickAway);\n    }\n}\n//# sourceMappingURL=overlay-stack.js.map"],"names":["css","t","split","e","n","includes","r","i","o","a","reference","l","floating","s","c","x","width","f","y","height","u","m","g","d","p","top","right","bottom","left","platform","rects","elements","strategy","boundary","rootBoundary","elementContext","altBoundary","padding","h","getClippingRect","element","isElement","contextElement","getDocumentElement","w","convertOffsetParentRelativeRectToViewportRelativeRect","rect","offsetParent","getOffsetParent","Math","min","max","replace","main","cross","start","end","reduce","concat","b","name","options","[object Object]","placement","middlewareData","initialPlacement","mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment","v","R","A","P","T","flip","overflows","push","isRTL","every","O","D","index","data","reset","L","slice","sort","filter","alignmentAxis","limiter","fn","k","apply","getDimensions","document","location","alert","setInterval","window","ownerDocument","defaultView","getComputedStyle","nodeName","toLowerCase","HTMLElement","Element","ShadowRoot","overflow","overflowX","overflowY","test","navigator","userAgent","transform","perspective","contain","willChange","round","getBoundingClientRect","offsetWidth","offsetHeight","visualViewport","offsetLeft","offsetTop","Node","documentElement","scrollLeft","scrollTop","pageXOffset","pageYOffset","clientLeft","clientTop","assignedSlot","parentNode","host","position","W","body","C","E","clientWidth","clientHeight","scrollWidth","scrollHeight","direction","H","getRootNode","contains","S","getElementRects","getClientRects","Array","from","N","async","middleware","length","initial","states","idle","on","active","hiding","dispose","disposed","state","event","el","closest","closestOverlay","rootNode","constructor","super","this","stateTransition","num","devicePixelRatio","dpr","fonts","ready","Promise","resolve","offset","skidding","shift","size","floor","initialHeight","isConstrained","actualHeight","maxHeight","Object","assign","style","maxWidth","appliedHeight","overlayContentTip","centerOffset","arrow","virtualTrigger","trigger","roundByDPR","getAttribute","setAttribute","overlayContent","arrowX","arrowY","code","shiftKey","tabbingAway","dispatchEvent","stopPropagation","preventDefault","focus","stealOverlayContentPromise","res","stealOverlayContentResolver","_state","nextState","removeAttribute","firstFocusableIn","firstFocusable","updateComplete","activeElement","hasTheme","theme","color","scale","lang","styles","hasModalRoot","_modalRoot","feature","tabIndex","parentOverlayOf","parentOverlay","slot","interaction","obscure","nextOverlayInteraction","changedProperties","firstUpdated","stealOverlayContent","setProperty","innerHeight","updateOverlayPosition","addEventListener","actions","applyContentAnimation","childrenReady","all","receivesFocus","bubbles","composed","cancelable","detail","open","openDetail","extractDetail","content","contentTip","timeout","clearTimeout","removeEventListener","handleInlineTriggerKeydown","returnOverlayContent","willNotifyClosed","originalPlacement","restoreContent","reparentChildren","prepareCallback","slotName","undefined","animated","schedulePositionUpdate","cancelAnimationFrame","positionAnimationFrame","requestAnimationFrame","onSlotChange","animation","shadowRoot","querySelector","animationName","contents","doneHandler","animating","type","renderTheme","ifDefined","render","html","details","overlay","getUpdateComplete","complete","disconnectedCallback","__decorate","property","reflect","Boolean","attribute","component","cancelCooldownTimer","promise","close","isWarm","setTimeout","warmUpDelay","resetCooldownTimer","cooldownTimeout","coolDownDelay","customElements","define","ActiveOverlay","owner","overlayElement","overlayUpdateEvent","abortPromise","delayed","notImmediatelyClosable","isOpen","hasAttribute","queryThemeDetail","queryThemeEvent","overlayDetailQuery","queryOverlayDetailEvent","overlayStack","openOverlay","overlayContentTipElement","Overlay","closeOverlay","overlays","trappingInited","topOverlay","target","overlayHolder","closeTopOverlay","elementFromPoint","clientX","clientY","innerTarget","metaKey","altKey","ctrlKey","hasModifier","button","isLeftClick","composedPath","indexOf","preventMouseRootClose","_doesNotCloseOnFirstClick","defaultPrevented","handlingResize","map","promises","initTabTrapping","canTabTrap","attachShadow","mode","root","innerHTML","tabTrapper","forwardContextmenuEvent","applyBodyMargins","observe","marginLeft","marginRight","marginTop","marginBottom","parseFloat","allZero","_bodyMarginsApplied","startTabTrapping","stopTabTrapping","findOverlayForContent","item","addEventListeners","_eventsAreBound","handleMouseCapture","handleMouse","handleKeyUp","handleResize","isClickOverlayActiveForTrigger","some","contentWithLifecycle","overlayWillOpenCallback","overlayTimer","openTimer","race","cancelled","overlayOpenCancelledCallback","closeAllHoverOverlays","create","activeOverlay","appendChild","then","addOverlayEventListeners","overlayOpenCallback","openCallback","hideAndCloseOverlay","_a","reason","addReplaceOverlayEventListeners","addInlineOverlayEventListeners","createElement","returnFocusElement","insertAdjacentElement","remove","triggerWithLifecycle","manageFocusAfterCloseWhenLastOverlay","isReplace","isInline","isModal","isReceivesFocus","isTabbingAwayFromInlineOrReplace","overlayContentActiveElement","triggerRoot","triggerActiveElement","clickAway","overlayWillCloseCallback","hide","overlayCloseCallback","splice","manageFocusAfterCloseWhenOverlaysRemain"],"mappings":"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"}