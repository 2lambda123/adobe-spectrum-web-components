{"version":3,"file":"47debb83.js","sources":["../../../tools/theme/src/Theme.js"],"sourcesContent":["\"use strict\";import{supportsAdoptingStyleSheets as h}from\"@spectrum-web-components/base\";const d=[\"spectrum\",\"express\"],m=[\"medium\",\"large\",\"medium-express\",\"large-express\"],c=[\"light\",\"lightest\",\"dark\",\"darkest\",\"light-express\",\"lightest-express\",\"dark-express\",\"darkest-express\"],r=class extends HTMLElement{constructor(){super();this._dir=\"\";this._theme=\"spectrum\";this._color=\"\";this._scale=\"\";this.trackedChildren=new Set;this._updateRequested=!1;this._contextConsumers=new Map;this.attachShadow({mode:\"open\"});const e=document.importNode(r.template.content,!0);this.shadowRoot.appendChild(e),this.shouldAdoptStyles(),this.addEventListener(\"sp-query-theme\",this.onQueryTheme),this.addEventListener(\"sp-language-context\",this._handleContextPresence),this.updateComplete=this.__createDeferredPromise()}static get observedAttributes(){return[\"color\",\"scale\",\"theme\",\"lang\",\"dir\"]}set dir(e){if(e===this.dir)return;this.setAttribute(\"dir\",e),this._dir=e;const t=e===\"rtl\"?e:\"ltr\";this.trackedChildren.forEach(s=>{s.setAttribute(\"dir\",t)})}get dir(){return this._dir}attributeChangedCallback(e,t,s){t!==s&&(e===\"color\"?this.color=s:e===\"scale\"?this.scale=s:e===\"lang\"&&!!s?(this.lang=s,this._provideContext()):e===\"theme\"?this.theme=s:e===\"dir\"&&(this.dir=s))}requestUpdate(){window.ShadyCSS!==void 0&&!window.ShadyCSS.nativeShadow?window.ShadyCSS.styleElement(this):this.shouldAdoptStyles()}get theme(){const e=r.themeFragmentsByKind.get(\"theme\"),{name:t}=e&&e.get(\"default\")||{};return this._theme||t||\"\"}set theme(e){if(e===this._theme)return;const t=!!e&&d.includes(e)?e:this.theme;t!==this._theme&&(this._theme=t,this.requestUpdate()),t?this.setAttribute(\"theme\",t):this.removeAttribute(\"theme\")}get color(){const e=r.themeFragmentsByKind.get(\"color\"),{name:t}=e&&e.get(\"default\")||{};return this._color||t||\"\"}set color(e){if(e===this._color)return;const t=!!e&&c.includes(e)?e:this.color;t!==this._color&&(this._color=t,this.requestUpdate()),t?this.setAttribute(\"color\",t):this.removeAttribute(\"color\")}get scale(){const e=r.themeFragmentsByKind.get(\"scale\"),{name:t}=e&&e.get(\"default\")||{};return this._scale||t||\"\"}set scale(e){if(e===this._scale)return;const t=!!e&&m.includes(e)?e:this.scale;t!==this._scale&&(this._scale=t,this.requestUpdate()),t?this.setAttribute(\"scale\",t):this.removeAttribute(\"scale\")}get styles(){const e=[...r.themeFragmentsByKind.keys()],t=(a,i,n)=>{const o=n&&n!==\"theme\"&&this.theme===\"express\"?a.get(`${i}-express`):a.get(i),l=i===\"spectrum\"||!n||this.hasAttribute(n);if(o&&l)return o.styles};return[...e.reduce((a,i)=>{const n=r.themeFragmentsByKind.get(i);let o;if(i===\"app\"||i===\"core\")o=t(n,i);else{const{[i]:l}=this;o=t(n,l,i)}return o&&a.push(o),a},[])]}static get template(){return this.templateElement||(this.templateElement=document.createElement(\"template\"),this.templateElement.innerHTML=\"<slot></slot>\"),this.templateElement}__createDeferredPromise(){return new Promise(e=>{this.__resolve=e})}onQueryTheme(e){if(e.defaultPrevented)return;e.preventDefault();const{detail:t}=e;t.color=this.color||void 0,t.scale=this.scale||void 0,t.lang=this.lang||document.documentElement.lang||navigator.language,t.theme=this.theme||void 0}connectedCallback(){if(this.shouldAdoptStyles(),window.ShadyCSS!==void 0&&window.ShadyCSS.styleElement(this),r.instances.add(this),!this.hasAttribute(\"dir\")){let e=this.assignedSlot||this.parentNode;for(;e!==document.documentElement&&!(e instanceof r);)e=e.assignedSlot||e.parentNode||e.host;this.dir=e.dir===\"rtl\"?e.dir:\"ltr\"}}disconnectedCallback(){r.instances.delete(this)}startManagingContentDirection(e){this.trackedChildren.add(e)}stopManagingContentDirection(e){this.trackedChildren.delete(e)}async shouldAdoptStyles(){this._updateRequested||(this.updateComplete=this.__createDeferredPromise(),this._updateRequested=!0,this._updateRequested=await!1,this.adoptStyles(),this.__resolve(!0))}adoptStyles(){const e=this.styles;if(window.ShadyCSS!==void 0&&!window.ShadyCSS.nativeShadow&&window.ShadyCSS.ScopingShim){const t=[];for(const[s,a]of r.themeFragmentsByKind)for(const[i,{styles:n}]of a){if(i===\"default\")continue;let o=n.cssText;r.defaultFragments.has(i)||(o=o.replace(\":host\",`:host([${s}='${i}'])`)),t.push(o)}window.ShadyCSS.ScopingShim.prepareAdoptedCssText(t,this.localName),window.ShadyCSS.prepareTemplate(r.template,this.localName)}else if(h){const t=[];for(const s of e)t.push(s.styleSheet);this.shadowRoot.adoptedStyleSheets=t}else this.shadowRoot.querySelectorAll(\"style\").forEach(s=>s.remove()),e.forEach(s=>{const a=document.createElement(\"style\");a.textContent=s.cssText,this.shadowRoot.appendChild(a)})}static registerThemeFragment(e,t,s){const a=r.themeFragmentsByKind.get(t)||new Map;a.size===0&&(r.themeFragmentsByKind.set(t,a),a.set(\"default\",{name:e,styles:s}),r.defaultFragments.add(e)),a.set(e,{name:e,styles:s}),r.instances.forEach(i=>i.shouldAdoptStyles())}_provideContext(){this._contextConsumers.forEach(([e,t])=>e(this.lang,t))}_handleContextPresence(e){const t=e.composedPath()[0];if(this._contextConsumers.has(t))return;this._contextConsumers.set(t,[e.detail.callback,()=>this._contextConsumers.delete(t)]);const[s,a]=this._contextConsumers.get(t)||[];s&&a&&s(this.lang||document.documentElement.lang||navigator.language,a)}};export let Theme=r;Theme.themeFragmentsByKind=new Map,Theme.defaultFragments=new Set([\"spectrum\"]),Theme.instances=new Set;\n//# sourceMappingURL=Theme.js.map\n"],"names":["ScaleValues","ColorValues","_Theme","constructor","super","this","_theme","_color","_scale","trackedChildren","_updateRequested","_contextConsumers","attachShadow","mode","document","importNode","template","content","shadowRoot","appendChild","node","shouldAdoptStyles","addEventListener","onQueryTheme","_handleContextPresence","updateComplete","__createDeferredPromise","dir","setAttribute","_dir","forEach","el","targetDir","attrName","old","value","color","scale","lang","_provideContext","theme","window","ShadyCSS","nativeShadow","styleElement","themeFragmentsByKind","get","name","themeFragments","newValue","ThemeVariantValues","includes","requestUpdate","removeAttribute","keys","getStyle","fragments","kind","isAppliedFragment","hasAttribute","currentStyles","styles","themeKinds","reduce","acc","style","kindFragments","push","templateElement","createElement","innerHTML","resolve","__resolve","event","defaultPrevented","preventDefault","detail","documentElement","navigator","language","instances","add","assignedSlot","parentNode","dirParent","host","delete","async","adoptStyles","ScopingShim","cssText","defaultFragments","has","replace","fragmentCSS","prepareAdoptedCssText","localName","prepareTemplate","supportsAdoptingStyleSheets","styleSheets","styleSheet","adoptedStyleSheets","querySelectorAll","element","remove","s","textContent","static","fragmentMap","size","set","instance","callback","unsubscribe","composedPath","target","Theme"],"mappings":"kCAyDA,QAA2B,CAAC,WAAY,WAClCA,EAAc,CAAC,SAAU,QAAS,iBAAkB,iBACpDC,EAAc,CAChB,QACA,WACA,OACA,UACA,gBACA,mBACA,eACA,mBAyBSC,EAAN,0BAgQHC,cACIC,QAvPJC,UAA2B,GAqD3BA,KAAQC,OAA4B,WAiCpCD,KAAQE,OAAqB,GAiC7BF,KAAQG,OAAqB,GA+M7BH,KAAQI,gBAAoC,QAE5CJ,KAAQK,kBAAmB,EAmF3BL,KAAQM,kBAAoB,QAnKxBN,KAAKO,aAAa,CAAEC,KAAM,SAC1B,QAAaC,SAASC,WAAWb,EAAMc,SAASC,SAAS,GACzDZ,KAAKa,WAAWC,YAAYC,GAC5Bf,KAAKgB,oBACLhB,KAAKiB,iBACD,iBACAjB,KAAKkB,cAETlB,KAAKiB,iBACD,sBACAjB,KAAKmB,wBAETnB,KAAKoB,eAAiBpB,KAAKqB,yBAxQ/B,iCACI,MAAO,CAAC,QAAS,QAAS,QAAS,OAAQ,MAK/C,SAAiBC,GACb,GAAIA,IAAQtB,KAAKsB,IAAK,OACtBtB,KAAKuB,aAAa,MAAOD,GACzBtB,KAAKwB,KAAOF,EACZ,QAA0B,QAARA,EAAgBA,EAAM,MACxCtB,KAAKI,gBAAgBqB,SAASC,IAC1BA,EAAGH,aAAa,MAAOI,KAS/B,WACI,YAAYH,IAGN,0BACNI,EACAC,EACAC,GAEID,IAAQC,IAGK,UAAbF,EACA5B,KAAK+B,MAAQD,EACO,UAAbF,EACP5B,KAAKgC,MAAQF,EACO,SAAbF,GAAyBE,GAChC9B,KAAKiC,KAAOH,EACZ9B,KAAKkC,mBACe,UAAbN,EACP5B,KAAKmC,MAAQL,EACO,QAAbF,IACP5B,KAAKsB,IAAMQ,GAIX,sBACoB,IAApBM,OAAOC,UAA2BD,OAAOC,SAASC,aAGlDtC,KAAKgB,oBAFLoB,OAAOC,SAASE,aAAavC,KAiBrC,aACI,QAAuBH,EAAM2C,qBAAqBC,IAAI,UAC9CC,QACHC,GAAkBA,EAAeF,IAAI,YAAe,GACzD,YAAYxC,QAAWyC,GAAyB,EAGpD,WAAUE,GACN,GAAIA,IAAa5C,KAAKC,OAAQ,OAC9B,QACM2C,GAAYC,EAAmBC,SAASF,GACpCA,EACA5C,KAAKmC,MACXA,IAAUnC,KAAKC,SACfD,KAAKC,OAASkC,EACdnC,KAAK+C,iBAELZ,EACAnC,KAAKuB,aAAa,QAASY,GAE3BnC,KAAKgD,gBAAgB,QAa7B,aACI,QAAuBnD,EAAM2C,qBAAqBC,IAAI,UAC9CC,QACHC,GAAkBA,EAAeF,IAAI,YAAe,GACzD,YAAYvC,QAAWwC,GAAkB,EAG7C,WAAUE,GACN,GAAIA,IAAa5C,KAAKE,OAAQ,OAC9B,QACM0C,GAAYhD,EAAYkD,SAASF,GAC7BA,EACA5C,KAAK+B,MACXA,IAAU/B,KAAKE,SACfF,KAAKE,OAAS6B,EACd/B,KAAK+C,iBAELhB,EACA/B,KAAKuB,aAAa,QAASQ,GAE3B/B,KAAKgD,gBAAgB,QAa7B,aACI,QAAuBnD,EAAM2C,qBAAqBC,IAAI,UAC9CC,QACHC,GAAkBA,EAAeF,IAAI,YAAe,GACzD,YAAYtC,QAAWuC,GAAkB,EAG7C,WAAUE,GACN,GAAIA,IAAa5C,KAAKG,OAAQ,OAC9B,QACMyC,GAAYjD,EAAYmD,SAASF,GAC7BA,EACA5C,KAAKgC,MACXA,IAAUhC,KAAKG,SACfH,KAAKG,OAAS6B,EACdhC,KAAK+C,iBAELf,EACAhC,KAAKuB,aAAa,QAASS,GAE3BhC,KAAKgD,gBAAgB,QAI7B,cACI,QAAmC,IAC5BnD,EAAM2C,qBAAqBS,QAE5BC,EAAW,CACbC,EACAT,EACAU,KAEA,QACIA,GAAiB,UAATA,GAAmC,YAAfpD,KAAKmC,MAC3BgB,EAAUV,IAAI,GAAGC,aACjBS,EAAUV,IAAIC,GAElBW,EACO,aAATX,IAAwBU,GAAQpD,KAAKsD,aAAaF,GACtD,GAAIG,GAAiBF,EACjB,SAAqBG,MAArB,EAkER,MAAO,IA9DQC,EAAWC,QAAO,CAACC,EAAKP,KACnC,QAAsBvD,EAAM2C,qBAAqBC,IAC7CW,GAEJ,MACA,GAAa,QAATA,GAA2B,SAATA,EAClBQ,EAAQV,EAASW,EAAeT,OAC7B,CACH,OAASA,GAAOV,GAAS1C,KACzB4D,EAAQV,EAASW,EAA6BnB,EAAMU,EAExD,WACIO,EAAIG,KAAKF,GAEND,CAHP,GAID,IAkDP,uBACI,YAAUI,kBACN/D,KAAK+D,gBAAkBtD,SAASuD,cAAc,YAC9ChE,KAAK+D,gBAAgBE,UAAY,iBAE9BjE,KAAK+D,eAuBR,2BACJ,oBAAoBG,IAChBlE,KAAKmE,UAAYD,CAAjB,GAIA,cAAaE,GACjB,GAAIA,EAAMC,iBACN,OAEJD,EAAME,iBACN,MAAQC,OAAQpC,GAAUiC,EAC1BjC,EAAMJ,MAAQ/B,KAAK+B,YAAS,EAC5BI,EAAMH,MAAQhC,KAAKgC,YAAS,EAC5BG,EAAMF,KACFjC,KAAKiC,MAAQxB,SAAS+D,gBAAgBvC,MAAQwC,UAAUC,SAC5DvC,EAAMA,MAAQnC,KAAKmC,YAAS,CAGtB,qBAUN,GATAnC,KAAKgB,yBAImB,IAApBoB,OAAOC,UACPD,OAAOC,SAASE,aAAavC,MAGjCH,EAAM8E,UAAUC,IAAI5E,OACfA,KAAKsD,aAAa,OAAQ,CAC3B,MAAkBtD,KAAqB6E,cACnC7E,KAAK8E,WACT,KACIC,IAActE,SAAS+D,mBACrBO,iBAEFA,EAAcA,EAA0BF,cACpCE,EAAUD,YACTC,EAAyBC,KAKlChF,KAAKsB,IAAwB,QAAlByD,EAAUzD,IAAgByD,EAAUzD,IAAM,KAE7D,CAEU,wBAENzB,EAAM8E,UAAUM,OAAOjF,KAGpB,+BAA8B0B,GACjC1B,KAAKI,gBAAgBwE,IAAIlD,EAGtB,8BAA6BA,GAChC1B,KAAKI,gBAAgB6E,OAAOvD,EAOhC,CAAcwD,0BACLlF,KAAKK,mBACNL,KAAKoB,eAAiBpB,KAAKqB,0BAC3BrB,KAAKK,kBAAmB,EACxBL,KAAKK,uBAAyB,EAC9BL,KAAKmF,cACLnF,KAAKmE,WAAU,GAIb,eACN,QAAenE,KAAKwD,OAOC,QACG,IAApBpB,OAAOC,WACND,OAAOC,SAASC,cACjBF,OAAOC,SAAS+C,YAClB,CAKE,QAA8B,GAC9B,UAAYhC,EAAMD,OAAoBX,qBAClC,UAAYE,GAAQc,eAAwB,CACxC,GAAa,YAATd,EAAoB,SACxB,MAAec,EAAqB6B,QAC/BxF,EAAMyF,iBAAiBC,IAAI7C,KAC5B2C,EAAUA,EAAQG,QACd,QACA,UAAUpC,MAASV,SAG3B+C,EAAY3B,KAAKuB,EAGzB,QAAOhD,SAAS+C,YAAYM,sBACxBD,EACAzF,KAAK2F,WAETvD,OAAOC,SAASuD,gBAAgB/F,EAAMc,SAAUX,KAAK2F,UACzD,SAAWE,EAA6B,CACpC,QAAqC,GACrC,iBACIC,EAAYhC,KACPF,EAAoBmC,YAG7B/F,KAAKa,WAAWmF,mBAAqBF,CACzC,WAC4BjF,WAAWoF,iBAAiB,SACzCxE,SAASyE,GAAYA,EAAQC,WACxC3C,EAAO/B,SAAS2E,IACZ,QAAc3F,SAASuD,cAAc,SACrCJ,EAAMyC,YAAeD,EAAgBf,QACrCrF,KAAKa,WAAWC,YAAY8C,EAD5BA,GAMZ,CAAO0C,6BACH5D,EACAU,EACAI,GAEA,QAAoB3D,EAAM2C,qBAAqBC,IAAIW,IAAS,QACnC,IAArBmD,EAAYC,OACZ3G,EAAM2C,qBAAqBiE,IAAIrD,EAAMmD,GAErCA,EAAYE,IAAI,UAAW,CAAE/D,OAAMc,WACnC3D,EAAMyF,iBAAiBV,IAAIlC,IAE/B6D,EAAYE,IAAI/D,EAAM,CAAEA,OAAMc,WAC9B3D,EAAM8E,UAAUlD,SAASiF,GAAaA,EAAS1F,qBAQ3C,mBACJhB,KAAKM,kBAAkBmB,SAAQ,EAAEkF,EAAUC,KACvCD,EAAS3G,KAAKiC,KAAM2E,IAIpB,wBAAuBxC,GAC3B,QAAeA,EAAMyC,eAAe,GACpC,GAAI7G,KAAKM,kBAAkBiF,IAAIuB,GAC3B,OAEJ9G,KAAKM,kBAAkBmG,IAAIK,EAAQ,CAC/B1C,EAAMG,OAAOoC,SACb,IAAM3G,KAAKM,kBAAkB2E,OAAO6B,KAExC,MAAOH,EAAUC,GACb5G,KAAKM,kBAAkBmC,IAAIqE,IAAW,GACtCH,GAAYC,GACZD,EACI3G,KAAKiC,MACDxB,SAAS+D,gBAAgBvC,MACzBwC,UAAUC,SACdkC,EAIhB,GApcaG,MAANlH,EAAMkH,EACMvE,qBAAyC,UACzC8C,iBAAsC,QAAQ,CAAC,eAE/CX,UAAwB"}