System.register(["./6664e038.js"],(function(t,e){"use strict";var i,n,r,s,a,o,l,h,u,c,d,_,f,v,m,p,y;return{setters:[function(t){i=t.aF,n=t.aG,r=t._,s=t.a,a=t.b,o=t.c,l=t.aH,h=t.aI,u=t.$,c=t.d,d=t.aJ,_=t.aK,f=t.aL,v=t.aM,m=t.aN,p=t.aO,y=t.aP}],execute:function(){function g(t,e,n,r){var s,a=arguments.length,o=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var l=t.length-1;l>=0;l--)(s=t[l])&&(o=(a<3?s(o):a>3?s(e,n,o):s(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}var b,k;function w(){return E.apply(this,arguments)}function E(){return(E=n(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",k||x());case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function x(){return C.apply(this,arguments)}function C(){return(C=n(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!b){t.next=6;break}return t.next=3,b;case 3:return t.abrupt("return",t.sent.default);case 6:b=window.ResizeObserver,t.prev=7,new b((function(){})),t.next=17;break;case 11:return t.prev=11,t.t0=t.catch(7),b=e.import("./d28fefbd.js"),t.next=16,b;case 16:b=t.sent.default;case 17:return t.abrupt("return",k=b);case 18:case"end":return t.stop()}}),t,null,[[7,11]])})))).apply(this,arguments)}var L=Symbol("virtualizerRef"),R="virtualizer-sizer",z=function(t){r(i,t);var e=s(i);function i(t){var n;return a(this,i),(n=e.call(this,i.eventName,{bubbles:!0})).first=t.first,n.last=t.last,n}return o(i)}(l(Event));z.eventName="rangeChanged";var O=function(t){r(i,t);var e=s(i);function i(t){var n;return a(this,i),(n=e.call(this,i.eventName,{bubbles:!0})).first=t.first,n.last=t.last,n}return o(i)}(l(Event));O.eventName="visibilityChanged";var S,M=function(){function t(e){if(a(this,t),this._benchmarkStart=null,this._layout=null,this._clippingAncestors=[],this._scrollSize=null,this._scrollError=null,this._childrenPos=null,this._childMeasurements=null,this._toBeMeasured=new Map,this._rangeChanged=!0,this._itemsChanged=!0,this._visibilityChanged=!0,this._isScroller=!1,this._sizer=null,this._hostElementRO=null,this._childrenRO=null,this._mutationObserver=null,this._mutationPromise=null,this._mutationPromiseResolver=null,this._mutationsObserved=!1,this._scrollEventListeners=[],this._scrollEventListenerOptions={passive:!0},this._loadListener=this._childLoaded.bind(this),this._scrollToIndex=null,this._items=[],this._first=-1,this._last=-1,this._firstVisible=-1,this._lastVisible=-1,this._scheduled=new WeakSet,this._measureCallback=null,this._measureChildOverride=null,!e)throw new Error("Virtualizer constructor requires a configuration object");if(!e.hostElement)throw new Error('Virtualizer configuration requires the "hostElement" property');this._init(e)}var r,s,l,u,c,d,_;return o(t,[{key:"items",set:function(t){Array.isArray(t)&&t!==this._items&&(this._itemsChanged=!0,this._items=t,this._schedule(this._updateLayout))}},{key:"_init",value:function(t){this._isScroller=!!t.scroller,this._initHostElement(t),this._initLayout(t)}},{key:"_initObservers",value:(_=n(regeneratorRuntime.mark((function t(){var e,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._mutationObserver=new MutationObserver(this._observeMutations.bind(this)),t.next=3,w();case 3:e=t.sent,this._hostElementRO=new e((function(){return i._hostElementSizeChanged()})),this._childrenRO=new e(this._childrenSizeChanged.bind(this));case 6:case"end":return t.stop()}}),t,this)}))),function(){return _.apply(this,arguments)})},{key:"_initLayout",value:(d=n(regeneratorRuntime.mark((function t(i){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i.layout){t.next=4;break}this.layout=i.layout,t.next=7;break;case 4:return t.next=6,e.import("./e28a03e7.js");case 6:this.layout=t.sent.FlowLayout;case 7:case"end":return t.stop()}}),t,this)}))),function(t){return d.apply(this,arguments)})},{key:"_initHostElement",value:function(t){var e=this._hostElement=t.hostElement;this._applyVirtualizerStyles(),e[L]=this}},{key:"connected",value:(c=n(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._initObservers();case 2:e=this._isScroller,this._clippingAncestors=N(this._hostElement,e),this._schedule(this._updateLayout),this._observeAndListen();case 6:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"_observeAndListen",value:function(){var t=this;this._mutationObserver.observe(this._hostElement,{childList:!0}),this._mutationPromise=new Promise((function(e){return t._mutationPromiseResolver=e})),this._hostElementRO.observe(this._hostElement),this._scrollEventListeners.push(window),window.addEventListener("scroll",this,this._scrollEventListenerOptions),this._clippingAncestors.forEach((function(e){e.addEventListener("scroll",t,t._scrollEventListenerOptions),t._scrollEventListeners.push(e),t._hostElementRO.observe(e)})),this._children.forEach((function(e){return t._childrenRO.observe(e)})),this._scrollEventListeners.forEach((function(e){return e.addEventListener("scroll",t,t._scrollEventListenerOptions)}))}},{key:"disconnected",value:function(){var t=this;this._scrollEventListeners.forEach((function(e){return e.removeEventListener("scroll",t,t._scrollEventListenerOptions)})),this._scrollEventListeners=[],this._clippingAncestors=[],this._mutationObserver.disconnect(),this._hostElementRO.disconnect(),this._childrenRO.disconnect()}},{key:"_applyVirtualizerStyles",value:function(){var t=this._hostElement.style;t.display=t.display||"block",t.position=t.position||"relative",t.contain=t.contain||"strict",this._isScroller&&(t.overflow=t.overflow||"auto",t.minHeight=t.minHeight||"150px")}},{key:"_getSizer",value:function(){var t=this._hostElement;if(!this._sizer){var e=t.querySelector("[".concat(R,"]"));e||((e=document.createElement("div")).setAttribute(R,""),t.appendChild(e)),Object.assign(e.style,{position:"absolute",margin:"-2px 0 0 0",padding:0,visibility:"hidden",fontSize:"2px"}),e.innerHTML="&nbsp;",e.setAttribute(R,""),this._sizer=e}return this._sizer}},{key:"layout",get:function(){return this._layout},set:function(t){if(this._layout!==t){var e=null,n={};if("object"===i(t)?(void 0!==t.type&&(e=t.type),n=t):e=t,"function"==typeof e){if(this._layout instanceof e)return void(n&&(this._layout.config=n));e=new e(n)}this._layout&&(this._measureCallback=null,this._measureChildOverride=null,this._layout.removeEventListener("scrollsizechange",this),this._layout.removeEventListener("scrollerrorchange",this),this._layout.removeEventListener("itempositionchange",this),this._layout.removeEventListener("rangechange",this),this._sizeHostElement(void 0),this._hostElement.removeEventListener("load",this._loadListener,!0)),this._layout=e,this._layout&&(this._layout.measureChildren&&"function"==typeof this._layout.updateItemSizes&&("function"==typeof this._layout.measureChildren&&(this._measureChildOverride=this._layout.measureChildren),this._measureCallback=this._layout.updateItemSizes.bind(this._layout)),this._layout.addEventListener("scrollsizechange",this),this._layout.addEventListener("scrollerrorchange",this),this._layout.addEventListener("itempositionchange",this),this._layout.addEventListener("rangechange",this),this._layout.listenForChildLoadEvents&&this._hostElement.addEventListener("load",this._loadListener,!0),this._schedule(this._updateLayout))}}},{key:"startBenchmarking",value:function(){null===this._benchmarkStart&&(this._benchmarkStart=window.performance.now())}},{key:"stopBenchmarking",value:function(){var t=this;if(null!==this._benchmarkStart){var e=window.performance.now(),i=e-this._benchmarkStart,n=performance.getEntriesByName("uv-virtualizing","measure").filter((function(i){return i.startTime>=t._benchmarkStart&&i.startTime<e})).reduce((function(t,e){return t+e.duration}),0);return this._benchmarkStart=null,{timeElapsed:i,virtualizationTime:n}}return null}},{key:"_measureChildren",value:function(){for(var t={},e=this._children,i=this._measureChildOverride||this._measureChild,n=0;n<e.length;n++){var r=e[n],s=this._first+n;(this._itemsChanged||this._toBeMeasured.has(r))&&(t[s]=i.call(this,r,this._items[s]))}this._childMeasurements=t,this._schedule(this._updateLayout),this._toBeMeasured.clear()}},{key:"_measureChild",value:function(t){var e,i,n=t.getBoundingClientRect(),r=n.width,s=n.height;return Object.assign({width:r,height:s},(e=t,{marginTop:I((i=window.getComputedStyle(e)).marginTop),marginRight:I(i.marginRight),marginBottom:I(i.marginBottom),marginLeft:I(i.marginLeft)}))}},{key:"scrollToIndex",set:function(t){this._scrollToIndex=t,this._schedule(this._updateLayout)}},{key:"_schedule",value:(u=n(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._scheduled.has(e)){t.next=6;break}return this._scheduled.add(e),t.next=4,Promise.resolve();case 4:this._scheduled.delete(e),e.call(this);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"_updateDOM",value:(l=n(regeneratorRuntime.mark((function t(){var e,i,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this._rangeChanged,i=this._itemsChanged,this._visibilityChanged&&(this._notifyVisibility(),this._visibilityChanged=!1),!e&&!i){t.next=6;break}return this._notifyRange(),t.next=6,this._mutationPromise;case 6:this._children.forEach((function(t){return n._childrenRO.observe(t)})),this._positionChildren(this._childrenPos),this._sizeHostElement(this._scrollSize),this._scrollError&&(this._correctScrollError(this._scrollError),this._scrollError=null),this._benchmarkStart&&"mark"in window.performance&&window.performance.mark("uv-end");case 11:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"_updateLayout",value:function(){this._layout&&(this._layout.totalItems=this._items.length,null!==this._scrollToIndex&&(this._layout.scrollToIndex(this._scrollToIndex.index,this._scrollToIndex.position),this._scrollToIndex=null),this._updateView(),null!==this._childMeasurements&&(this._measureCallback&&this._measureCallback(this._childMeasurements),this._childMeasurements=null),this._layout.reflowIfNeeded(this._itemsChanged),this._benchmarkStart&&"mark"in window.performance&&window.performance.mark("uv-end"))}},{key:"_handleScrollEvent",value:function(){if(this._benchmarkStart&&"mark"in window.performance){try{window.performance.measure("uv-virtualizing","uv-start","uv-end")}catch(t){console.warn("Error measuring performance data: ",t)}window.performance.mark("uv-start")}this._schedule(this._updateLayout)}},{key:"handleEvent",value:function(t){switch(t.type){case"scroll":(t.currentTarget===window||this._clippingAncestors.includes(t.currentTarget))&&this._handleScrollEvent();break;case"scrollsizechange":this._scrollSize=t.detail,this._schedule(this._updateDOM);break;case"scrollerrorchange":this._scrollError=t.detail,this._schedule(this._updateDOM);break;case"itempositionchange":this._childrenPos=t.detail,this._schedule(this._updateDOM);break;case"rangechange":this._adjustRange(t.detail),this._schedule(this._updateDOM);break;default:console.warn("event not handled",t)}}},{key:"_children",get:function(){for(var t=[],e=this._hostElement.firstElementChild;e;)e.hasAttribute(R)||t.push(e),e=e.nextElementSibling;return t}},{key:"_updateView",value:function(){var t,e,i,n,r,s,a=this._hostElement,o=this._layout,l=a.getBoundingClientRect();t=0,e=0,i=window.innerHeight,n=window.innerWidth;var u,c=h(this._clippingAncestors);try{for(c.s();!(u=c.n()).done;){var d=u.value.getBoundingClientRect();t=Math.max(t,d.top),e=Math.max(e,d.left),i=Math.min(i,d.bottom),n=Math.min(n,d.right)}}catch(t){c.e(t)}finally{c.f()}r=t-l.top+a.scrollTop,s=e-l.left+a.scrollLeft;var _=Math.max(1,i-t),f=Math.max(1,n-e);o.viewportSize={width:f,height:_},o.viewportScroll={top:r,left:s}}},{key:"_sizeHostElement",value:function(t){var e=82e5,i=t&&t.width?Math.min(e,t.width):0,n=t&&t.height?Math.min(e,t.height):0;if(this._isScroller)this._getSizer().style.transform="translate(".concat(i,"px, ").concat(n,"px)");else{var r=this._hostElement.style;r.minWidth=i?"".concat(i,"px"):"100%",r.minHeight=n?"".concat(n,"px"):"100%"}}},{key:"_positionChildren",value:function(t){var e=this;if(t){var i=this._children;Object.keys(t).forEach((function(n){var r=n-e._first,s=i[r];if(s){var a=t[n],o=a.top,l=a.left,h=a.width,u=a.height,c=a.xOffset,d=a.yOffset;s.style.position="absolute",s.style.boxSizing="border-box",s.style.transform="translate(".concat(l,"px, ").concat(o,"px)"),void 0!==h&&(s.style.width=h+"px"),void 0!==u&&(s.style.height=u+"px"),s.style.left=void 0===c?null:c+"px",s.style.top=void 0===d?null:d+"px"}}))}}},{key:"_adjustRange",value:(s=n(regeneratorRuntime.mark((function t(e){var i,n,r,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=this._first,n=this._last,r=this._firstVisible,s=this._lastVisible,this._first=e.first,this._last=e.last,this._firstVisible=e.firstVisible,this._lastVisible=e.lastVisible,this._rangeChanged=this._rangeChanged||this._first!==i||this._last!==n,this._visibilityChanged=this._visibilityChanged||this._firstVisible!==r||this._lastVisible!==s;case 7:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"_correctScrollError",value:function(t){var e=this._clippingAncestors[0];e?(e.scrollTop-=t.top,e.scrollLeft-=t.left):window.scroll(window.pageXOffset-t.left,window.pageYOffset-t.top)}},{key:"_notifyRange",value:function(){this._hostElement.dispatchEvent(new z({first:this._first,last:this._last}))}},{key:"_notifyVisibility",value:function(){this._hostElement.dispatchEvent(new O({first:this._firstVisible,last:this._lastVisible}))}},{key:"_hostElementSizeChanged",value:function(){this._schedule(this._updateLayout)}},{key:"_observeMutations",value:(r=n(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._mutationsObserved||(this._mutationsObserved=!0,this._mutationPromiseResolver(),this._mutationPromise=new Promise((function(t){return e._mutationPromiseResolver=t})),this._mutationsObserved=!1);case 1:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"_childLoaded",value:function(){}},{key:"_childrenSizeChanged",value:function(t){if(this._layout.measureChildren){var e,i=h(t);try{for(i.s();!(e=i.n()).done;){var n=e.value;this._toBeMeasured.set(n.target,n.contentRect)}}catch(t){i.e(t)}finally{i.f()}this._measureChildren()}this._itemsChanged=!1,this._rangeChanged=!1}}]),t}();function I(t){var e=t?parseFloat(t):NaN;return Number.isNaN(e)?0:e}function T(t){if(null!==t.parentElement)return t.parentElement;var e=t.parentNode;return e&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.host||null}function V(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=[],n=e?t:T(t);null!==n;)i.push(n),n=T(n);return i}function N(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return V(t,e).filter((function(t){return"visible"!==getComputedStyle(t).overflow}))}var P=function(t){return t},A=function(t,e){return u(S||(S=c(["",": ",""])),e,JSON.stringify(t,null,2))},j=t("LitVirtualizer",function(t){r(i,t);var e=s(i);function i(){var t;return a(this,i),(t=e.apply(this,arguments))._renderItem=function(e,i){return A(e,i+t._first)},t._providedRenderItem=A,t.items=[],t.scroller=!1,t.keyFunction=P,t._first=0,t._last=-1,t}return o(i,[{key:"renderItem",get:function(){return this._providedRenderItem},set:function(t){var e=this;this._providedRenderItem=t,this._renderItem=function(i,n){return t(i,n+e._first)},this.requestUpdate()}},{key:"layout",get:function(){return this[L].layout},set:function(t){this._layout=t,t&&this._virtualizer&&(this._virtualizer.layout=t)}},{key:"scrollToIndex",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"start";this._virtualizer.scrollToIndex={index:t,position:e}}},{key:"updated",value:function(){this._virtualizer&&(void 0!==this._layout&&(this._virtualizer.layout=this._layout),this._virtualizer.items=this.items)}},{key:"firstUpdated",value:function(){var t=this,e=this._layout;this._virtualizer=new M({hostElement:this,layout:e,scroller:this.scroller}),this.addEventListener("rangeChanged",(function(e){e.stopPropagation(),t._first=e.first,t._last=e.last})),this._virtualizer.connected()}},{key:"connectedCallback",value:function(){d(_(i.prototype),"connectedCallback",this).call(this),this._virtualizer&&this._virtualizer.connected()}},{key:"disconnectedCallback",value:function(){this._virtualizer&&this._virtualizer.disconnected(),d(_(i.prototype),"disconnectedCallback",this).call(this)}},{key:"createRenderRoot",value:function(){return this}},{key:"render",value:function(){var t=this.items,e=this._renderItem,i=this.keyFunction,n=[];if(this._first>=0&&this._last>=this._first)for(var r=this._first;r<this._last+1;r++)n.push(t[r]);return f(n,i||P,e)}}]),i}(v));g([m()],j.prototype,"renderItem",null),g([m({attribute:!1})],j.prototype,"items",void 0),g([m({reflect:!0,type:Boolean})],j.prototype,"scroller",void 0),g([m()],j.prototype,"keyFunction",void 0),g([p()],j.prototype,"_first",void 0),g([p()],j.prototype,"_last",void 0),g([m({attribute:!1})],j.prototype,"layout",null),t("LitVirtualizer",j=g([y("lit-virtualizer")],j))}}}));
