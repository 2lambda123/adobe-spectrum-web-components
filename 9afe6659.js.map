{"version":3,"file":"9afe6659.js","sources":["../../../packages/theme/src/Theme.js"],"sourcesContent":["\"use strict\";import{supportsAdoptingStyleSheets as h}from\"@spectrum-web-components/base\";const d=[\"spectrum\",\"express\"],m=[\"medium\",\"large\",\"medium-express\",\"large-express\"],c=[\"light\",\"lightest\",\"dark\",\"darkest\",\"light-express\",\"lightest-express\",\"dark-express\",\"darkest-express\"],a=class extends HTMLElement{constructor(){super();this._dir=\"\";this._theme=\"spectrum\";this._color=\"\";this._scale=\"\";this.trackedChildren=new Set;this._updateRequested=!1;this._contextConsumers=new Map;this.attachShadow({mode:\"open\"});const e=document.importNode(a.template.content,!0);this.shadowRoot.appendChild(e),this.shouldAdoptStyles(),this.addEventListener(\"sp-query-theme\",this.onQueryTheme),this.addEventListener(\"sp-language-context\",this._handleContextPresence),this.updateComplete=this.__createDeferredPromise()}static get observedAttributes(){return[\"color\",\"scale\",\"theme\",\"lang\",\"dir\"]}set dir(e){if(e===this.dir)return;this.setAttribute(\"dir\",e),this._dir=e;const t=e===\"rtl\"?e:\"ltr\";this.trackedChildren.forEach(s=>{s.setAttribute(\"dir\",t)})}get dir(){return this._dir}attributeChangedCallback(e,t,s){t!==s&&(e===\"color\"?this.color=s:e===\"scale\"?this.scale=s:e===\"lang\"&&!!s?(this.lang=s,this._provideContext()):e===\"theme\"?this.theme=s:e===\"dir\"&&(this.dir=s))}requestUpdate(){window.ShadyCSS!==void 0&&!window.ShadyCSS.nativeShadow?window.ShadyCSS.styleElement(this):this.shouldAdoptStyles()}get theme(){const e=a.themeFragmentsByKind.get(\"theme\"),{name:t}=e&&e.get(\"default\")||{};return this._theme||t||\"\"}set theme(e){if(e===this._theme)return;const t=!!e&&d.includes(e)?e:this.theme;t!==this._theme&&(this._theme=t,this.requestUpdate()),t?this.setAttribute(\"theme\",t):this.removeAttribute(\"theme\")}get color(){const e=a.themeFragmentsByKind.get(\"color\"),{name:t}=e&&e.get(\"default\")||{};return this._color||t||\"\"}set color(e){if(e===this._color)return;const t=!!e&&c.includes(e)?e:this.color;t!==this._color&&(this._color=t,this.requestUpdate()),t?this.setAttribute(\"color\",t):this.removeAttribute(\"color\")}get scale(){const e=a.themeFragmentsByKind.get(\"scale\"),{name:t}=e&&e.get(\"default\")||{};return this._scale||t||\"\"}set scale(e){if(e===this._scale)return;const t=!!e&&m.includes(e)?e:this.scale;t!==this._scale&&(this._scale=t,this.requestUpdate()),t?this.setAttribute(\"scale\",t):this.removeAttribute(\"scale\")}get styles(){const e=[...a.themeFragmentsByKind.keys()],t=(i,r,n)=>{const o=n&&n!==\"theme\"&&this.theme===\"express\"?i.get(`${r}-express`):i.get(r),l=r===\"spectrum\"||!n||this.hasAttribute(n);if(o&&l)return o.styles};return[...e.reduce((i,r)=>{const n=a.themeFragmentsByKind.get(r);let o;if(r===\"app\"||r===\"core\")o=t(n,r);else{const{[r]:l}=this;o=t(n,l,r)}return o&&i.push(o),i},[])]}static get template(){return this.templateElement||(this.templateElement=document.createElement(\"template\"),this.templateElement.innerHTML=\"<slot></slot>\"),this.templateElement}__createDeferredPromise(){return new Promise(e=>{this.__resolve=e})}onQueryTheme(e){if(e.defaultPrevented)return;e.preventDefault();const{detail:t}=e;t.color=this.color||void 0,t.scale=this.scale||void 0,t.lang=this.lang||document.documentElement.lang||navigator.language,t.theme=this.theme||void 0}connectedCallback(){if(this.shouldAdoptStyles(),window.ShadyCSS!==void 0&&window.ShadyCSS.styleElement(this),a.instances.add(this),!this.hasAttribute(\"dir\")){let e=this.assignedSlot||this.parentNode;for(;e!==document.documentElement&&!(e instanceof a);)e=e.assignedSlot||e.parentNode||e.host;this.dir=e.dir===\"rtl\"?e.dir:\"ltr\"}}disconnectedCallback(){a.instances.delete(this)}startManagingContentDirection(e){this.trackedChildren.add(e)}stopManagingContentDirection(e){this.trackedChildren.delete(e)}async shouldAdoptStyles(){this._updateRequested||(this.updateComplete=this.__createDeferredPromise(),this._updateRequested=!0,this._updateRequested=await!1,this.adoptStyles(),this.__resolve(!0))}adoptStyles(){const e=this.styles;if(window.ShadyCSS!==void 0&&!window.ShadyCSS.nativeShadow&&window.ShadyCSS.ScopingShim){const t=[];for(const[s,i]of a.themeFragmentsByKind)for(const[r,{styles:n}]of i){if(r===\"default\")continue;let o=n.cssText;a.defaultFragments.has(r)||(o=o.replace(\":host\",`:host([${s}='${r}'])`)),t.push(o)}window.ShadyCSS.ScopingShim.prepareAdoptedCssText(t,this.localName),window.ShadyCSS.prepareTemplate(a.template,this.localName)}else if(h){const t=[];for(const s of e)t.push(s.styleSheet);this.shadowRoot.adoptedStyleSheets=t}else this.shadowRoot.querySelectorAll(\"style\").forEach(s=>s.remove()),e.forEach(s=>{const i=document.createElement(\"style\");i.textContent=s.cssText,this.shadowRoot.appendChild(i)})}static registerThemeFragment(e,t,s){const i=a.themeFragmentsByKind.get(t)||new Map;i.size===0&&(a.themeFragmentsByKind.set(t,i),i.set(\"default\",{name:e,styles:s}),a.defaultFragments.add(e)),i.set(e,{name:e,styles:s}),a.instances.forEach(r=>r.shouldAdoptStyles())}_provideContext(){this._contextConsumers.forEach(e=>e(this.lang))}_handleContextPresence(e){const t=e.composedPath()[0];if(this._contextConsumers.has(t))this._contextConsumers.delete(t);else{this._contextConsumers.set(t,e.detail.callback);const s=this._contextConsumers.get(t);s&&s(this.lang||document.documentElement.lang||navigator.language)}}};export let Theme=a;Theme.themeFragmentsByKind=new Map,Theme.defaultFragments=new Set([\"spectrum\"]),Theme.instances=new Set;\n//# sourceMappingURL=Theme.js.map\n"],"names":["ScaleValues","ColorValues","_Theme","HTMLElement","constructor","super","this","_dir","_theme","_color","_scale","trackedChildren","_updateRequested","_contextConsumers","Map","attachShadow","mode","document","importNode","template","content","shadowRoot","appendChild","node","shouldAdoptStyles","addEventListener","onQueryTheme","_handleContextPresence","updateComplete","__createDeferredPromise","observedAttributes","dir","setAttribute","forEach","el","targetDir","attrName","old","value","color","scale","lang","_provideContext","theme","[object Object]","window","ShadyCSS","nativeShadow","styleElement","themeFragmentsByKind","get","name","t","themeFragments","newValue","ThemeVariantValues","includes","requestUpdate","removeAttribute","styles","themeKinds","keys","getStyle","fragments","kind","isAppliedFragment","hasAttribute","currentStyles","reduce","acc","style","kindFragments","push","templateElement","createElement","innerHTML","Promise","resolve","__resolve","event","defaultPrevented","preventDefault","detail","documentElement","navigator","language","instances","add","e","assignedSlot","parentNode","dirParent","host","delete","adoptStyles","ScopingShim","i","cssText","defaultFragments","has","replace","fragmentCSS","prepareAdoptedCssText","localName","prepareTemplate","supportsAdoptingStyleSheets","s","styleSheets","styleSheet","adoptedStyleSheets","querySelectorAll","element","remove","textContent","fragmentMap","size","set","instance","consume","composedPath","target","callback","Theme","Set"],"mappings":"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"}