{"version":3,"file":"6eda87d1.js","sources":["../../../packages/menu/src/menu.css.js","../../../packages/menu/src/Menu.js","../../../packages/menu/sp-menu.js"],"sourcesContent":["\"use strict\";import{css as e}from\"@spectrum-web-components/base\";const t=e`\n:host{--spectrum-menu-item-min-height:var(--spectrum-component-height-100);--spectrum-menu-item-icon-height:var(--spectrum-workflow-icon-size-100);--spectrum-menu-item-icon-width:var(--spectrum-workflow-icon-size-100);--spectrum-menu-item-label-font-size:var(--spectrum-font-size-100);--spectrum-menu-item-label-text-to-visual:var(\n--spectrum-text-to-visual-100\n);--spectrum-menu-item-label-inline-edge-to-content:var(\n--spectrum-component-edge-to-text-100\n);--spectrum-menu-item-top-edge-to-text:var(\n--spectrum-component-top-to-text-100\n);--spectrum-menu-item-bottom-edge-to-text:var(\n--spectrum-component-bottom-to-text-100\n);--spectrum-menu-item-text-to-control:var(--spectrum-text-to-control-100);--spectrum-menu-item-description-font-size:var(--spectrum-font-size-75);--spectrum-menu-section-header-font-size:var(--spectrum-font-size-100);--spectrum-menu-section-header-min-width:var(\n--spectrum-component-height-100\n);--spectrum-menu-item-selectable-edge-to-text-not-selected:var(\n--spectrum-menu-item-selectable-edge-to-text-not-selected-medium\n);--spectrum-menu-item-checkmark-height:var(\n--spectrum-menu-item-checkmark-height-medium\n);--spectrum-menu-item-checkmark-width:var(\n--spectrum-menu-item-checkmark-width-medium\n);--spectrum-menu-item-top-to-checkmark:var(\n--spectrum-menu-item-top-to-selected-icon-medium\n);--spectrum-menu-item-label-line-height:var(--spectrum-line-height-100);--spectrum-menu-item-label-line-height-cjk:var(\n--spectrum-cjk-line-height-100\n);--spectrum-menu-item-label-to-description-spacing:var(\n--spectrum-menu-item-label-to-description\n);--spectrum-menu-item-focus-indicator-width:var(\n--spectrum-border-width-200\n);--spectrum-menu-item-focus-indicator-color:var(--spectrum-blue-800);--spectrum-menu-item-label-to-value-area-min-spacing:var(\n--spectrum-spacing-100\n);--spectrum-menu-item-label-content-color-default:var(\n--spectrum-neutral-content-color-default\n);--spectrum-menu-item-label-content-color-hover:var(\n--spectrum-neutral-content-color-hover\n);--spectrum-menu-item-label-content-color-down:var(\n--spectrum-neutral-content-color-down\n);--spectrum-menu-item-label-content-color-focus:var(\n--spectrum-neutral-content-color-key-focus\n);--spectrum-menu-item-label-icon-color-default:var(\n--spectrum-neutral-content-color-default\n);--spectrum-menu-item-label-icon-color-hover:var(\n--spectrum-neutral-content-color-hover\n);--spectrum-menu-item-label-icon-color-down:var(\n--spectrum-neutral-content-color-down\n);--spectrum-menu-item-label-icon-color-focus:var(\n--spectrum-neutral-content-color-key-focus\n);--spectrum-menu-item-label-content-color-disabled:var(\n--spectrum-disabled-content-color\n);--spectrum-menu-item-label-icon-color-disabled:var(\n--spectrum-disabled-content-color\n);--spectrum-menu-item-description-line-height:var(\n--spectrum-line-height-100\n);--spectrum-menu-item-description-line-height-cjk:var(\n--spectrum-cjk-line-height-100\n);--spectrum-menu-item-description-color-default:var(\n--spectrum-neutral-subdued-content-color-default\n);--spectrum-menu-item-description-color-hover:var(\n--spectrum-neutral-subdued-content-color-hover\n);--spectrum-menu-item-description-color-down:var(\n--spectrum-neutral-subdued-content-color-down\n);--spectrum-menu-item-description-color-focus:var(\n--spectrum-neutral-subdued-content-color-key-focus\n);--spectrum-menu-item-description-color-disabled:var(\n--spectrum-disabled-content-color\n);--spectrum-menu-section-header-line-height:var(--spectrum-line-height-100);--spectrum-menu-section-header-line-height-cjk:var(\n--spectrum-cjk-line-height-100\n);--spectrum-menu-section-header-font-weight:var(\n--spectrum-bold-font-weight\n);--spectrum-menu-section-header-color:var(--spectrum-gray-900);--spectrum-menu-collapsible-icon-color:var(--spectrum-gray-900);--spectrum-menu-checkmark-icon-color-default:var(\n--spectrum-accent-color-900\n);--spectrum-menu-checkmark-icon-color-hover:var(\n--spectrum-accent-color-1000\n);--spectrum-menu-checkmark-icon-color-down:var(\n--spectrum-accent-color-1100\n);--spectrum-menu-checkmark-icon-color-focus:var(\n--spectrum-accent-color-1000\n);--spectrum-menu-drillin-icon-color-default:var(\n--spectrum-neutral-subdued-content-color-default\n);--spectrum-menu-drillin-icon-color-hover:var(\n--spectrum-neutral-subdued-content-color-hover\n);--spectrum-menu-drillin-icon-color-down:var(\n--spectrum-neutral-subdued-content-color-down\n);--spectrum-menu-drillin-icon-color-focus:var(\n--spectrum-neutral-subdued-content-color-key-focus\n);--spectrum-menu-item-value-color-default:var(\n--spectrum-neutral-subdued-content-color-default\n);--spectrum-menu-item-value-color-hover:var(\n--spectrum-neutral-subdued-content-color-hover\n);--spectrum-menu-item-value-color-down:var(\n--spectrum-neutral-subdued-content-color-down\n);--spectrum-menu-item-value-color-focus:var(\n--spectrum-neutral-subdued-content-color-key-focus\n);--spectrum-menu-checkmark-display-hidden:none;--spectrum-menu-checkmark-display-shown:block;--spectrum-menu-checkmark-display:var(\n--spectrum-menu-checkmark-display-shown\n);--spectrum-menu-item-collapsible-has-icon-submenu-item-padding-x-start:calc(var(--spectrum-menu-item-label-inline-edge-to-content) + var(--spectrum-menu-item-checkmark-width) + var(--spectrum-menu-item-text-to-control) + var(--spectrum-menu-item-icon-width) + var(--spectrum-menu-item-label-text-to-visual) + var(--spectrum-menu-item-focus-indicator-width));--spectrum-menu-item-collapsible-no-icon-submenu-item-padding-x-start:calc(var(--spectrum-menu-item-label-inline-edge-to-content) + var(--spectrum-menu-item-checkmark-width) + var(--spectrum-menu-item-label-text-to-visual) + var(--spectrum-menu-item-focus-indicator-width))}:host([size=s]){--spectrum-menu-item-min-height:var(--spectrum-component-height-75);--spectrum-menu-item-icon-height:var(--spectrum-workflow-icon-size-75);--spectrum-menu-item-icon-width:var(--spectrum-workflow-icon-size-75);--spectrum-menu-item-label-font-size:var(--spectrum-font-size-75);--spectrum-menu-item-label-text-to-visual:var(\n--spectrum-text-to-visual-75\n);--spectrum-menu-item-label-inline-edge-to-content:var(\n--spectrum-component-edge-to-text-75\n);--spectrum-menu-item-top-edge-to-text:var(\n--spectrum-component-top-to-text-75\n);--spectrum-menu-item-bottom-edge-to-text:var(\n--spectrum-component-bottom-to-text-75\n);--spectrum-menu-item-text-to-control:var(--spectrum-text-to-control-75);--spectrum-menu-item-description-font-size:var(--spectrum-font-size-50);--spectrum-menu-section-header-font-size:var(--spectrum-font-size-75);--spectrum-menu-section-header-min-width:var(\n--spectrum-component-height-75\n);--spectrum-menu-item-selectable-edge-to-text-not-selected:var(\n--spectrum-menu-item-selectable-edge-to-text-not-selected-small\n);--spectrum-menu-item-checkmark-height:var(\n--spectrum-menu-item-checkmark-height-small\n);--spectrum-menu-item-checkmark-width:var(\n--spectrum-menu-item-checkmark-width-small\n);--spectrum-menu-item-top-to-checkmark:var(\n--spectrum-menu-item-top-to-selected-icon-small\n)}:host([size=l]){--spectrum-menu-item-min-height:var(--spectrum-component-height-200);--spectrum-menu-item-icon-height:var(--spectrum-workflow-icon-size-200);--spectrum-menu-item-icon-width:var(--spectrum-workflow-icon-size-200);--spectrum-menu-item-label-font-size:var(--spectrum-font-size-200);--spectrum-menu-item-label-text-to-visual:var(\n--spectrum-text-to-visual-200\n);--spectrum-menu-item-label-inline-edge-to-content:var(\n--spectrum-component-edge-to-text-200\n);--spectrum-menu-item-top-edge-to-text:var(\n--spectrum-component-top-to-text-200\n);--spectrum-menu-item-bottom-edge-to-text:var(\n--spectrum-component-bottom-to-text-200\n);--spectrum-menu-item-text-to-control:var(--spectrum-text-to-control-200);--spectrum-menu-item-description-font-size:var(--spectrum-font-size-100);--spectrum-menu-section-header-font-size:var(--spectrum-font-size-200);--spectrum-menu-section-header-min-width:var(\n--spectrum-component-height-200\n);--spectrum-menu-item-selectable-edge-to-text-not-selected:var(\n--spectrum-menu-item-selectable-edge-to-text-not-selected-large\n);--spectrum-menu-item-checkmark-height:var(\n--spectrum-menu-item-checkmark-height-large\n);--spectrum-menu-item-checkmark-width:var(\n--spectrum-menu-item-checkmark-width-large\n);--spectrum-menu-item-top-to-checkmark:var(\n--spectrum-menu-item-top-to-selected-icon-large\n)}:host([size=xl]){--spectrum-menu-item-min-height:var(--spectrum-component-height-300);--spectrum-menu-item-icon-height:var(--spectrum-workflow-icon-size-300);--spectrum-menu-item-icon-width:var(--spectrum-workflow-icon-size-300);--spectrum-menu-item-label-font-size:var(--spectrum-font-size-300);--spectrum-menu-item-label-text-to-visual:var(\n--spectrum-text-to-visual-300\n);--spectrum-menu-item-label-inline-edge-to-content:var(\n--spectrum-component-edge-to-text-300\n);--spectrum-menu-item-top-edge-to-text:var(\n--spectrum-component-top-to-text-300\n);--spectrum-menu-item-bottom-edge-to-text:var(\n--spectrum-component-bottom-to-text-300\n);--spectrum-menu-item-text-to-control:var(--spectrum-text-to-control-300);--spectrum-menu-item-description-font-size:var(--spectrum-font-size-200);--spectrum-menu-section-header-font-size:var(--spectrum-font-size-300);--spectrum-menu-section-header-min-width:var(\n--spectrum-component-height-300\n);--spectrum-menu-item-selectable-edge-to-text-not-selected:var(\n--spectrum-menu-item-selectable-edge-to-text-not-selected-extra-large\n);--spectrum-menu-item-checkmark-height:var(\n--spectrum-menu-item-checkmark-height-extra-large\n);--spectrum-menu-item-checkmark-width:var(\n--spectrum-menu-item-checkmark-width-extra-large\n);--spectrum-menu-item-top-to-checkmark:var(\n--spectrum-menu-item-top-to-selected-icon-extra-large\n)}@media (forced-colors:active){:host{--highcontrast-menu-item-background-color-default:ButtonFace;--highcontrast-menu-item-color-default:ButtonText;--highcontrast-menu-item-background-color-focus:Highlight;--highcontrast-menu-item-color-focus:HighlightText;--highcontrast-menu-checkmark-icon-color-default:Highlight;--highcontrast-menu-item-color-disabled:GrayText;--highcontrast-menu-item-focus-indicator-color:Highlight;--highcontrast-menu-item-selected-background-color:Highlight;--highcontrast-menu-item-selected-color:HighlightText}@supports (color:SelectedItem){:host{--highcontrast-menu-item-selected-background-color:SelectedItem;--highcontrast-menu-item-selected-color:SelectedItemText}}}:host{box-sizing:border-box;display:inline-block;list-style-type:none;margin:0;overflow:auto;padding:0}:host:lang(ja),:host:lang(ko),:host:lang(zh){--spectrum-menu-item-label-line-height:var(\n--mod-menu-item-label-line-height-cjk,var(--spectrum-menu-item-label-line-height-cjk)\n);--spectrum-menu-item-description-line-height:var(\n--mod-menu-item-description-line-height-cjk,var(--spectrum-menu-item-description-line-height-cjk)\n);--spectrum-menu-section-header-line-height:var(\n--mod-menu-section-header-line-height-cjk,var(--spectrum-menu-section-header-line-height-cjk)\n)}:host([selects]) ::slotted(sp-menu-item){--spectrum-menu-checkmark-display:var(\n--spectrum-menu-checkmark-display-hidden\n);padding-inline-start:var(\n--mod-menu-item-selectable-edge-to-text-not-selected,var(--spectrum-menu-item-selectable-edge-to-text-not-selected)\n)}:host([selects]) ::slotted(sp-menu-item[selected]){--spectrum-menu-checkmark-display:var(\n--spectrum-menu-checkmark-display-shown\n);padding-inline-start:var(\n--mod-menu-item-label-inline-edge-to-content,var(--spectrum-menu-item-label-inline-edge-to-content)\n)}li:not(::slotted(sp-menu-item),.menu-divider){box-sizing:border-box;display:block;margin:0;padding:0;position:relative}.spectrum-Menu-sectionHeading{color:var(\n--highcontrast-menu-item-color-default,var(\n--mod-menu-section-header-color,var(--spectrum-menu-section-header-color)\n)\n);display:block;font-size:var(\n--mod-menu-section-header-font-size,var(--spectrum-menu-section-header-font-size)\n);font-weight:var(\n--mod-menu-section-header-font-weight,var(--spectrum-menu-section-header-font-weight)\n);grid-area:sectionHeadingArea/1/sectionHeadingArea/-1;line-height:var(\n--mod-menu-section-header-line-height,var(--spectrum-menu-section-header-line-height)\n);min-inline-size:var(\n--mod-menu-section-header-min-width,var(--spectrum-menu-section-header-min-width)\n);padding-block-end:var(\n--mod-menu-section-header-bottom-edge-to-text,var(\n--mod-menu-item-bottom-edge-to-text,var(--spectrum-menu-item-bottom-edge-to-text)\n)\n);padding-block-start:var(\n--mod-menu-section-header-top-edge-to-text,var(\n--mod-menu-item-top-edge-to-text,var(--spectrum-menu-item-top-edge-to-text)\n)\n);padding-inline:var(\n--mod-menu-item-label-inline-edge-to-content,var(--spectrum-menu-item-label-inline-edge-to-content)\n)}:host{display:inline-flex;flex-direction:column;width:var(--swc-menu-width)}:host(:focus){outline:none}::slotted(*){flex-shrink:0}\n`;export default t;\n//# sourceMappingURL=menu.css.js.map\n","\"use strict\";var f=Object.defineProperty;var I=Object.getOwnPropertyDescriptor;var l=(r,d,e,s)=>{for(var t=s>1?void 0:s?I(d,e):d,i=r.length-1,n;i>=0;i--)(n=r[i])&&(t=(s?n(d,e,t):n(t))||t);return s&&t&&f(d,e,t),t};import{html as v,SizedMixin as b,SpectrumElement as g}from\"@spectrum-web-components/base\";import{property as c,query as y}from\"@spectrum-web-components/base/src/decorators.js\";import{MenuItem as S}from\"./MenuItem.js\";import M from\"./menu.css.js\";function p(r,d){return!!d&&(r===d||r.contains(d))}export class Menu extends b(g,{noDefaultSize:!0}){constructor(){super();this.label=\"\";this.ignore=!1;this.value=\"\";this.valueSeparator=\",\";this.selected=[];this.selectedItems=[];this.childItemSet=new Set;this.focusedItemIndex=0;this.focusInItemIndex=0;this.selectedItemsMap=new Map;this.descendentOverlays=new Map;this.handleSubmenuClosed=e=>{e.stopPropagation(),e.composedPath()[0].dispatchEvent(new Event(\"sp-menu-submenu-closed\",{bubbles:!0,composed:!0}))};this.handleSubmenuOpened=e=>{e.stopPropagation(),e.composedPath()[0].dispatchEvent(new Event(\"sp-menu-submenu-opened\",{bubbles:!0,composed:!0}));const t=this.childItems[this.focusedItemIndex];t&&(t.focused=!1);const i=e.composedPath().find(o=>this.childItemSet.has(o));if(!i)return;const n=this.childItems.indexOf(i);this.focusedItemIndex=n,this.focusInItemIndex=n};this._hasUpdatedSelectedItemIndex=!1;this._willUpdateItems=!1;this.cacheUpdated=Promise.resolve();this.resolveCacheUpdated=()=>{};this.addEventListener(\"sp-menu-item-added-or-updated\",this.onSelectableItemAddedOrUpdated),this.addEventListener(\"sp-menu-item-added-or-updated\",this.onFocusableItemAddedOrUpdated,{capture:!0}),this.addEventListener(\"click\",this.handleClick),this.addEventListener(\"focusin\",this.handleFocusin),this.addEventListener(\"focusout\",this.handleFocusout),this.addEventListener(\"sp-opened\",this.handleSubmenuOpened),this.addEventListener(\"sp-closed\",this.handleSubmenuClosed)}static get styles(){return[M]}get isSubmenu(){return this.slot===\"submenu\"}get childItems(){return this.cachedChildItems||(this.cachedChildItems=this.updateCachedMenuItems()),this.cachedChildItems}updateCachedMenuItems(){this.cachedChildItems=[];const e=this.menuSlot.assignedElements({flatten:!0});for(const s of e){const t=s instanceof S?[s]:[...s.querySelectorAll(\"*\")];for(const i of t)this.childItemSet.has(i)&&this.cachedChildItems.push(i)}return this.cachedChildItems}get childRole(){if(this.resolvedRole===\"listbox\")return\"option\";switch(this.resolvedSelects){case\"single\":return\"menuitemradio\";case\"multiple\":return\"menuitemcheckbox\";default:return\"menuitem\"}}get ownRole(){return\"menu\"}onFocusableItemAddedOrUpdated(e){e.menuCascade.set(this,{hadFocusRoot:!!e.item.menuData.focusRoot,ancestorWithSelects:e.currentAncestorWithSelects}),this.selects&&(e.currentAncestorWithSelects=this),e.item.menuData.focusRoot=e.item.menuData.focusRoot||this}onSelectableItemAddedOrUpdated(e){var i,n;const s=e.menuCascade.get(this);if(!s)return;if(e.item.menuData.parentMenu=e.item.menuData.parentMenu||this,s.hadFocusRoot&&!this.ignore&&(this.tabIndex=-1),this.addChildItem(e.item),this.selects===\"inherit\"){this.resolvedSelects=\"inherit\";const o=(i=e.currentAncestorWithSelects)==null?void 0:i.ignore;this.resolvedRole=o?\"none\":((n=e.currentAncestorWithSelects)==null?void 0:n.getAttribute(\"role\"))||this.getAttribute(\"role\")||void 0}else this.selects?(this.resolvedRole=this.ignore?\"none\":this.getAttribute(\"role\")||void 0,this.resolvedSelects=this.selects):(this.resolvedRole=this.ignore?\"none\":this.getAttribute(\"role\")||void 0,this.resolvedSelects=this.resolvedRole===\"none\"?\"ignore\":\"none\");const t=this.resolvedSelects===\"single\"||this.resolvedSelects===\"multiple\";e.item.menuData.cleanupSteps.push(o=>this.removeChildItem(o)),(t||!this.selects&&this.resolvedSelects!==\"ignore\")&&!e.item.menuData.selectionRoot&&(e.item.setRole(this.childRole),e.item.menuData.selectionRoot=e.item.menuData.selectionRoot||this,e.item.selected&&(this.selectedItemsMap.set(e.item,!0),this.selectedItems=[...this.selectedItems,e.item],this.selected=[...this.selected,e.item.value],this.value=this.selected.join(this.valueSeparator)))}addChildItem(e){this.childItemSet.add(e),this.handleItemsChanged()}async removeChildItem(e){this.childItemSet.delete(e),this.cachedChildItems=void 0,e.focused&&(this.handleItemsChanged(),await this.updateComplete,this.focus())}focus({preventScroll:e}={}){if(!this.childItems.length||this.childItems.every(t=>t.disabled))return;if(this.childItems.some(t=>t.menuData.focusRoot!==this)){super.focus({preventScroll:e});return}this.focusMenuItemByOffset(0),super.focus({preventScroll:e});const s=this.selectedItems[0];s&&!e&&s.scrollIntoView({block:\"nearest\"})}handleClick(e){if(e.defaultPrevented)return;const t=e.composedPath().find(i=>i instanceof Element?i.getAttribute(\"role\")===this.childRole:!1);if(t!=null&&t.href&&t.href.length){this.dispatchEvent(new Event(\"change\",{bubbles:!0,composed:!0}));return}else if((t==null?void 0:t.menuData.selectionRoot)===this&&this.childItems.length){if(e.preventDefault(),t.hasSubmenu||t.open)return;this.selectOrToggleItem(t)}else return;this.prepareToCleanUp()}handleFocusin(e){var n;const s=p(this,e.relatedTarget);if(this.childItems.some(o=>o.menuData.focusRoot!==this))return;const t=this.getRootNode().activeElement,i=((n=this.childItems[this.focusedItemIndex])==null?void 0:n.menuData.selectionRoot)||this;if((t!==i||!s&&e.target!==this)&&(i.focus({preventScroll:!0}),t&&this.focusedItemIndex===0)){const o=this.childItems.findIndex(a=>a===t);o>0&&this.focusMenuItemByOffset(o)}this.startListeningToKeyboard()}startListeningToKeyboard(){this.addEventListener(\"keydown\",this.handleKeydown)}handleFocusout(e){p(this,e.relatedTarget)||(this.stopListeningToKeyboard(),this.childItems.forEach(s=>s.focused=!1),this.removeAttribute(\"aria-activedescendant\"))}stopListeningToKeyboard(){this.removeEventListener(\"keydown\",this.handleKeydown)}handleDescendentOverlayOpened(e){const s=e.composedPath()[0];s.overlayElement&&this.descendentOverlays.set(s.overlayElement,s.overlayElement)}handleDescendentOverlayClosed(e){const s=e.composedPath()[0];s.overlayElement&&this.descendentOverlays.delete(s.overlayElement)}async selectOrToggleItem(e){const s=this.resolvedSelects,t=new Map(this.selectedItemsMap),i=this.selected.slice(),n=this.selectedItems.slice(),o=this.value,a=this.childItems[this.focusedItemIndex];if(a&&(a.focused=!1,a.active=!1),this.focusedItemIndex=this.childItems.indexOf(e),this.forwardFocusVisibleToItem(e),s===\"multiple\"){this.selectedItemsMap.has(e)?this.selectedItemsMap.delete(e):this.selectedItemsMap.set(e,!0);const h=[],m=[];this.childItemSet.forEach(u=>{u.menuData.selectionRoot===this&&this.selectedItemsMap.has(u)&&(h.push(u.value),m.push(u))}),this.selected=h,this.selectedItems=m,this.value=this.selected.join(this.valueSeparator)}else this.selectedItemsMap.clear(),this.selectedItemsMap.set(e,!0),this.value=e.value,this.selected=[e.value],this.selectedItems=[e];if(await this.updateComplete,!this.dispatchEvent(new Event(\"change\",{cancelable:!0,bubbles:!0,composed:!0}))){this.selected=i,this.selectedItems=n,this.selectedItemsMap=t,this.value=o;return}if(s===\"single\"){for(const h of t.keys())h!==e&&(h.selected=!1);e.selected=!0}else s===\"multiple\"&&(e.selected=!e.selected)}navigateWithinMenu(e){const{code:s}=e,t=this.childItems[this.focusedItemIndex],i=s===\"ArrowDown\"?1:-1,n=this.focusMenuItemByOffset(i);n!==t&&(e.preventDefault(),e.stopPropagation(),n.scrollIntoView({block:\"nearest\"}))}navigateBetweenRelatedMenus(e){const{code:s}=e,t=this.isLTR&&s===\"ArrowRight\"||!this.isLTR&&s===\"ArrowLeft\",i=this.isLTR&&s===\"ArrowLeft\"||!this.isLTR&&s===\"ArrowRight\";if(t){e.stopPropagation();const n=this.childItems[this.focusedItemIndex];n!=null&&n.hasSubmenu&&n.openOverlay()}else i&&this.isSubmenu&&(e.stopPropagation(),this.dispatchEvent(new Event(\"close\",{bubbles:!0})),this.updateSelectedItemIndex())}handleKeydown(e){var n;if(e.target!==this&&this!==e.target.parentElement||e.defaultPrevented)return;const t=this.childItems[this.focusedItemIndex];t&&(t.focused=!0);const{code:i}=e;if(i===\"Tab\"){this.prepareToCleanUp();return}if(i===\"Space\"&&t!=null&&t.hasSubmenu){t.openOverlay();return}if(i===\"Space\"||i===\"Enter\"){(n=this.childItems[this.focusedItemIndex])==null||n.click();return}if(i===\"ArrowDown\"||i===\"ArrowUp\"){this.navigateWithinMenu(e);return}this.navigateBetweenRelatedMenus(e)}focusMenuItemByOffset(e){const s=e||1,t=this.childItems[this.focusedItemIndex];t&&(t.focused=!1,t.active=t.open),this.focusedItemIndex=(this.childItems.length+this.focusedItemIndex+e)%this.childItems.length;let i=this.childItems[this.focusedItemIndex],n=this.childItems.length;for(;i.disabled&&n;)n-=1,this.focusedItemIndex=(this.childItems.length+this.focusedItemIndex+s)%this.childItems.length,i=this.childItems[this.focusedItemIndex];return i!=null&&i.disabled||this.forwardFocusVisibleToItem(i),i}prepareToCleanUp(){document.addEventListener(\"focusout\",()=>{requestAnimationFrame(()=>{const e=this.childItems[this.focusedItemIndex];e&&(e.focused=!1,this.updateSelectedItemIndex())})},{once:!0})}updateSelectedItemIndex(){let e=0;const s=new Map,t=[],i=[];let n=this.childItems.length;for(;n;){n-=1;const o=this.childItems[n];o.menuData.selectionRoot===this&&((o.selected||!this._hasUpdatedSelectedItemIndex&&this.selected.includes(o.value))&&(e=n,s.set(o,!0),t.unshift(o.value),i.unshift(o)),n!==e&&(o.focused=!1))}i.map((o,a)=>{a>0&&(o.focused=!1)}),this.selectedItemsMap=s,this.selected=t,this.selectedItems=i,this.value=this.selected.join(this.valueSeparator),this.focusedItemIndex=e,this.focusInItemIndex=e}handleItemsChanged(){this.cachedChildItems=void 0,this._willUpdateItems||(this._willUpdateItems=!0,this.cacheUpdated=this.updateCache())}async updateCache(){this.hasUpdated?await new Promise(e=>requestAnimationFrame(()=>e(!0))):await Promise.all([new Promise(e=>requestAnimationFrame(()=>e(!0))),this.updateComplete]),this.cachedChildItems===void 0&&(this.updateSelectedItemIndex(),this.updateItemFocus()),this._willUpdateItems=!1}updateItemFocus(){if(this.childItems.length==0)return;const e=this.childItems[this.focusInItemIndex];this.getRootNode().activeElement===e.menuData.focusRoot&&this.forwardFocusVisibleToItem(e)}closeDescendentOverlays(){this.descendentOverlays.forEach(e=>{e.open=!1}),this.descendentOverlays=new Map}forwardFocusVisibleToItem(e){if(e.menuData.focusRoot!==this)return;this.closeDescendentOverlays();const s=this.hasVisibleFocusInTree()||!!this.childItems.find(t=>t.hasVisibleFocusInTree());e.focused=s,this.setAttribute(\"aria-activedescendant\",e.id),e.menuData.selectionRoot&&e.menuData.selectionRoot!==this&&e.menuData.selectionRoot.focus()}handleSlotchange({target:e}){const s=e.assignedElements({flatten:!0});this.childItems.length!==s.length&&s.forEach(t=>{typeof t.triggerUpdate!=\"undefined\"&&t.triggerUpdate()})}renderMenuItemSlot(){return v`\n            <slot\n                @sp-menu-submenu-opened=${this.handleDescendentOverlayOpened}\n                @sp-menu-submenu-closed=${this.handleDescendentOverlayClosed}\n                @slotchange=${this.handleSlotchange}\n            ></slot>\n        `}render(){return this.renderMenuItemSlot()}firstUpdated(e){super.firstUpdated(e),!this.hasAttribute(\"tabindex\")&&!this.ignore&&(this.getAttribute(\"role\")===\"group\"?this.tabIndex=-1:this.tabIndex=0);const s=[new Promise(t=>requestAnimationFrame(()=>t(!0)))];[...this.children].forEach(t=>{t.localName===\"sp-menu-item\"&&s.push(t.updateComplete)}),this.childItemsUpdated=Promise.all(s)}updated(e){super.updated(e),e.has(\"selects\")&&this.hasUpdated&&this.selectsChanged(),e.has(\"label\")&&(this.label||typeof e.get(\"label\")!=\"undefined\")&&(this.label?this.setAttribute(\"aria-label\",this.label):this.removeAttribute(\"aria-label\"))}selectsChanged(){const e=[new Promise(s=>requestAnimationFrame(()=>s(!0)))];this.childItemSet.forEach(s=>{e.push(s.triggerUpdate())}),this.childItemsUpdated=Promise.all(e)}connectedCallback(){super.connectedCallback(),!this.hasAttribute(\"role\")&&!this.ignore&&this.setAttribute(\"role\",this.ownRole),this.updateComplete.then(()=>this.updateItemFocus())}disconnectedCallback(){this.cachedChildItems=void 0,super.disconnectedCallback()}async getUpdateComplete(){const e=await super.getUpdateComplete();return await this.childItemsUpdated,await this.cacheUpdated,e}}l([c({type:String,reflect:!0})],Menu.prototype,\"label\",2),l([c({type:Boolean,reflect:!0})],Menu.prototype,\"ignore\",2),l([c({type:String,reflect:!0})],Menu.prototype,\"selects\",2),l([c({type:String})],Menu.prototype,\"value\",2),l([c({type:String,attribute:\"value-separator\"})],Menu.prototype,\"valueSeparator\",2),l([c({attribute:!1})],Menu.prototype,\"selected\",2),l([c({attribute:!1})],Menu.prototype,\"selectedItems\",2),l([y(\"slot:not([name])\")],Menu.prototype,\"menuSlot\",2);\n//# sourceMappingURL=Menu.js.map\n","\"use strict\";import{Menu as e}from\"./src/Menu.js\";import{defineElement as m}from\"@spectrum-web-components/base/src/define-element.js\";m(\"sp-menu\",e);\n//# sourceMappingURL=sp-menu.js.map\n"],"names":["css","f","Object","defineProperty","I","getOwnPropertyDescriptor","l","r","d","e","s","n","t","i","length","elementIsOrContains","el","isOrContains","contains","SizedMixin","SpectrumElement","noDefaultSize","constructor","super","this","label","ignore","value","valueSeparator","selected","selectedItems","childItemSet","Set","focusedItemIndex","focusInItemIndex","selectedItemsMap","descendentOverlays","Map","handleSubmenuClosed","event","stopPropagation","composedPath","dispatchEvent","Event","bubbles","composed","handleSubmenuOpened","childItems","focusedItem","focused","openedItem","find","has","indexOf","openedItemIndex","_hasUpdatedSelectedItemIndex","_willUpdateItems","cacheUpdated","Promise","resolve","resolveCacheUpdated","addEventListener","onSelectableItemAddedOrUpdated","onFocusableItemAddedOrUpdated","capture","handleClick","handleFocusin","handleFocusout","styles","menuStyles","isSubmenu","slot","cachedChildItems","updateCachedMenuItems","menuSlot","assignedElements","flatten","slotElement","slotElements","querySelectorAll","childMenuItem","push","childRole","resolvedRole","resolvedSelects","menuCascade","set","hadFocusRoot","item","menuData","focusRoot","ancestorWithSelects","currentAncestorWithSelects","selects","cascadeData","get","parentMenu","tabIndex","addChildItem","ignoreMenu","_a","_b","getAttribute","cleanupSteps","removeChildItem","selectionRoot","setRole","join","add","handleItemsChanged","async","delete","updateComplete","focus","preventScroll","every","childItem","disabled","some","focusMenuItemByOffset","selectedItem","scrollIntoView","block","defaultPrevented","target","href","preventDefault","hasSubmenu","open","selectOrToggleItem","prepareToCleanUp","relatedTarget","getRootNode","activeElement","wasOrContainedRelatedTarget","o","findIndex","offset","startListeningToKeyboard","handleKeydown","stopListeningToKeyboard","forEach","child","removeAttribute","removeEventListener","overlayElement","targetItem","oldSelectedItemsMap","oldSelected","slice","oldSelectedItems","oldValue","focusedChild","active","forwardFocusVisibleToItem","h","clear","cancelable","oldItem","keys","code","lastFocusedItem","direction","itemToFocus","navigateBetweenRelatedMenus","shouldOpenSubmenu","isLTR","shouldCloseSelfAsSubmenu","openOverlay","updateSelectedItemIndex","parentElement","navigateWithinMenu","click","availableItems","step","document","requestAnimationFrame","once","firstOrFirstSelectedIndex","itemIndex","includes","unshift","map","updateCache","hasUpdated","res","all","updateItemFocus","focusInItem","closeDescendentOverlays","overlay","hasVisibleFocusInTree","setAttribute","id","handleSlotchange","assignedElement","triggerUpdate","renderMenuItemSlot","html","handleDescendentOverlayOpened","handleDescendentOverlayClosed","render","firstUpdated","changed","hasAttribute","updates","children","localName","childItemsUpdated","changes","updated","selectsChanged","connectedCallback","ownRole","then","disconnectedCallback","getUpdateComplete","complete","__decorateClass","property","type","String","reflect","Menu","prototype","Boolean","attribute","query","defineElement"],"mappings":"+LAmMA,MAvLeA,CAAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ECAfC,EAAAC,OAAAC,eAAAC,EAAAF,OAAAG,yBAAAC,EAAA,CAAAC,EAAAC,EAAAC,EAAAC,KAAA,IAAA,IAAAC,EAAAC,EAAAF,EAAA,OAAA,EAAAA,EAAAN,EAAAI,EAAAC,GAAAD,EAAAK,EAAAN,EAAAO,OAAA,EAAAD,GAAA,EAAAA,KAAAF,EAAAJ,EAAAM,MAAAD,GAAAF,EAAAC,EAAAH,EAAAC,EAAAG,GAAAD,EAAAC,KAAAA,GAAA,OAAAF,GAAAE,GAAAX,EAAAO,EAAAC,EAAAG,GAAAA,CAAA,EA6BA,SAASG,EACLC,EACAC,GAEA,QAASA,IAAiBD,IAAOC,GAAgBD,EAAGE,SAASD,GAgB1D,CAAA,gBAAmBE,EAAWC,EAAiB,CAAEC,eAAe,KAuM5DC,cACHC,QA9LJC,KAAOC,MAAQ,GAGfD,KAAOE,QAAS,EAMhBF,KAAOG,MAAQ,GAKfH,KAAOI,eAAiB,IAKxBJ,KAAOK,SAAW,GAGlBL,KAAOM,cAAgB,GAKvBN,KAAQO,aAAe,IAAIC,IAC3BR,KAAOS,iBAAmB,EAC1BT,KAAOU,iBAAmB,EAE1BV,KAAQW,iBAAmB,QAoS3BX,KAAQY,mBAAqB,IAAAC,IAmB7Bb,KAAOc,oBAAuBC,IAC1BA,EAAMC,kBACSD,EAAME,eAAe,GAC7BC,cACH,IAAAC,MAAU,yBAA0B,CAChCC,SAAS,EACTC,UAAU,IALlBN,EAUJf,KAAOsB,oBAAuBP,IAC1BA,EAAMC,kBACSD,EAAME,eAAe,GAC7BC,cACH,IAAAC,MAAU,yBAA0B,CAChCC,SAAS,EACTC,UAAU,KAGlB,QAAoBrB,KAAKuB,WAAWvB,KAAKS,kBACrCe,IACAA,EAAYC,SAAU,GAE1B,MAAMC,EAAaX,EACdE,eACAU,MAAMnC,GAAOQ,KAAKO,aAAaqB,IAAIpC,KAExC,IAAKkC,EAAY,OACjB,QAAwB1B,KAAKuB,WAAWM,QAAQH,GAChD1B,KAAKS,iBAAmBqB,EACxB9B,KAAKU,iBAAmBoB,CADxB,EAmMJ9B,KAAQ+B,8BAA+B,EA4CvC/B,KAAQgC,kBAAmB,EA6J3BhC,KAAUiC,aAAeC,QAAQC,UAEjCnC,KAAUoC,oBAAsB,OAlkB5BpC,KAAKqC,iBACD,gCACArC,KAAKsC,gCAETtC,KAAKqC,iBACD,gCACArC,KAAKuC,8BACL,CACIC,SAAS,IAIjBxC,KAAKqC,iBAAiB,QAASrC,KAAKyC,aACpCzC,KAAKqC,iBAAiB,UAAWrC,KAAK0C,eACtC1C,KAAKqC,iBAAiB,WAAYrC,KAAK2C,gBACvC3C,KAAKqC,iBAAiB,YAAarC,KAAKsB,qBACxCtB,KAAKqC,iBAAiB,YAAarC,KAAKc,oBAzN5C,CAAoD8B,oBAChD,MAAO,CAACC,EAGZ,CAAYC,gBACR,MAAqB,YAATC,KAAAA,IAqChB,CAAWxB,iBACP,YAAUyB,mBACNhD,KAAKgD,iBAAmBhD,KAAKiD,yBAE1BjD,KAAKgD,gBAKR,CAAAC,wBACJjD,KAAKgD,iBAAmB,GAExB,MAAqB/D,EAAAe,KAAKkD,SAASC,iBAAiB,CAAEC,SAAS,IAC/D,IAAWC,MAAAA,KAAeC,EAAc,CACpC,MACID,EAAAA,eACM,CAACA,GACA,IAAIA,EAAYE,iBAAiB,MAE5C,IAAA,MAAAlE,OACQW,KAAKO,aAAaqB,IAAI4B,IACtBxD,KAAKgD,iBAAiBS,KAAKD,EAKvC,CAAO,OAAAxD,KAAKgD,gBAUhB,CAA+BU,gBAC3B,GAA0B,YAAtB1D,KAAK2D,aACL,MAAO,SAEX,OAAQ3D,KAAK4D,iBACT,IAAK,SACD,MAAO,gBACX,IAAK,WACD,MAAO,mBACX,QACI,MAAO,WAInB,eACI,MAAO,MAaH,CACJ7C,8BAAAA,GAEAA,EAAM8C,YAAYC,IAAI9D,KAAM,CACxB+D,eAAgBhD,EAAMiD,KAAKC,SAASC,UACpCC,oBAAqBpD,EAAMqD,6BAE3BpE,KAAKqE,UACLtD,EAAMqD,2BAA6BpE,MAEvCe,EAAMiD,KAAKC,SAASC,UAAYnD,EAAMiD,KAAKC,SAASC,WAAalE,IAU7D,CAAAsC,+BACJvB,GA7LR,IAAA1B,EAAAF,EA+LQ,MAAMmF,EAAcvD,EAAM8C,YAAYU,IAAIvE,MAE1C,IAAKsE,EAAa,OASlB,GAPAvD,EAAMiD,KAAKC,SAASO,WAAazD,EAAMiD,KAAKC,SAASO,YAAcxE,KAC/DsE,EAAYP,eAAiB/D,KAAKE,SAElCF,KAAKyE,UAFLH,GAIJtE,KAAK0E,aAAa3D,EAAMiD,MAEH,YAAjBhE,KAAKqE,QAAuB,CAC5BrE,KAAK4D,gBAAkB,UACvB,MAAMe,EAAa,OAAAC,EAAMR,EAAAA,iCAAN,EAAAQ,EAAkC1E,OACrDF,KAAK2D,aAAegB,EACd,QACE,OAAAE,EAAAA,EAAMT,iCAAN,EAAAS,EAAkCC,aAAa,UAC7C9E,KAAK8E,aAAa,cAClB,CACd,MAAW9E,KAAKqE,SACZrE,KAAK2D,aAAe3D,KAAKE,OACnB,OACEF,KAAK8E,aAAa,cAAW,EACrC9E,KAAK4D,gBAAkB5D,KAAKqE,UAE5BrE,KAAK2D,aAAe3D,KAAKE,OACnB,OACEF,KAAK8E,aAAa,cAAW,EACrC9E,KAAK4D,gBACqB,SAAtB5D,KAAK2D,aAA0B,SAAW,QAGlD,MACIvE,EAAyB,WAAzBY,KAAK4D,iBACoB,aAAzB5D,KAAK4D,gBACT7C,EAAMiD,KAAKC,SAASc,aAAatB,MAAMO,GACnChE,KAAKgF,gBAAgBhB,MAGpBK,IAAarE,KAAKqE,SAAoC,WAAzBrE,KAAK4D,mBAClC7C,EAAMiD,KAAKC,SAASgB,gBAErBlE,EAAMiD,KAAKkB,QAAQlF,KAAK0D,WACxB3C,EAAMiD,KAAKC,SAASgB,cAChBlE,EAAMiD,KAAKC,SAASgB,eAAiBjF,KACrCe,EAAMiD,KAAK3D,WACXL,KAAKW,iBAAiBmD,IAAI/C,EAAMiD,MAAM,GACtChE,KAAKM,cAAgB,IAAIN,KAAKM,cAAeS,EAAMiD,MACnDhE,KAAKK,SAAW,IAAIL,KAAKK,SAAUU,EAAMiD,KAAK7D,OAC9CH,KAAKG,MAAQH,KAAKK,SAAS8E,KAAKnF,KAAKI,iBAKzC,CAAAsE,aAAaV,GACjBhE,KAAKO,aAAa6E,IAAIpB,GACtBhE,KAAKqF,oBAGT,CAAcC,sBAAgBtB,GAC1BhE,KAAKO,aAAagF,OAAOvB,GACzBhE,KAAKgD,sBAAmB,EACpBgB,EAAKvC,UACLzB,KAAKqF,2BACCrF,KAAKwF,eACXxF,KAAKyF,QA0BG,CAAMA,OAAEC,cAAFzG,GAAkC,CAAxC,GACZ,IACKe,KAAKuB,WAAWjC,QACjBU,KAAKuB,WAAWoE,OAAOC,GAAcA,EAAUC,WAE/C,OAEJ,GACI7F,KAAKuB,WAAWuE,MACXF,GAAcA,EAAU3B,SAASC,YAAclE,OAIpD,YADAD,MAAM0F,MAAM,CAAEC,cAAAA,IAGlB1F,KAAK+F,sBAAsB,GAC3BhG,MAAM0F,MAAM,CAAEC,cAAAA,IACd,MAAMM,EAAehG,KAAKM,cAAc,GACpC0F,IAAiBN,GACjBM,EAAaC,eAAe,CAAEC,MAAO,WAIrC,CAAYnF,YAAAA,GAChB,GAAIA,EAAMoF,iBACN,OAGJ,MAAMC,EADOrF,EAAME,eACCU,MAAMnC,GAEhBA,aAAAA,SAGCA,EAAGsF,aAAa,UAAY9E,KAAK0D,YAEhC2C,MAARD,GAAQC,EAAAA,MAAQD,EAAOC,KAAK/G,OAG5BU,KAAKkB,cACD,IAAIC,MAAM,SAAU,CAChBC,SAAS,EACTC,UAAU,MAKV4C,MAARmC,OAAQnC,EAAAA,EAAAA,SAASgB,iBAAkBjF,MACnCA,KAAKuB,WAAWjC,SAEhByB,EAAMuF,iBACFF,EAAOG,YAAcH,EAAOI,OAGhCxG,KAAKyG,mBAAmBL,GAI5BpG,KAAK0G,oBAGF,CAAc3F,cAAAA,GAtVzB,IAuVQ5B,EAAA,MAAoCI,EAAAA,EAChCS,KACAe,EAAM4F,eAEV,GACI3G,KAAKuB,WAAWuE,MACXF,GAAcA,EAAU3B,SAASC,YAAclE,OAGpD,OAEJ,MAAuBZ,EAAAY,KAAK4G,cAA2BC,cAGjD5B,GACF,OAAAL,EAAKrD,KAAAA,WAAWvB,KAAKS,wBAArB,EAAAmE,EAAwCX,SAASgB,gBACjDjF,KACJ,IACI6G,IAAkB5B,IAChB6B,GAA+B/F,EAAMqF,SAAWpG,QAElDiF,EAAcQ,MAAM,CAAEC,eAAe,IACjCmB,GAA2C,IAA1B7G,KAAKS,kBAAwB,CAC9C,MAAesG,EAAA/G,KAAKuB,WAAWyF,WAC1BpB,GAAcA,IAAciB,IAE7BI,EAAS,GACTjH,KAAK+F,sBAAsBkB,EAIvC,CAAAjH,KAAKkH,0BAGF,CAAiCA,2BACpClH,KAAKqC,iBAAiB,UAAWrC,KAAKmH,cAGnC,CAAAxE,eAAe5B,GACdxB,EAAoBS,KAAMe,EAAM4F,iBAGpC3G,KAAKoH,0BACLpH,KAAKuB,WAAW8F,SAASC,GAAWA,EAAM7F,SAAU,IACpDzB,KAAKuH,gBAAgB,yBAGlB,CAAAH,0BACHpH,KAAKwH,oBAAoB,UAAWxH,KAAKmH,cAKnC,CAA8BpG,8BAAAA,GACpC,MAAMqF,EAASrF,EAAME,eAAe,GAE/BmF,EAAOqB,gBACZzH,KAAKY,mBAAmBkD,IACpBsC,EAAOqB,eACPrB,EAAOqB,eAIL,CAA8B1G,8BAAAA,GACpC,MAAMqF,EAASrF,EAAME,eAAe,GAE/BmF,EAAOqB,gBACZzH,KAAKY,mBAAmB2E,OAAOa,EAAOqB,eAqC1C,CAAanC,yBAAmBoC,GAC5B,MAAwBxI,EAAAc,KAAK4D,gBACvB+D,EAAsB,IAAI9G,IAAIb,KAAKW,kBACnCiH,EAAc5H,KAAKK,SAASwH,QAC5BC,EAAmB9H,KAAKM,cAAcuH,QACtCE,EAAW/H,KAAKG,MAChB6H,EAAehI,KAAKuB,WAAWvB,KAAKS,kBAQ1C,GAPIuH,IACAA,EAAavG,SAAU,EACvBuG,EAAaC,QAAS,GAE1BjI,KAAKS,iBAAmBT,KAAKuB,WAAWM,QAAQ6F,GAChD1H,KAAKkI,0BAA0BR,GAEP,aAApB9D,EAAgC,CAC5B5D,KAAKW,iBAAiBiB,IAAI8F,GAC1B1H,KAAKW,iBAAiB4E,OAAOmC,GAE7B1H,KAAKW,iBAAiBmD,IAAI4D,GAAY,GAM1C,MAA2BS,EAAA,GACrB7H,EAA4B,GAElCN,KAAKO,aAAa8G,SAASzB,IACnBA,EAAU3B,SAASgB,gBAAkBjF,MAErCA,KAAKW,iBAAiBiB,IAAIgE,KAC1BvF,EAASoD,KAAKmC,EAAUzF,OACxBG,EAAcmD,KAAKmC,GAE1B,IACD5F,KAAKK,SAAWA,EAChBL,KAAKM,cAAgBA,EACrBN,KAAKG,MAAQH,KAAKK,SAAS8E,KAAKnF,KAAKI,eACzC,MACSO,KAAAA,iBAAiByH,QACtBpI,KAAKW,iBAAiBmD,IAAI4D,GAAY,GACtC1H,KAAKG,MAAQuH,EAAWvH,MACxBH,KAAKK,SAAW,CAACqH,EAAWvH,OAC5BH,KAAKM,cAAgB,CAACoH,GAW1B,SARM1H,KAAKwF,gBACUxF,KAAKkB,cACtB,IAAIC,MAAM,SAAU,CAChBkH,YAAY,EACZjH,SAAS,EACTC,UAAU,KASd,OAJArB,KAAKK,SAAWuH,EAChB5H,KAAKM,cAAgBwH,EACrB9H,KAAKW,iBAAmBgH,OACxB3H,KAAKG,MAAQ4H,GAIbnE,GAAoB,WAApBA,EAA8B,CAC9B,IAAW0E,MAAAA,KAAWX,EAAoBY,OAClCD,IAAYZ,IACZY,EAAQjI,UAAW,GAG3BqH,EAAWrH,UAAW,CAC1B,KAA+B,iBAC3BqH,EAAWrH,UAAYqH,EAAWrH,SAIhC,CAAmBU,mBAAAA,GACzB,MAAQyH,KAAAA,GAASzH,EACX0H,EAAkBzI,KAAKuB,WAAWvB,KAAKS,kBACvCiI,EAAqB,cAATF,EAAuB,GAAI,EACvCG,EAAc3I,KAAK+F,sBAAsB2C,GAC3CC,IAAgBF,IAGpB1H,EAAMuF,iBACNvF,EAAMC,kBACN2H,EAAY1C,eAAe,CAAEC,MAAO,YAG9B,CAAA0C,4BAA4B7H,GAClC,MAAQyH,KAAAA,GAASzH,EACX8H,EACD7I,KAAK8I,OAAkB,eAATN,IACbxI,KAAK8I,OAAkB,cAATN,EACdO,EACD/I,KAAK8I,OAAkB,cAATN,IACbxI,KAAK8I,OAAkB,eAATN,EACpB,GAAIK,EAAmB,CACnB9H,EAAMC,kBACN,MAAMyH,EAAkBzI,KAAKuB,WAAWvB,KAAKS,kBACxB8F,MAAjBkC,GAAiBlC,EAAAA,YAGjBkC,EAAgBO,aAExB,MAAuC3J,GAAAW,KAAK8C,YACxC/B,EAAMC,kBACNhB,KAAKkB,cAAc,IAAAC,MAAU,QAAS,CAAEC,SAAS,KACjDpB,KAAKiJ,0BAIN,CAAA9B,cAAcpG,GA9iBzB,IAkjBQ5B,EAAA,GAFI4B,EAAMqF,SAAWpG,MACjBA,OAAUe,EAAMqF,OAAuB8C,eACbnI,EAAMoF,iBAChC,OAEJ,MAAwB/G,EAAAY,KAAKuB,WAAWvB,KAAKS,kBACzCgI,IACAA,EAAgBhH,SAAU,GAE9B,MAAQ+G,QAASzH,EACJ,QAATyH,EAIS,UAATA,GACIC,MAAAA,GAAAA,EAAiBlC,WAIjBkC,EAAgBO,cAIX,UAATR,GAA6B,UAATA,EAIX,cAATA,GAAiC,YAATA,EAI5BxI,KAAK4I,4BAA4B7H,GAH7Bf,KAAKmJ,mBAAmBpI,GAJxB,OAAA6D,EAAKrD,KAAAA,WAAWvB,KAAKS,oBAArBmE,EAAwCwE,QAbxCpJ,KAAK0G,kBAuBN,CAAAX,sBAAsBkB,GACzB,QAAaA,GAAU,EACjBzF,EAAcxB,KAAKuB,WAAWvB,KAAKS,kBACrCe,IACAA,EAAYC,SAAU,EAEtBD,EAAYyG,OAASzG,EAAYgF,MAErCxG,KAAKS,kBACAT,KAAKuB,WAAWjC,OAASU,KAAKS,iBAAmBwG,GAClDjH,KAAKuB,WAAWjC,OACpB,IAAkBD,EAAAW,KAAKuB,WAAWvB,KAAKS,kBACnC4I,EAAiBrJ,KAAKuB,WAAWjC,OAErC,KAAOqJ,EAAY9C,UAAYwD,GAC3BA,GAAkB,EAClBrJ,KAAKS,kBACAT,KAAKuB,WAAWjC,OAASU,KAAKS,iBAAmB6I,GAClDtJ,KAAKuB,WAAWjC,OACpBqJ,EAAc3I,KAAKuB,WAAWvB,KAAKS,kBAGvC,OAAkBoF,MAAAA,GAAAA,EAAAA,UACd7F,KAAKkI,0BAA0BS,GAE5BA,CAGH,oBACJY,SAASlH,iBACL,YACA,KACImH,uBAAsB,KAClB,MAAMhI,EAAcxB,KAAKuB,WAAWvB,KAAKS,kBACrCe,IACAA,EAAYC,SAAU,EACtBzB,KAAKiJ,0BAEZ,MAEL,CAAEQ,MAAM,GAMT,CAAAR,0BACH,IAAIS,EAA4B,EAChC,MAAM/I,EAAmB,IAAIE,IACvBR,EAAqB,GACrBC,EAA4B,GAClC,MAAgBN,KAAKuB,WAAWjC,OAChC,KAAOqK,GAAW,CACdA,GAAa,EACb,QAAkB3J,KAAKuB,WAAWoI,GAC9B/D,EAAU3B,SAASgB,gBAAkBjF,QAEjC4F,EAAUvF,WACRL,KAAK+B,8BACH/B,KAAKK,SAASuJ,SAAShE,EAAUzF,UAErCuJ,EAA4BC,EAC5BhJ,EAAiBmD,IAAI8B,GAAW,GAChCvF,EAASwJ,QAAQjE,EAAUzF,OAC3BG,EAAcuJ,QAAQjE,IAItB+D,IAAcD,IACd9D,EAAUnE,SAAU,GAIhCnB,CAAAA,EAAcwJ,KAAI,CAAC9F,EAAM3E,KAGjBA,EAAI,IACJ2E,EAAKvC,SAAU,EAEtB,IACDzB,KAAKW,iBAAmBA,EACxBX,KAAKK,SAAWA,EAChBL,KAAKM,cAAgBA,EACrBN,KAAKG,MAAQH,KAAKK,SAAS8E,KAAKnF,KAAKI,gBACrCJ,KAAKS,iBAAmBiJ,EACxB1J,KAAKU,iBAAmBgJ,CAKpB,CAA2BrE,qBAC/BrF,KAAKgD,sBAAmB,EACnBhD,KAAKgC,mBACNhC,KAAKgC,kBAAmB,EACxBhC,KAAKiC,aAAejC,KAAK+J,cAIjC,CAAczE,oBACLtF,KAAKgK,iBAMI9H,IAAAA,SAAS+H,GAAQT,uBAAsB,IAAMS,GAAI,aALrD/H,QAAQgI,IAAI,CACd,IAAAhI,SAAa+H,GAAQT,uBAAsB,IAAMS,GAAI,OACrDjK,KAAKwF,sBAKiB,IAA1BxF,KAAKgD,mBACLhD,KAAKiJ,0BACLjJ,KAAKmK,mBAETnK,KAAKgC,kBAAmB,CAGpB,CAAAmI,kBACJ,GAA8B,GAA1BnK,KAAKuB,WAAWjC,OAChB,OAEJ,MAAoBL,EAAAe,KAAKuB,WAAWvB,KAAKU,kBAEpCV,KAAK4G,cAA2BC,gBACjCuD,EAAYnG,SAASC,WAErBlE,KAAKkI,0BAA0BkC,EAIhC,CAAgCC,0BACnCrK,KAAKY,mBAAmByG,SAASiD,IAC7BA,EAAQ9D,MAAO,CAAf8D,IAEJtK,KAAKY,mBAAqB,IAAAC,GAGtB,CAAAqH,0BAA0BlE,GAC9B,GAAIA,EAAKC,SAASC,YAAclE,KAC5B,OAEJA,KAAKqK,0BACL,MACInL,EAAAc,KAAKuK,2BACHvK,KAAKuB,WAAWI,MAAM2F,GACbA,EAAMiD,0BAErBvG,EAAKvC,QAAUA,EACfzB,KAAKwK,aAAa,wBAAyBxG,EAAKyG,IAE5CzG,EAAKC,SAASgB,eACdjB,EAAKC,SAASgB,gBAAkBjF,MAEhCgE,EAAKC,SAASgB,cAAcQ,OAI5B,CAAiBiF,kBACrBtE,WAEA,QAAwBA,EAAOjD,iBAAiB,CAC5CC,SAAS,IAETpD,KAAKuB,WAAWjC,SAAWqL,EAAgBrL,QAC3CqL,EAAgBtD,SAASrD,SACa,IAAvBA,EAAK4G,eACZ5G,EAAK4G,eADL,GAON,CAAAC,qBACN,OAAOC,CAAAA;;0CAE2B9K,KAAK+K;0CACL/K,KAAKgL;8BACjBhL,KAAK0K;;SAKf,CAAyBO,SACrC,OAAYJ,KAAAA,oBAGG,CAAAK,aAAaC,GAC5BpL,MAAMmL,aAAaC,IACdnL,KAAKoL,aAAa,cAAgBpL,KAAKE,SAE3B,UADAF,KAAK8E,aAAa,QAE3B9E,KAAKyE,UAFI,EAITzE,KAAKyE,SAAW,GAGxB,MAAM4G,EAA8B,CAChC,IAAInJ,SAAS+H,GAAQT,uBAAsB,IAAMS,GAAI,QAEzD,IAAIjK,KAAKsL,UAAUjE,SAASrD,IACa,iBAAhCA,EAAkBuH,WACnBF,EAAQ5H,KAAMO,EAAkBwB,eAD/BxB,IAIThE,KAAKwL,kBAAoBtJ,QAAQgI,IAAImB,EAGtB,CAAQI,QAAAA,GACvB1L,MAAM2L,QAAQD,GACVA,EAAQ7J,IAAI,YAAc5B,KAAKgK,YAC/BhK,KAAK2L,iBAGLF,EAAQ7J,IAAI,WACX5B,KAAKC,YAAyC,MAAjBsE,IAAI,YAE9BvE,KAAKC,MACLD,KAAKwK,aAAa,aAAcxK,KAAKC,OAGrCD,KAAKuH,gBAAgB,cAKvB,CAAAoE,iBACN,MAAMN,EAA8B,CAChC,aAAapB,GAAQT,uBAAsB,IAAMS,GAAI,QAEzDjK,KAAKO,aAAa8G,SAASzB,IACvByF,EAAQ5H,KAAKmC,EAAUgF,gBAAvBS,IAEJrL,KAAKwL,kBAAoBtJ,QAAQgI,IAAImB,EAGzB,qBACZtL,MAAM6L,qBACD5L,KAAKoL,aAAa,UAAYpL,KAAKE,QACpCF,KAAKwK,aAAa,OAAQxK,KAAK6L,SAEnC7L,KAAKwF,eAAesG,MAAK,IAAM9L,KAAKmK,mBAExB,CAAA4B,uBACZ/L,KAAKgD,sBAAmB,EACxBjD,MAAMgM,sBAUV,CAAyBzG,0BACrB,MAAkBrG,cAAY+M,oBAC9B,aAAMhM,KAAKwL,6BACAvJ,aACJgK,CAEf,EA5wBWC,EADNC,CAAAA,EAAS,CAAEC,KAAMC,OAAQC,SAAS,KAT1BC,EAUFC,UAAAA,QAAAA,GAGAN,GADNC,EAAS,CAAEC,KAAMK,QAASH,SAAS,KAZ3BC,EAaFC,UAHAN,SAAAA,GAMAA,EADNC,CAAAA,EAAS,CAAEC,KAAMC,OAAQC,SAAS,KAf1BC,EAgBFC,UANAN,UAAAA,GASAA,GADNC,EAAS,CAAEC,KAAMC,UAlBTE,EAmBFC,UATAN,QAAAA,GAcAA,GADNC,EAAS,CAAEC,KAAMC,OAAQK,UAAW,qBAvB5BH,EAwBFC,8BAKAN,EAAAA,CADNC,EAAS,CAAEO,WAAW,KA5BdH,EA6BFC,wBAGAN,EAAAA,CADNC,EAAS,CAAEO,WAAW,KA/BdH,EAgCFC,UAAAA,gBAAAA,GAGAN,EADNS,CAAAA,EAAM,qBAlCEJ,EAmCFC,UAzBAN,WAAAA,GCzDXU,EAAc,UAAWL"}