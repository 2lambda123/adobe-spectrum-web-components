{"version":3,"file":"dea322e1.js","sources":["../../../tools/theme/src/Theme.js"],"sourcesContent":["\"use strict\";import{supportsAdoptingStyleSheets as h}from\"@spectrum-web-components/base\";const d=[\"spectrum\",\"express\"],m=[\"medium\",\"large\",\"medium-express\",\"large-express\"],c=[\"light\",\"lightest\",\"dark\",\"darkest\",\"light-express\",\"lightest-express\",\"dark-express\",\"darkest-express\"],r=class extends HTMLElement{constructor(){super();this._dir=\"\";this._theme=\"spectrum\";this._color=\"\";this._scale=\"\";this.trackedChildren=new Set;this._updateRequested=!1;this._contextConsumers=new Map;this.attachShadow({mode:\"open\"});const e=document.importNode(r.template.content,!0);this.shadowRoot.appendChild(e),this.shouldAdoptStyles(),this.addEventListener(\"sp-query-theme\",this.onQueryTheme),this.addEventListener(\"sp-language-context\",this._handleContextPresence),this.updateComplete=this.__createDeferredPromise()}static get observedAttributes(){return[\"color\",\"scale\",\"theme\",\"lang\",\"dir\"]}set dir(e){if(e===this.dir)return;this.setAttribute(\"dir\",e),this._dir=e;const t=e===\"rtl\"?e:\"ltr\";this.trackedChildren.forEach(s=>{s.setAttribute(\"dir\",t)})}get dir(){return this._dir}attributeChangedCallback(e,t,s){t!==s&&(e===\"color\"?this.color=s:e===\"scale\"?this.scale=s:e===\"lang\"&&!!s?(this.lang=s,this._provideContext()):e===\"theme\"?this.theme=s:e===\"dir\"&&(this.dir=s))}requestUpdate(){window.ShadyCSS!==void 0&&!window.ShadyCSS.nativeShadow?window.ShadyCSS.styleElement(this):this.shouldAdoptStyles()}get theme(){const e=r.themeFragmentsByKind.get(\"theme\"),{name:t}=e&&e.get(\"default\")||{};return this._theme||t||\"\"}set theme(e){if(e===this._theme)return;const t=!!e&&d.includes(e)?e:this.theme;t!==this._theme&&(this._theme=t,this.requestUpdate()),t?this.setAttribute(\"theme\",t):this.removeAttribute(\"theme\")}get color(){const e=r.themeFragmentsByKind.get(\"color\"),{name:t}=e&&e.get(\"default\")||{};return this._color||t||\"\"}set color(e){if(e===this._color)return;const t=!!e&&c.includes(e)?e:this.color;t!==this._color&&(this._color=t,this.requestUpdate()),t?this.setAttribute(\"color\",t):this.removeAttribute(\"color\")}get scale(){const e=r.themeFragmentsByKind.get(\"scale\"),{name:t}=e&&e.get(\"default\")||{};return this._scale||t||\"\"}set scale(e){if(e===this._scale)return;const t=!!e&&m.includes(e)?e:this.scale;t!==this._scale&&(this._scale=t,this.requestUpdate()),t?this.setAttribute(\"scale\",t):this.removeAttribute(\"scale\")}get styles(){const e=[...r.themeFragmentsByKind.keys()],t=(a,i,n)=>{const o=n&&n!==\"theme\"&&this.theme===\"express\"?a.get(`${i}-express`):a.get(i),l=i===\"spectrum\"||!n||this.hasAttribute(n);if(o&&l)return o.styles};return[...e.reduce((a,i)=>{const n=r.themeFragmentsByKind.get(i);let o;if(i===\"app\"||i===\"core\")o=t(n,i);else{const{[i]:l}=this;o=t(n,l,i)}return o&&a.push(o),a},[])]}static get template(){return this.templateElement||(this.templateElement=document.createElement(\"template\"),this.templateElement.innerHTML=\"<slot></slot>\"),this.templateElement}__createDeferredPromise(){return new Promise(e=>{this.__resolve=e})}onQueryTheme(e){if(e.defaultPrevented)return;e.preventDefault();const{detail:t}=e;t.color=this.color||void 0,t.scale=this.scale||void 0,t.lang=this.lang||document.documentElement.lang||navigator.language,t.theme=this.theme||void 0}connectedCallback(){if(this.shouldAdoptStyles(),window.ShadyCSS!==void 0&&window.ShadyCSS.styleElement(this),r.instances.add(this),!this.hasAttribute(\"dir\")){let e=this.assignedSlot||this.parentNode;for(;e!==document.documentElement&&!(e instanceof r);)e=e.assignedSlot||e.parentNode||e.host;this.dir=e.dir===\"rtl\"?e.dir:\"ltr\"}}disconnectedCallback(){r.instances.delete(this)}startManagingContentDirection(e){this.trackedChildren.add(e)}stopManagingContentDirection(e){this.trackedChildren.delete(e)}async shouldAdoptStyles(){this._updateRequested||(this.updateComplete=this.__createDeferredPromise(),this._updateRequested=!0,this._updateRequested=await!1,this.adoptStyles(),this.__resolve(!0))}adoptStyles(){const e=this.styles;if(window.ShadyCSS!==void 0&&!window.ShadyCSS.nativeShadow&&window.ShadyCSS.ScopingShim){const t=[];for(const[s,a]of r.themeFragmentsByKind)for(const[i,{styles:n}]of a){if(i===\"default\")continue;let o=n.cssText;r.defaultFragments.has(i)||(o=o.replace(\":host\",`:host([${s}='${i}'])`)),t.push(o)}window.ShadyCSS.ScopingShim.prepareAdoptedCssText(t,this.localName),window.ShadyCSS.prepareTemplate(r.template,this.localName)}else if(h){const t=[];for(const s of e)t.push(s.styleSheet);this.shadowRoot.adoptedStyleSheets=t}else this.shadowRoot.querySelectorAll(\"style\").forEach(s=>s.remove()),e.forEach(s=>{const a=document.createElement(\"style\");a.textContent=s.cssText,this.shadowRoot.appendChild(a)})}static registerThemeFragment(e,t,s){const a=r.themeFragmentsByKind.get(t)||new Map;a.size===0&&(r.themeFragmentsByKind.set(t,a),a.set(\"default\",{name:e,styles:s}),r.defaultFragments.add(e)),a.set(e,{name:e,styles:s}),r.instances.forEach(i=>i.shouldAdoptStyles())}_provideContext(){this._contextConsumers.forEach(([e,t])=>e(this.lang,t))}_handleContextPresence(e){const t=e.composedPath()[0];if(this._contextConsumers.has(t))return;this._contextConsumers.set(t,[e.detail.callback,()=>this._contextConsumers.delete(t)]);const[s,a]=this._contextConsumers.get(t)||[];s&&a&&s(this.lang||document.documentElement.lang||navigator.language,a)}};export let Theme=r;Theme.themeFragmentsByKind=new Map,Theme.defaultFragments=new Set([\"spectrum\"]),Theme.instances=new Set;\n//# sourceMappingURL=Theme.js.map\n"],"names":["ScaleValues","ColorValues","_Theme","HTMLElement","constructor","super","this","_dir","_theme","_color","_scale","trackedChildren","Set","_updateRequested","_contextConsumers","attachShadow","mode","node","document","importNode","template","content","shadowRoot","appendChild","shouldAdoptStyles","addEventListener","onQueryTheme","_handleContextPresence","updateComplete","__createDeferredPromise","observedAttributes","dir","setAttribute","forEach","el","targetDir","attrName","old","value","color","scale","lang","_provideContext","theme","requestUpdate","window","ShadyCSS","nativeShadow","styleElement","themeFragmentsByKind","get","name","themeFragments","newValue","ThemeVariantValues","includes","removeAttribute","t","styles","themeKinds","keys","getStyle","fragments","kind","isAppliedFragment","hasAttribute","currentStyles","reduce","acc","kindFragments","style","i","push","templateElement","createElement","innerHTML","Promise","resolve","__resolve","event","defaultPrevented","preventDefault","detail","documentElement","navigator","language","connectedCallback","instances","add","e","assignedSlot","parentNode","dirParent","host","delete","stopManagingContentDirection","async","adoptStyles","ScopingShim","fragmentCSS","cssText","defaultFragments","has","replace","prepareAdoptedCssText","localName","prepareTemplate","supportsAdoptingStyleSheets","styleSheets","s","styleSheet","adoptedStyleSheets","querySelectorAll","element","remove","textContent","static","Map","fragmentMap","size","set","instance","callback","unsubscribe","composedPath","target","Theme"],"mappings":"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"}