{"version":3,"file":"b9ffab03.js","sources":["../../../packages/menu/src/menu.css.js","../../../packages/menu/src/Menu.js","../../../packages/menu/sp-menu.js"],"sourcesContent":["\"use strict\";import{css as e}from\"@spectrum-web-components/base\";const t=e`\n:host{--spectrum-menu-item-min-height:var(--spectrum-component-height-100);--spectrum-menu-item-icon-height:var(--spectrum-workflow-icon-size-100);--spectrum-menu-item-icon-width:var(--spectrum-workflow-icon-size-100);--spectrum-menu-item-label-font-size:var(--spectrum-font-size-100);--spectrum-menu-item-label-text-to-visual:var(\n--spectrum-text-to-visual-100\n);--spectrum-menu-item-label-inline-edge-to-content:var(\n--spectrum-component-edge-to-text-100\n);--spectrum-menu-item-top-edge-to-text:var(\n--spectrum-component-top-to-text-100\n);--spectrum-menu-item-bottom-edge-to-text:var(\n--spectrum-component-bottom-to-text-100\n);--spectrum-menu-item-text-to-control:var(--spectrum-text-to-control-100);--spectrum-menu-item-description-font-size:var(--spectrum-font-size-75);--spectrum-menu-section-header-font-size:var(--spectrum-font-size-100);--spectrum-menu-section-header-min-width:var(\n--spectrum-component-height-100\n);--spectrum-menu-item-selectable-edge-to-text-not-selected:var(\n--spectrum-menu-item-selectable-edge-to-text-not-selected-medium\n);--spectrum-menu-item-checkmark-height:var(\n--spectrum-menu-item-checkmark-height-medium\n);--spectrum-menu-item-checkmark-width:var(\n--spectrum-menu-item-checkmark-width-medium\n);--spectrum-menu-item-top-to-checkmark:var(\n--spectrum-menu-item-top-to-selected-icon-medium\n);--spectrum-menu-item-label-line-height:var(--spectrum-line-height-100);--spectrum-menu-item-label-line-height-cjk:var(\n--spectrum-cjk-line-height-100\n);--spectrum-menu-item-label-to-description-spacing:var(\n--spectrum-menu-item-label-to-description\n);--spectrum-menu-item-focus-indicator-width:var(\n--spectrum-border-width-200\n);--spectrum-menu-item-focus-indicator-color:var(--spectrum-blue-800);--spectrum-menu-item-label-to-value-area-min-spacing:var(\n--spectrum-spacing-100\n);--spectrum-menu-item-label-content-color-default:var(\n--spectrum-neutral-content-color-default\n);--spectrum-menu-item-label-content-color-hover:var(\n--spectrum-neutral-content-color-hover\n);--spectrum-menu-item-label-content-color-down:var(\n--spectrum-neutral-content-color-down\n);--spectrum-menu-item-label-content-color-focus:var(\n--spectrum-neutral-content-color-key-focus\n);--spectrum-menu-item-label-icon-color-default:var(\n--spectrum-neutral-content-color-default\n);--spectrum-menu-item-label-icon-color-hover:var(\n--spectrum-neutral-content-color-hover\n);--spectrum-menu-item-label-icon-color-down:var(\n--spectrum-neutral-content-color-down\n);--spectrum-menu-item-label-icon-color-focus:var(\n--spectrum-neutral-content-color-key-focus\n);--spectrum-menu-item-label-content-color-disabled:var(\n--spectrum-disabled-content-color\n);--spectrum-menu-item-label-icon-color-disabled:var(\n--spectrum-disabled-content-color\n);--spectrum-menu-item-description-line-height:var(\n--spectrum-line-height-100\n);--spectrum-menu-item-description-line-height-cjk:var(\n--spectrum-cjk-line-height-100\n);--spectrum-menu-item-description-color-default:var(\n--spectrum-neutral-subdued-content-color-default\n);--spectrum-menu-item-description-color-hover:var(\n--spectrum-neutral-subdued-content-color-hover\n);--spectrum-menu-item-description-color-down:var(\n--spectrum-neutral-subdued-content-color-down\n);--spectrum-menu-item-description-color-focus:var(\n--spectrum-neutral-subdued-content-color-key-focus\n);--spectrum-menu-item-description-color-disabled:var(\n--spectrum-disabled-content-color\n);--spectrum-menu-section-header-line-height:var(--spectrum-line-height-100);--spectrum-menu-section-header-line-height-cjk:var(\n--spectrum-cjk-line-height-100\n);--spectrum-menu-section-header-font-weight:var(\n--spectrum-bold-font-weight\n);--spectrum-menu-section-header-color:var(--spectrum-gray-900);--spectrum-menu-collapsible-icon-color:var(--spectrum-gray-900);--spectrum-menu-checkmark-icon-color-default:var(\n--spectrum-accent-color-900\n);--spectrum-menu-checkmark-icon-color-hover:var(\n--spectrum-accent-color-1000\n);--spectrum-menu-checkmark-icon-color-down:var(\n--spectrum-accent-color-1100\n);--spectrum-menu-checkmark-icon-color-focus:var(\n--spectrum-accent-color-1000\n);--spectrum-menu-drillin-icon-color-default:var(\n--spectrum-neutral-subdued-content-color-default\n);--spectrum-menu-drillin-icon-color-hover:var(\n--spectrum-neutral-subdued-content-color-hover\n);--spectrum-menu-drillin-icon-color-down:var(\n--spectrum-neutral-subdued-content-color-down\n);--spectrum-menu-drillin-icon-color-focus:var(\n--spectrum-neutral-subdued-content-color-key-focus\n);--spectrum-menu-item-value-color-default:var(\n--spectrum-neutral-subdued-content-color-default\n);--spectrum-menu-item-value-color-hover:var(\n--spectrum-neutral-subdued-content-color-hover\n);--spectrum-menu-item-value-color-down:var(\n--spectrum-neutral-subdued-content-color-down\n);--spectrum-menu-item-value-color-focus:var(\n--spectrum-neutral-subdued-content-color-key-focus\n);--spectrum-menu-checkmark-display-hidden:none;--spectrum-menu-checkmark-display-shown:block;--spectrum-menu-checkmark-display:var(\n--spectrum-menu-checkmark-display-shown\n);--spectrum-menu-item-collapsible-has-icon-submenu-item-padding-x-start:calc(var(--spectrum-menu-item-label-inline-edge-to-content) + var(--spectrum-menu-item-checkmark-width) + var(--spectrum-menu-item-text-to-control) + var(--spectrum-menu-item-icon-width) + var(--spectrum-menu-item-label-text-to-visual) + var(--spectrum-menu-item-focus-indicator-width));--spectrum-menu-item-collapsible-no-icon-submenu-item-padding-x-start:calc(var(--spectrum-menu-item-label-inline-edge-to-content) + var(--spectrum-menu-item-checkmark-width) + var(--spectrum-menu-item-label-text-to-visual) + var(--spectrum-menu-item-focus-indicator-width))}:host([size=s]){--spectrum-menu-item-min-height:var(--spectrum-component-height-75);--spectrum-menu-item-icon-height:var(--spectrum-workflow-icon-size-75);--spectrum-menu-item-icon-width:var(--spectrum-workflow-icon-size-75);--spectrum-menu-item-label-font-size:var(--spectrum-font-size-75);--spectrum-menu-item-label-text-to-visual:var(\n--spectrum-text-to-visual-75\n);--spectrum-menu-item-label-inline-edge-to-content:var(\n--spectrum-component-edge-to-text-75\n);--spectrum-menu-item-top-edge-to-text:var(\n--spectrum-component-top-to-text-75\n);--spectrum-menu-item-bottom-edge-to-text:var(\n--spectrum-component-bottom-to-text-75\n);--spectrum-menu-item-text-to-control:var(--spectrum-text-to-control-75);--spectrum-menu-item-description-font-size:var(--spectrum-font-size-50);--spectrum-menu-section-header-font-size:var(--spectrum-font-size-75);--spectrum-menu-section-header-min-width:var(\n--spectrum-component-height-75\n);--spectrum-menu-item-selectable-edge-to-text-not-selected:var(\n--spectrum-menu-item-selectable-edge-to-text-not-selected-small\n);--spectrum-menu-item-checkmark-height:var(\n--spectrum-menu-item-checkmark-height-small\n);--spectrum-menu-item-checkmark-width:var(\n--spectrum-menu-item-checkmark-width-small\n);--spectrum-menu-item-top-to-checkmark:var(\n--spectrum-menu-item-top-to-selected-icon-small\n)}:host([size=l]){--spectrum-menu-item-min-height:var(--spectrum-component-height-200);--spectrum-menu-item-icon-height:var(--spectrum-workflow-icon-size-200);--spectrum-menu-item-icon-width:var(--spectrum-workflow-icon-size-200);--spectrum-menu-item-label-font-size:var(--spectrum-font-size-200);--spectrum-menu-item-label-text-to-visual:var(\n--spectrum-text-to-visual-200\n);--spectrum-menu-item-label-inline-edge-to-content:var(\n--spectrum-component-edge-to-text-200\n);--spectrum-menu-item-top-edge-to-text:var(\n--spectrum-component-top-to-text-200\n);--spectrum-menu-item-bottom-edge-to-text:var(\n--spectrum-component-bottom-to-text-200\n);--spectrum-menu-item-text-to-control:var(--spectrum-text-to-control-200);--spectrum-menu-item-description-font-size:var(--spectrum-font-size-100);--spectrum-menu-section-header-font-size:var(--spectrum-font-size-200);--spectrum-menu-section-header-min-width:var(\n--spectrum-component-height-200\n);--spectrum-menu-item-selectable-edge-to-text-not-selected:var(\n--spectrum-menu-item-selectable-edge-to-text-not-selected-large\n);--spectrum-menu-item-checkmark-height:var(\n--spectrum-menu-item-checkmark-height-large\n);--spectrum-menu-item-checkmark-width:var(\n--spectrum-menu-item-checkmark-width-large\n);--spectrum-menu-item-top-to-checkmark:var(\n--spectrum-menu-item-top-to-selected-icon-large\n)}:host([size=xl]){--spectrum-menu-item-min-height:var(--spectrum-component-height-300);--spectrum-menu-item-icon-height:var(--spectrum-workflow-icon-size-300);--spectrum-menu-item-icon-width:var(--spectrum-workflow-icon-size-300);--spectrum-menu-item-label-font-size:var(--spectrum-font-size-300);--spectrum-menu-item-label-text-to-visual:var(\n--spectrum-text-to-visual-300\n);--spectrum-menu-item-label-inline-edge-to-content:var(\n--spectrum-component-edge-to-text-300\n);--spectrum-menu-item-top-edge-to-text:var(\n--spectrum-component-top-to-text-300\n);--spectrum-menu-item-bottom-edge-to-text:var(\n--spectrum-component-bottom-to-text-300\n);--spectrum-menu-item-text-to-control:var(--spectrum-text-to-control-300);--spectrum-menu-item-description-font-size:var(--spectrum-font-size-200);--spectrum-menu-section-header-font-size:var(--spectrum-font-size-300);--spectrum-menu-section-header-min-width:var(\n--spectrum-component-height-300\n);--spectrum-menu-item-selectable-edge-to-text-not-selected:var(\n--spectrum-menu-item-selectable-edge-to-text-not-selected-extra-large\n);--spectrum-menu-item-checkmark-height:var(\n--spectrum-menu-item-checkmark-height-extra-large\n);--spectrum-menu-item-checkmark-width:var(\n--spectrum-menu-item-checkmark-width-extra-large\n);--spectrum-menu-item-top-to-checkmark:var(\n--spectrum-menu-item-top-to-selected-icon-extra-large\n)}@media (forced-colors:active){:host{--highcontrast-menu-item-background-color-default:ButtonFace;--highcontrast-menu-item-color-default:ButtonText;--highcontrast-menu-item-background-color-focus:Highlight;--highcontrast-menu-item-color-focus:HighlightText;--highcontrast-menu-checkmark-icon-color-default:Highlight;--highcontrast-menu-item-color-disabled:GrayText;--highcontrast-menu-item-focus-indicator-color:Highlight;--highcontrast-menu-item-selected-background-color:Highlight;--highcontrast-menu-item-selected-color:HighlightText}@supports (color:SelectedItem){:host{--highcontrast-menu-item-selected-background-color:SelectedItem;--highcontrast-menu-item-selected-color:SelectedItemText}}}:host{box-sizing:border-box;display:inline-block;list-style-type:none;margin:0;overflow:auto;padding:0}:host:lang(ja),:host:lang(ko),:host:lang(zh){--spectrum-menu-item-label-line-height:var(\n--mod-menu-item-label-line-height-cjk,var(--spectrum-menu-item-label-line-height-cjk)\n);--spectrum-menu-item-description-line-height:var(\n--mod-menu-item-description-line-height-cjk,var(--spectrum-menu-item-description-line-height-cjk)\n);--spectrum-menu-section-header-line-height:var(\n--mod-menu-section-header-line-height-cjk,var(--spectrum-menu-section-header-line-height-cjk)\n)}:host([selects]) ::slotted(sp-menu-item){--spectrum-menu-checkmark-display:var(\n--spectrum-menu-checkmark-display-hidden\n);padding-inline-start:var(\n--mod-menu-item-selectable-edge-to-text-not-selected,var(--spectrum-menu-item-selectable-edge-to-text-not-selected)\n)}:host([selects]) ::slotted(sp-menu-item[selected]){--spectrum-menu-checkmark-display:var(\n--spectrum-menu-checkmark-display-shown\n);padding-inline-start:var(\n--mod-menu-item-label-inline-edge-to-content,var(--spectrum-menu-item-label-inline-edge-to-content)\n)}li:not(::slotted(sp-menu-item),.menu-divider){box-sizing:border-box;display:block;margin:0;padding:0;position:relative}.spectrum-Menu-sectionHeading{color:var(\n--highcontrast-menu-item-color-default,var(\n--mod-menu-section-header-color,var(--spectrum-menu-section-header-color)\n)\n);display:block;font-size:var(\n--mod-menu-section-header-font-size,var(--spectrum-menu-section-header-font-size)\n);font-weight:var(\n--mod-menu-section-header-font-weight,var(--spectrum-menu-section-header-font-weight)\n);grid-area:sectionHeadingArea/1/sectionHeadingArea/-1;line-height:var(\n--mod-menu-section-header-line-height,var(--spectrum-menu-section-header-line-height)\n);min-inline-size:var(\n--mod-menu-section-header-min-width,var(--spectrum-menu-section-header-min-width)\n);padding-block-end:var(\n--mod-menu-section-header-bottom-edge-to-text,var(\n--mod-menu-item-bottom-edge-to-text,var(--spectrum-menu-item-bottom-edge-to-text)\n)\n);padding-block-start:var(\n--mod-menu-section-header-top-edge-to-text,var(\n--mod-menu-item-top-edge-to-text,var(--spectrum-menu-item-top-edge-to-text)\n)\n);padding-inline:var(\n--mod-menu-item-label-inline-edge-to-content,var(--spectrum-menu-item-label-inline-edge-to-content)\n)}:host{display:inline-flex;flex-direction:column;width:var(--swc-menu-width)}:host(:focus){outline:none}::slotted(*){flex-shrink:0}\n`;export default t;\n//# sourceMappingURL=menu.css.js.map\n","\"use strict\";var p=Object.defineProperty;var f=Object.getOwnPropertyDescriptor;var l=(c,o,e,s)=>{for(var t=s>1?void 0:s?f(o,e):o,i=c.length-1,n;i>=0;i--)(n=c[i])&&(t=(s?n(o,e,t):n(t))||t);return s&&t&&p(o,e,t),t};import{html as I,SizedMixin as v,SpectrumElement as b}from\"@spectrum-web-components/base\";import{property as a,query as g}from\"@spectrum-web-components/base/src/decorators.js\";import y from\"./menu.css.js\";function S(c,o){return!!o&&(c===o||c.contains(o))}export class Menu extends v(b,{noDefaultSize:!0}){constructor(){super();this.label=\"\";this.ignore=!1;this.value=\"\";this.valueSeparator=\",\";this._selected=[];this.selectedItems=[];this.childItemSet=new Set;this.focusedItemIndex=0;this.focusInItemIndex=0;this.selectedItemsMap=new Map;this.descendentOverlays=new Map;this.handleSubmenuClosed=e=>{e.stopPropagation(),e.composedPath()[0].dispatchEvent(new Event(\"sp-menu-submenu-closed\",{bubbles:!0,composed:!0}))};this.handleSubmenuOpened=e=>{e.stopPropagation(),e.composedPath()[0].dispatchEvent(new Event(\"sp-menu-submenu-opened\",{bubbles:!0,composed:!0}));const t=this.childItems[this.focusedItemIndex];t&&(t.focused=!1);const i=e.composedPath().find(d=>this.childItemSet.has(d));if(!i)return;const n=this.childItems.indexOf(i);this.focusedItemIndex=n,this.focusInItemIndex=n};this._hasUpdatedSelectedItemIndex=!1;this._willUpdateItems=!1;this.cacheUpdated=Promise.resolve();this.resolveCacheUpdated=()=>{};this.addEventListener(\"sp-menu-item-added-or-updated\",this.onSelectableItemAddedOrUpdated),this.addEventListener(\"sp-menu-item-added-or-updated\",this.onFocusableItemAddedOrUpdated,{capture:!0}),this.addEventListener(\"click\",this.handleClick),this.addEventListener(\"focusin\",this.handleFocusin),this.addEventListener(\"blur\",this.handleBlur),this.addEventListener(\"sp-opened\",this.handleSubmenuOpened),this.addEventListener(\"sp-closed\",this.handleSubmenuClosed)}static get styles(){return[y]}get isSubmenu(){return this.slot===\"submenu\"}get selected(){return this._selected}set selected(e){if(e===this.selected)return;const s=this.selected;this._selected=e,this.selectedItems=[],this.selectedItemsMap.clear(),this.childItems.forEach(t=>{t.selected=this.selected.includes(t.value),t.selected&&(this.selectedItems.push(t),this.selectedItemsMap.set(t,!0))}),this.requestUpdate(\"selected\",s)}get childItems(){return this.cachedChildItems||(this.cachedChildItems=this.updateCachedMenuItems()),this.cachedChildItems}updateCachedMenuItems(){if(this.cachedChildItems=[],!this.menuSlot)return[];const e=this.menuSlot.assignedElements({flatten:!0});for(const[s,t]of e.entries()){if(this.childItemSet.has(t)){this.cachedChildItems.push(t);continue}const n=t.localName===\"slot\"?t.assignedElements({flatten:!0}):[...t.querySelectorAll(\":scope > *\")];e.splice(s,1,t,...n)}return this.cachedChildItems}get childRole(){if(this.resolvedRole===\"listbox\")return\"option\";switch(this.resolvedSelects){case\"single\":return\"menuitemradio\";case\"multiple\":return\"menuitemcheckbox\";default:return\"menuitem\"}}get ownRole(){return\"menu\"}onFocusableItemAddedOrUpdated(e){e.menuCascade.set(this,{hadFocusRoot:!!e.item.menuData.focusRoot,ancestorWithSelects:e.currentAncestorWithSelects}),this.selects&&(e.currentAncestorWithSelects=this),e.item.menuData.focusRoot=e.item.menuData.focusRoot||this}onSelectableItemAddedOrUpdated(e){var i,n;const s=e.menuCascade.get(this);if(!s)return;if(e.item.menuData.parentMenu=e.item.menuData.parentMenu||this,s.hadFocusRoot&&!this.ignore&&(this.tabIndex=-1),this.addChildItem(e.item),this.selects===\"inherit\"){this.resolvedSelects=\"inherit\";const d=(i=e.currentAncestorWithSelects)==null?void 0:i.ignore;this.resolvedRole=d?\"none\":((n=e.currentAncestorWithSelects)==null?void 0:n.getAttribute(\"role\"))||this.getAttribute(\"role\")||void 0}else this.selects?(this.resolvedRole=this.ignore?\"none\":this.getAttribute(\"role\")||void 0,this.resolvedSelects=this.selects):(this.resolvedRole=this.ignore?\"none\":this.getAttribute(\"role\")||void 0,this.resolvedSelects=this.resolvedRole===\"none\"?\"ignore\":\"none\");const t=this.resolvedSelects===\"single\"||this.resolvedSelects===\"multiple\";e.item.menuData.cleanupSteps.push(d=>this.removeChildItem(d)),(t||!this.selects&&this.resolvedSelects!==\"ignore\")&&!e.item.menuData.selectionRoot&&(e.item.setRole(this.childRole),e.item.menuData.selectionRoot=e.item.menuData.selectionRoot||this,e.item.selected&&(this.selectedItemsMap.set(e.item,!0),this.selectedItems=[...this.selectedItems,e.item],this._selected=[...this.selected,e.item.value],this.value=this.selected.join(this.valueSeparator)))}addChildItem(e){this.childItemSet.add(e),this.handleItemsChanged()}async removeChildItem(e){this.childItemSet.delete(e),this.cachedChildItems=void 0,e.focused&&(this.handleItemsChanged(),await this.updateComplete,this.focus())}focus({preventScroll:e}={}){if(!this.childItems.length||this.childItems.every(t=>t.disabled))return;if(this.childItems.some(t=>t.menuData.focusRoot!==this)){super.focus({preventScroll:e});return}this.focusMenuItemByOffset(0),super.focus({preventScroll:e});const s=this.selectedItems[0];s&&!e&&s.scrollIntoView({block:\"nearest\"})}handleClick(e){const t=e.composedPath().find(i=>i instanceof Element?i.getAttribute(\"role\")===this.childRole:!1);if(e.defaultPrevented){const i=this.childItems.indexOf(t);(t==null?void 0:t.menuData.focusRoot)===this&&i>-1&&(this.focusedItemIndex=i);return}if(t!=null&&t.href&&t.href.length){this.dispatchEvent(new Event(\"change\",{bubbles:!0,composed:!0}));return}else if((t==null?void 0:t.menuData.selectionRoot)===this&&this.childItems.length){if(e.preventDefault(),t.hasSubmenu||t.open)return;this.selectOrToggleItem(t)}else return;this.prepareToCleanUp()}handleFocusin(e){var i;if(this.childItems.some(n=>n.menuData.focusRoot!==this))return;const s=this.getRootNode().activeElement,t=((i=this.childItems[this.focusedItemIndex])==null?void 0:i.menuData.selectionRoot)||this;if((s!==t||e.target!==this)&&(t.focus({preventScroll:!0}),s&&this.focusedItemIndex===0)){const n=this.childItems.findIndex(d=>d===s);this.focusMenuItemByOffset(Math.max(n,0))}this.startListeningToKeyboard()}startListeningToKeyboard(){this.addEventListener(\"keydown\",this.handleKeydown)}handleBlur(e){S(this,e.relatedTarget)||(this.stopListeningToKeyboard(),this.childItems.forEach(s=>s.focused=!1),this.removeAttribute(\"aria-activedescendant\"))}stopListeningToKeyboard(){this.removeEventListener(\"keydown\",this.handleKeydown)}handleDescendentOverlayOpened(e){const s=e.composedPath()[0];s.overlayElement&&this.descendentOverlays.set(s.overlayElement,s.overlayElement)}handleDescendentOverlayClosed(e){const s=e.composedPath()[0];s.overlayElement&&this.descendentOverlays.delete(s.overlayElement)}async selectOrToggleItem(e){const s=this.resolvedSelects,t=new Map(this.selectedItemsMap),i=this.selected.slice(),n=this.selectedItems.slice(),d=this.value,r=this.childItems[this.focusedItemIndex];if(r&&(r.focused=!1,r.active=!1),this.focusedItemIndex=this.childItems.indexOf(e),this.forwardFocusVisibleToItem(e),s===\"multiple\"){this.selectedItemsMap.has(e)?this.selectedItemsMap.delete(e):this.selectedItemsMap.set(e,!0);const h=[],m=[];this.childItemSet.forEach(u=>{u.menuData.selectionRoot===this&&this.selectedItemsMap.has(u)&&(h.push(u.value),m.push(u))}),this._selected=h,this.selectedItems=m,this.value=this.selected.join(this.valueSeparator)}else this.selectedItemsMap.clear(),this.selectedItemsMap.set(e,!0),this.value=e.value,this._selected=[e.value],this.selectedItems=[e];if(!this.dispatchEvent(new Event(\"change\",{cancelable:!0,bubbles:!0,composed:!0}))){this._selected=i,this.selectedItems=n,this.selectedItemsMap=t,this.value=d;return}if(s===\"single\"){for(const h of t.keys())h!==e&&(h.selected=!1);e.selected=!0}else s===\"multiple\"&&(e.selected=!e.selected)}navigateWithinMenu(e){const{code:s}=e,t=this.childItems[this.focusedItemIndex],i=s===\"ArrowDown\"?1:-1,n=this.focusMenuItemByOffset(i);n!==t&&(e.preventDefault(),e.stopPropagation(),n.scrollIntoView({block:\"nearest\"}))}navigateBetweenRelatedMenus(e){const{code:s}=e,t=this.isLTR&&s===\"ArrowRight\"||!this.isLTR&&s===\"ArrowLeft\",i=this.isLTR&&s===\"ArrowLeft\"||!this.isLTR&&s===\"ArrowRight\";if(t){e.stopPropagation();const n=this.childItems[this.focusedItemIndex];n!=null&&n.hasSubmenu&&n.openOverlay()}else i&&this.isSubmenu&&(e.stopPropagation(),this.dispatchEvent(new Event(\"close\",{bubbles:!0})),this.updateSelectedItemIndex())}handleKeydown(e){if(e.defaultPrevented)return;const s=this.childItems[this.focusedItemIndex];s&&(s.focused=!0);const{code:t}=e;if(e.shiftKey&&e.target!==this&&this.hasAttribute(\"tabindex\")){this.removeAttribute(\"tabindex\");const i=n=>{!n.shiftKey&&!this.hasAttribute(\"tabindex\")&&(this.tabIndex=0,document.removeEventListener(\"keyup\",i),this.removeEventListener(\"focusout\",i))};document.addEventListener(\"keyup\",i),this.addEventListener(\"focusout\",i)}if(t===\"Tab\"){this.prepareToCleanUp();return}if(t===\"Space\"&&s!=null&&s.hasSubmenu){s.openOverlay();return}if(t===\"Space\"||t===\"Enter\"){const i=this.childItems[this.focusedItemIndex];i&&i.menuData.selectionRoot===e.target&&i.click();return}if(t===\"ArrowDown\"||t===\"ArrowUp\"){const i=this.childItems[this.focusedItemIndex];i&&i.menuData.selectionRoot===e.target&&this.navigateWithinMenu(e);return}this.navigateBetweenRelatedMenus(e)}focusMenuItemByOffset(e){const s=e||1,t=this.childItems[this.focusedItemIndex];t&&(t.focused=!1,t.active=t.open),this.focusedItemIndex=(this.childItems.length+this.focusedItemIndex+e)%this.childItems.length;let i=this.childItems[this.focusedItemIndex],n=this.childItems.length;for(;i!=null&&i.disabled&&n;)n-=1,this.focusedItemIndex=(this.childItems.length+this.focusedItemIndex+s)%this.childItems.length,i=this.childItems[this.focusedItemIndex];return i!=null&&i.disabled||this.forwardFocusVisibleToItem(i),i}prepareToCleanUp(){document.addEventListener(\"focusout\",()=>{requestAnimationFrame(()=>{const e=this.childItems[this.focusedItemIndex];e&&(e.focused=!1,this.updateSelectedItemIndex())})},{once:!0})}updateSelectedItemIndex(){let e=0;const s=new Map,t=[],i=[];let n=this.childItems.length;for(;n;){n-=1;const d=this.childItems[n];d.menuData.selectionRoot===this&&((d.selected||!this._hasUpdatedSelectedItemIndex&&this.selected.includes(d.value))&&(e=n,s.set(d,!0),t.unshift(d.value),i.unshift(d)),n!==e&&(d.focused=!1))}i.map((d,r)=>{r>0&&(d.focused=!1)}),this.selectedItemsMap=s,this._selected=t,this.selectedItems=i,this.value=this.selected.join(this.valueSeparator),this.focusedItemIndex=e,this.focusInItemIndex=e}handleItemsChanged(){this.cachedChildItems=void 0,this._willUpdateItems||(this._willUpdateItems=!0,this.cacheUpdated=this.updateCache())}async updateCache(){this.hasUpdated?await new Promise(e=>requestAnimationFrame(()=>e(!0))):await Promise.all([new Promise(e=>requestAnimationFrame(()=>e(!0))),this.updateComplete]),this.cachedChildItems===void 0&&(this.updateSelectedItemIndex(),this.updateItemFocus()),this._willUpdateItems=!1}updateItemFocus(){if(this.childItems.length==0)return;const e=this.childItems[this.focusInItemIndex];this.getRootNode().activeElement===e.menuData.focusRoot&&this.forwardFocusVisibleToItem(e)}closeDescendentOverlays(){this.descendentOverlays.forEach(e=>{e.open=!1}),this.descendentOverlays=new Map}forwardFocusVisibleToItem(e){if(!e||e.menuData.focusRoot!==this)return;this.closeDescendentOverlays();const s=this.hasVisibleFocusInTree()||!!this.childItems.find(t=>t.hasVisibleFocusInTree());e.focused=s,this.setAttribute(\"aria-activedescendant\",e.id),e.menuData.selectionRoot&&e.menuData.selectionRoot!==this&&e.menuData.selectionRoot.focus()}handleSlotchange({target:e}){const s=e.assignedElements({flatten:!0});this.childItems.length!==s.length&&s.forEach(t=>{typeof t.triggerUpdate!=\"undefined\"&&t.triggerUpdate()})}renderMenuItemSlot(){return I`\n            <slot\n                @sp-menu-submenu-opened=${this.handleDescendentOverlayOpened}\n                @sp-menu-submenu-closed=${this.handleDescendentOverlayClosed}\n                @slotchange=${this.handleSlotchange}\n            ></slot>\n        `}render(){return this.renderMenuItemSlot()}firstUpdated(e){super.firstUpdated(e),!this.hasAttribute(\"tabindex\")&&!this.ignore&&(this.getAttribute(\"role\")===\"group\"?this.tabIndex=-1:this.tabIndex=0);const s=[new Promise(t=>requestAnimationFrame(()=>t(!0)))];[...this.children].forEach(t=>{t.localName===\"sp-menu-item\"&&s.push(t.updateComplete)}),this.childItemsUpdated=Promise.all(s)}updated(e){super.updated(e),e.has(\"selects\")&&this.hasUpdated&&this.selectsChanged(),e.has(\"label\")&&(this.label||typeof e.get(\"label\")!=\"undefined\")&&(this.label?this.setAttribute(\"aria-label\",this.label):this.removeAttribute(\"aria-label\"))}selectsChanged(){const e=[new Promise(s=>requestAnimationFrame(()=>s(!0)))];this.childItemSet.forEach(s=>{e.push(s.triggerUpdate())}),this.childItemsUpdated=Promise.all(e)}connectedCallback(){super.connectedCallback(),!this.hasAttribute(\"role\")&&!this.ignore&&this.setAttribute(\"role\",this.ownRole),this.updateComplete.then(()=>this.updateItemFocus())}disconnectedCallback(){this.cachedChildItems=void 0,super.disconnectedCallback()}async getUpdateComplete(){const e=await super.getUpdateComplete();return await this.childItemsUpdated,await this.cacheUpdated,e}}l([a({type:String,reflect:!0})],Menu.prototype,\"label\",2),l([a({type:Boolean,reflect:!0})],Menu.prototype,\"ignore\",2),l([a({type:String,reflect:!0})],Menu.prototype,\"selects\",2),l([a({type:String})],Menu.prototype,\"value\",2),l([a({type:String,attribute:\"value-separator\"})],Menu.prototype,\"valueSeparator\",2),l([a({attribute:!1})],Menu.prototype,\"selected\",1),l([a({attribute:!1})],Menu.prototype,\"selectedItems\",2),l([g(\"slot:not([name])\")],Menu.prototype,\"menuSlot\",2);\n//# sourceMappingURL=Menu.js.map\n","\"use strict\";import{Menu as e}from\"./src/Menu.js\";import{defineElement as m}from\"@spectrum-web-components/base/src/define-element.js\";m(\"sp-menu\",e);\n//# sourceMappingURL=sp-menu.js.map\n"],"names":["css","p","Object","defineProperty","f","getOwnPropertyDescriptor","l","c","o","e","s","n","t","i","length","Menu","SpectrumElement","noDefaultSize","constructor","super","this","label","ignore","value","valueSeparator","_selected","selectedItems","childItemSet","Set","focusedItemIndex","focusInItemIndex","selectedItemsMap","Map","descendentOverlays","handleSubmenuClosed","event","stopPropagation","composedPath","dispatchEvent","bubbles","composed","handleSubmenuOpened","Event","focusedItem","childItems","focused","openedItem","find","el","has","openedItemIndex","indexOf","_hasUpdatedSelectedItemIndex","_willUpdateItems","cacheUpdated","Promise","resolve","resolveCacheUpdated","addEventListener","onSelectableItemAddedOrUpdated","onFocusableItemAddedOrUpdated","capture","handleClick","handleFocusin","handleBlur","styles","menuStyles","isSubmenu","slot","selected","clear","forEach","item","includes","push","set","requestUpdate","old","cachedChildItems","updateCachedMenuItems","menuSlot","assignedElements","flatten","slottedElement","entries","flattenedChildren","localName","querySelectorAll","slottedElements","splice","childRole","resolvedRole","resolvedSelects","ownRole","menuCascade","hadFocusRoot","menuData","focusRoot","ancestorWithSelects","currentAncestorWithSelects","selects","get","cascadeData","parentMenu","tabIndex","addChildItem","_a","ignoreMenu","_b","getAttribute","cleanupSteps","removeChildItem","selectionRoot","setRole","join","add","handleItemsChanged","async","delete","updateComplete","focus","preventScroll","every","childItem","disabled","some","focusMenuItemByOffset","selectedItem","scrollIntoView","block","target","defaultPrevented","index","href","preventDefault","hasSubmenu","open","selectOrToggleItem","prepareToCleanUp","activeElement","getRootNode","offset","findIndex","Math","max","startListeningToKeyboard","handleKeydown","isOrContains","relatedTarget","contains","stopListeningToKeyboard","child","removeAttribute","removeEventListener","handleDescendentOverlayOpened","overlayElement","handleDescendentOverlayClosed","targetItem","oldSelectedItemsMap","oldSelected","slice","oldSelectedItems","oldValue","focusedChild","active","forwardFocusVisibleToItem","h","cancelable","keys","oldItem","navigateWithinMenu","code","lastFocusedItem","direction","itemToFocus","shouldOpenSubmenu","isLTR","shouldCloseSelfAsSubmenu","openOverlay","updateSelectedItemIndex","shiftKey","hasAttribute","document","replaceTabindex","navigateBetweenRelatedMenus","click","step","availableItems","requestAnimationFrame","once","firstOrFirstSelectedIndex","itemIndex","unshift","map","updateCache","hasUpdated","res","all","updateItemFocus","focusInItem","closeDescendentOverlays","overlay","hasVisibleFocusInTree","setAttribute","id","handleSlotchange","assignedElement","triggerUpdate","renderMenuItemSlot","html","render","firstUpdated","changed","updates","children","childItemsUpdated","changes","updated","selectsChanged","connectedCallback","then","disconnectedCallback","getUpdateComplete","complete","__decorateClass","property","type","String","reflect","prototype","Boolean","attribute","query","defineElement"],"mappings":"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"}