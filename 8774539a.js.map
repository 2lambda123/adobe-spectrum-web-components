{"version":3,"file":"8774539a.js","sources":["../../../packages/overlay/src/active-overlay.css.js","../../../packages/overlay/src/overlay-utils.js","../../../node_modules/@floating-ui/core/dist/floating-ui.core.browser.min.mjs","../../../node_modules/@floating-ui/dom/dist/floating-ui.dom.browser.min.mjs","../../../packages/overlay/src/ActiveOverlay.js","../../../packages/overlay/src/overlay-timer.js","../../../packages/overlay/active-overlay.js","../../../packages/overlay/src/overlay.js","../../../packages/overlay/src/overlay-stack.js","../../../packages/shared/src/get-deep-element-from-point.js"],"sourcesContent":["/*\nCopyright 2022 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\nimport { css } from '@spectrum-web-components/base';\nconst styles = css `\n@keyframes sp-overlay-fade-in{0%{opacity:0;transform:var(--sp-overlay-from)}to{opacity:1;transform:translate(0)}}@keyframes sp-overlay-fade-out{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:var(--sp-overlay-from)}}:host{display:inline-block;left:-9999em;pointer-events:none;position:absolute;top:-9999em;z-index:1000}:host(:focus){outline:none}:host([placement=none]){height:100vh;height:-webkit-fill-available;height:fill-available;left:0;max-height:var(--swc-visual-viewport-height);position:fixed;top:0}#contents,sp-theme{height:100%}#contents{--swc-overlay-animation-distance:var(\n--spectrum-picker-m-texticon-popover-offset-y,var(--spectrum-global-dimension-size-75)\n);animation-duration:var(\n--swc-test-duration,var(--spectrum-global-animation-duration-200,.16s)\n);animation-timing-function:var(\n--spectrum-global-animation-ease-out,ease-out\n);box-sizing:border-box;display:inline-block;opacity:1;pointer-events:none;visibility:visible}:host([actual-placement*=top]) #contents{--sp-overlay-from:translateY(var(--spectrum-global-dimension-size-75));align-items:flex-end;display:inline-flex;padding-top:var(--swc-overlay-animation-distance)}:host([actual-placement*=right]) #contents{--sp-overlay-from:translateX(calc(var(--spectrum-global-dimension-size-75)*-1));padding-right:var(--swc-overlay-animation-distance)}:host([actual-placement*=bottom]) #contents{--sp-overlay-from:translateY(calc(var(--spectrum-global-dimension-size-75)*-1));padding-bottom:var(--swc-overlay-animation-distance)}:host([actual-placement*=left]) #contents{--sp-overlay-from:translateX(var(--spectrum-global-dimension-size-75));padding-left:var(--swc-overlay-animation-distance)}:host([animating]) ::slotted(*){pointer-events:none}:host(:not([animating])) ::slotted(*){pointer-events:auto}#contents ::slotted(*){position:relative}\n`;\nexport default styles;\n//# sourceMappingURL=active-overlay.css.js.map","/*\nCopyright 2022 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\nexport const parentOverlayOf = (el) => {\n    if (!el)\n        return null;\n    const closestOverlay = el.closest('active-overlay');\n    if (closestOverlay) {\n        return closestOverlay;\n    }\n    const rootNode = el.getRootNode();\n    if (rootNode.host) {\n        return parentOverlayOf(rootNode.host);\n    }\n    return null;\n};\nexport const findOverlaysRootedInOverlay = (rootOverlay, activeOverlays) => {\n    const overlays = [];\n    if (!rootOverlay)\n        return [];\n    for (const overlay of activeOverlays) {\n        if (!overlay.root)\n            continue;\n        if (parentOverlayOf(overlay.root) === rootOverlay) {\n            overlays.push(overlay);\n            overlays.push(...findOverlaysRootedInOverlay(overlay, activeOverlays));\n        }\n    }\n    return overlays;\n};\n//# sourceMappingURL=overlay-utils.js.map","function t(t){return t.split(\"-\")[0]}function e(t){return t.split(\"-\")[1]}function n(e){return[\"top\",\"bottom\"].includes(t(e))?\"x\":\"y\"}function r(t){return\"y\"===t?\"height\":\"width\"}function i(i,o,a){let{reference:l,floating:s}=i;const c=l.x+l.width/2-s.width/2,f=l.y+l.height/2-s.height/2,u=n(o),m=r(u),g=l[m]/2-s[m]/2,d=\"x\"===u;let p;switch(t(o)){case\"top\":p={x:c,y:l.y-s.height};break;case\"bottom\":p={x:c,y:l.y+l.height};break;case\"right\":p={x:l.x+l.width,y:f};break;case\"left\":p={x:l.x-s.width,y:f};break;default:p={x:l.x,y:l.y}}switch(e(o)){case\"start\":p[u]-=g*(a&&d?-1:1);break;case\"end\":p[u]+=g*(a&&d?-1:1)}return p}const o=async(t,e,n)=>{const{placement:r=\"bottom\",strategy:o=\"absolute\",middleware:a=[],platform:l}=n,s=await(null==l.isRTL?void 0:l.isRTL(e));let c=await l.getElementRects({reference:t,floating:e,strategy:o}),{x:f,y:u}=i(c,r,s),m=r,g={};for(let n=0;n<a.length;n++){const{name:d,fn:p}=a[n],{x:h,y:y,data:x,reset:w}=await p({x:f,y:u,initialPlacement:r,placement:m,strategy:o,middlewareData:g,rects:c,platform:l,elements:{reference:t,floating:e}});f=null!=h?h:f,u=null!=y?y:u,g={...g,[d]:{...g[d],...x}},w&&(\"object\"==typeof w&&(w.placement&&(m=w.placement),w.rects&&(c=!0===w.rects?await l.getElementRects({reference:t,floating:e,strategy:o}):w.rects),({x:f,y:u}=i(c,m,s))),n=-1)}return{x:f,y:u,placement:m,strategy:o,middlewareData:g}};function a(t){return\"number\"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}function l(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function s(t,e){var n;void 0===e&&(e={});const{x:r,y:i,platform:o,rects:s,elements:c,strategy:f}=t,{boundary:u=\"clippingAncestors\",rootBoundary:m=\"viewport\",elementContext:g=\"floating\",altBoundary:d=!1,padding:p=0}=e,h=a(p),y=c[d?\"floating\"===g?\"reference\":\"floating\":g],x=l(await o.getClippingRect({element:null==(n=await(null==o.isElement?void 0:o.isElement(y)))||n?y:y.contextElement||await(null==o.getDocumentElement?void 0:o.getDocumentElement(c.floating)),boundary:u,rootBoundary:m,strategy:f})),w=l(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:\"floating\"===g?{...s.floating,x:r,y:i}:s.reference,offsetParent:await(null==o.getOffsetParent?void 0:o.getOffsetParent(c.floating)),strategy:f}):s[g]);return{top:x.top-w.top+h.top,bottom:w.bottom-x.bottom+h.bottom,left:x.left-w.left+h.left,right:w.right-x.right+h.right}}const c=Math.min,f=Math.max;function u(t,e,n){return f(t,c(e,n))}const m=t=>({name:\"arrow\",options:t,async fn(i){const{element:o,padding:l=0}=null!=t?t:{},{x:s,y:c,placement:f,rects:m,platform:g}=i;if(null==o)return{};const d=a(l),p={x:s,y:c},h=n(f),y=e(f),x=r(h),w=await g.getDimensions(o),v=\"y\"===h?\"top\":\"left\",b=\"y\"===h?\"bottom\":\"right\",R=m.reference[x]+m.reference[h]-p[h]-m.floating[x],A=p[h]-m.reference[h],P=await(null==g.getOffsetParent?void 0:g.getOffsetParent(o));let T=P?\"y\"===h?P.clientHeight||0:P.clientWidth||0:0;0===T&&(T=m.floating[x]);const O=R/2-A/2,D=d[v],L=T-w[x]-d[b],k=T/2-w[x]/2+O,E=u(D,k,L),C=(\"start\"===y?d[v]:d[b])>0&&k!==E&&m.reference[x]<=m.floating[x];return{[h]:p[h]-(C?k<D?D-k:L-k:0),data:{[h]:E,centerOffset:k-E}}}}),g={left:\"right\",right:\"left\",bottom:\"top\",top:\"bottom\"};function d(t){return t.replace(/left|right|bottom|top/g,(t=>g[t]))}function p(t,i,o){void 0===o&&(o=!1);const a=e(t),l=n(t),s=r(l);let c=\"x\"===l?a===(o?\"end\":\"start\")?\"right\":\"left\":\"start\"===a?\"bottom\":\"top\";return i.reference[s]>i.floating[s]&&(c=d(c)),{main:c,cross:d(c)}}const h={start:\"end\",end:\"start\"};function y(t){return t.replace(/start|end/g,(t=>h[t]))}const x=[\"top\",\"right\",\"bottom\",\"left\"],w=x.reduce(((t,e)=>t.concat(e,e+\"-start\",e+\"-end\")),[]);const v=function(n){return void 0===n&&(n={}),{name:\"autoPlacement\",options:n,async fn(r){var i,o,a,l,c;const{x:f,y:u,rects:m,middlewareData:g,placement:d,platform:h,elements:x}=r,{alignment:v=null,allowedPlacements:b=w,autoAlignment:R=!0,...A}=n,P=function(n,r,i){return(n?[...i.filter((t=>e(t)===n)),...i.filter((t=>e(t)!==n))]:i.filter((e=>t(e)===e))).filter((t=>!n||e(t)===n||!!r&&y(t)!==t))}(v,R,b),T=await s(r,A),O=null!=(i=null==(o=g.autoPlacement)?void 0:o.index)?i:0,D=P[O];if(null==D)return{};const{main:L,cross:k}=p(D,m,await(null==h.isRTL?void 0:h.isRTL(x.floating)));if(d!==D)return{x:f,y:u,reset:{placement:P[0]}};const E=[T[t(D)],T[L],T[k]],C=[...null!=(a=null==(l=g.autoPlacement)?void 0:l.overflows)?a:[],{placement:D,overflows:E}],H=P[O+1];if(H)return{data:{index:O+1,overflows:C},reset:{placement:H}};const B=C.slice().sort(((t,e)=>t.overflows[0]-e.overflows[0])),V=null==(c=B.find((t=>{let{overflows:e}=t;return e.every((t=>t<=0))})))?void 0:c.placement,F=null!=V?V:B[0].placement;return F!==d?{data:{index:O+1,overflows:C},reset:{placement:F}}:{}}}};const b=function(e){return void 0===e&&(e={}),{name:\"flip\",options:e,async fn(n){var r;const{placement:i,middlewareData:o,rects:a,initialPlacement:l,platform:c,elements:f}=n,{mainAxis:u=!0,crossAxis:m=!0,fallbackPlacements:g,fallbackStrategy:h=\"bestFit\",flipAlignment:x=!0,...w}=e,v=t(i),b=g||(v===l||!x?[d(l)]:function(t){const e=d(t);return[y(t),e,y(e)]}(l)),R=[l,...b],A=await s(n,w),P=[];let T=(null==(r=o.flip)?void 0:r.overflows)||[];if(u&&P.push(A[v]),m){const{main:t,cross:e}=p(i,a,await(null==c.isRTL?void 0:c.isRTL(f.floating)));P.push(A[t],A[e])}if(T=[...T,{placement:i,overflows:P}],!P.every((t=>t<=0))){var O,D;const t=(null!=(O=null==(D=o.flip)?void 0:D.index)?O:0)+1,e=R[t];if(e)return{data:{index:t,overflows:T},reset:{placement:e}};let n=\"bottom\";switch(h){case\"bestFit\":{var L;const t=null==(L=T.map((t=>[t,t.overflows.filter((t=>t>0)).reduce(((t,e)=>t+e),0)])).sort(((t,e)=>t[1]-e[1]))[0])?void 0:L[0].placement;t&&(n=t);break}case\"initialPlacement\":n=l}if(i!==n)return{reset:{placement:n}}}return{}}}};function R(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function A(t){return x.some((e=>t[e]>=0))}const P=function(t){let{strategy:e=\"referenceHidden\",...n}=void 0===t?{}:t;return{name:\"hide\",async fn(t){const{rects:r}=t;switch(e){case\"referenceHidden\":{const e=R(await s(t,{...n,elementContext:\"reference\"}),r.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:A(e)}}}case\"escaped\":{const e=R(await s(t,{...n,altBoundary:!0}),r.floating);return{data:{escapedOffsets:e,escaped:A(e)}}}default:return{}}}}};const T=function(r){return void 0===r&&(r=0),{name:\"offset\",options:r,async fn(i){const{x:o,y:a}=i,l=await async function(r,i){const{placement:o,platform:a,elements:l}=r,s=await(null==a.isRTL?void 0:a.isRTL(l.floating)),c=t(o),f=e(o),u=\"x\"===n(o),m=[\"left\",\"top\"].includes(c)?-1:1,g=s&&u?-1:1,d=\"function\"==typeof i?i(r):i;let{mainAxis:p,crossAxis:h,alignmentAxis:y}=\"number\"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return f&&\"number\"==typeof y&&(h=\"end\"===f?-1*y:y),u?{x:h*g,y:p*m}:{x:p*m,y:h*g}}(i,r);return{x:o+l.x,y:a+l.y,data:l}}}};function O(t){return\"x\"===t?\"y\":\"x\"}const D=function(e){return void 0===e&&(e={}),{name:\"shift\",options:e,async fn(r){const{x:i,y:o,placement:a}=r,{mainAxis:l=!0,crossAxis:c=!1,limiter:f={fn:t=>{let{x:e,y:n}=t;return{x:e,y:n}}},...m}=e,g={x:i,y:o},d=await s(r,m),p=n(t(a)),h=O(p);let y=g[p],x=g[h];if(l){const t=\"y\"===p?\"bottom\":\"right\";y=u(y+d[\"y\"===p?\"top\":\"left\"],y,y-d[t])}if(c){const t=\"y\"===h?\"bottom\":\"right\";x=u(x+d[\"y\"===h?\"top\":\"left\"],x,x-d[t])}const w=f.fn({...r,[p]:y,[h]:x});return{...w,data:{x:w.x-i,y:w.y-o}}}}},L=function(e){return void 0===e&&(e={}),{options:e,fn(r){const{x:i,y:o,placement:a,rects:l,middlewareData:s}=r,{offset:c=0,mainAxis:f=!0,crossAxis:u=!0}=e,m={x:i,y:o},g=n(a),d=O(g);let p=m[g],h=m[d];const y=\"function\"==typeof c?c({...l,placement:a}):c,x=\"number\"==typeof y?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(f){const t=\"y\"===g?\"height\":\"width\",e=l.reference[g]-l.floating[t]+x.mainAxis,n=l.reference[g]+l.reference[t]-x.mainAxis;p<e?p=e:p>n&&(p=n)}if(u){var w,v,b,R;const e=\"y\"===g?\"width\":\"height\",n=[\"top\",\"left\"].includes(t(a)),r=l.reference[d]-l.floating[e]+(n&&null!=(w=null==(v=s.offset)?void 0:v[d])?w:0)+(n?0:x.crossAxis),i=l.reference[d]+l.reference[e]+(n?0:null!=(b=null==(R=s.offset)?void 0:R[d])?b:0)-(n?x.crossAxis:0);h<r?h=r:h>i&&(h=i)}return{[g]:p,[d]:h}}}},k=function(n){return void 0===n&&(n={}),{name:\"size\",options:n,async fn(r){const{placement:i,rects:o,platform:a,elements:l}=r,{apply:c,...u}=n,m=await s(r,u),g=t(i),d=e(i);let p,h;\"top\"===g||\"bottom\"===g?(p=g,h=d===(await(null==a.isRTL?void 0:a.isRTL(l.floating))?\"start\":\"end\")?\"left\":\"right\"):(h=g,p=\"end\"===d?\"top\":\"bottom\");const y=f(m.left,0),x=f(m.right,0),w=f(m.top,0),v=f(m.bottom,0),b={availableHeight:o.floating.height-([\"left\",\"right\"].includes(i)?2*(0!==w||0!==v?w+v:f(m.top,m.bottom)):m[p]),availableWidth:o.floating.width-([\"top\",\"bottom\"].includes(i)?2*(0!==y||0!==x?y+x:f(m.left,m.right)):m[h])},R=await a.getDimensions(l.floating);null==c||c({...r,...b});const A=await a.getDimensions(l.floating);return R.width!==A.width||R.height!==A.height?{reset:{rects:!0}}:{}}}},E=function(e){return void 0===e&&(e={}),{name:\"inline\",options:e,async fn(r){var i;const{placement:o,elements:s,rects:u,platform:m,strategy:g}=r,{padding:d=2,x:p,y:h}=e,y=l(m.convertOffsetParentRelativeRectToViewportRelativeRect?await m.convertOffsetParentRelativeRectToViewportRelativeRect({rect:u.reference,offsetParent:await(null==m.getOffsetParent?void 0:m.getOffsetParent(s.floating)),strategy:g}):u.reference),x=null!=(i=await(null==m.getClientRects?void 0:m.getClientRects(s.reference)))?i:[],w=a(d);const v=await m.getElementRects({reference:{getBoundingClientRect:function(){var e;if(2===x.length&&x[0].left>x[1].right&&null!=p&&null!=h)return null!=(e=x.find((t=>p>t.left-w.left&&p<t.right+w.right&&h>t.top-w.top&&h<t.bottom+w.bottom)))?e:y;if(x.length>=2){if(\"x\"===n(o)){const e=x[0],n=x[x.length-1],r=\"top\"===t(o),i=e.top,a=n.bottom,l=r?e.left:n.left,s=r?e.right:n.right;return{top:i,bottom:a,left:l,right:s,width:s-l,height:a-i,x:l,y:i}}const e=\"left\"===t(o),r=f(...x.map((t=>t.right))),i=c(...x.map((t=>t.left))),a=x.filter((t=>e?t.left===i:t.right===r)),l=a[0].top,s=a[a.length-1].bottom;return{top:l,bottom:s,left:i,right:r,width:r-i,height:s-l,x:i,y:l}}return y}},floating:s.floating,strategy:g});return u.reference.x!==v.reference.x||u.reference.y!==v.reference.y||u.reference.width!==v.reference.width||u.reference.height!==v.reference.height?{reset:{rects:v}}:{}}}};export{m as arrow,v as autoPlacement,o as computePosition,s as detectOverflow,b as flip,P as hide,E as inline,L as limitShift,T as offset,l as rectToClientRect,D as shift,k as size};\n","import{rectToClientRect as t,computePosition as e}from\"@floating-ui/core\";export{arrow,autoPlacement,detectOverflow,flip,hide,inline,limitShift,offset,shift,size}from\"@floating-ui/core\";function n(t){return t&&t.document&&t.location&&t.alert&&t.setInterval}function o(t){if(null==t)return window;if(!n(t)){const e=t.ownerDocument;return e&&e.defaultView||window}return t}function i(t){return o(t).getComputedStyle(t)}function r(t){return n(t)?\"\":t?(t.nodeName||\"\").toLowerCase():\"\"}function l(){const t=navigator.userAgentData;return null!=t&&t.brands?t.brands.map((t=>t.brand+\"/\"+t.version)).join(\" \"):navigator.userAgent}function c(t){return t instanceof o(t).HTMLElement}function f(t){return t instanceof o(t).Element}function s(t){if(\"undefined\"==typeof ShadowRoot)return!1;return t instanceof o(t).ShadowRoot||t instanceof ShadowRoot}function u(t){const{overflow:e,overflowX:n,overflowY:o}=i(t);return/auto|scroll|overlay|hidden/.test(e+o+n)}function d(t){return[\"table\",\"td\",\"th\"].includes(r(t))}function h(t){const e=/firefox/i.test(l()),n=i(t);return\"none\"!==n.transform||\"none\"!==n.perspective||\"paint\"===n.contain||[\"transform\",\"perspective\"].includes(n.willChange)||e&&\"filter\"===n.willChange||e&&!!n.filter&&\"none\"!==n.filter}function a(){return!/^((?!chrome|android).)*safari/i.test(l())}const g=Math.min,p=Math.max,m=Math.round;function w(t,e,n){var i,r,l,s;void 0===e&&(e=!1),void 0===n&&(n=!1);const u=t.getBoundingClientRect();let d=1,h=1;e&&c(t)&&(d=t.offsetWidth>0&&m(u.width)/t.offsetWidth||1,h=t.offsetHeight>0&&m(u.height)/t.offsetHeight||1);const g=f(t)?o(t):window,p=!a()&&n,w=(u.left+(p&&null!=(i=null==(r=g.visualViewport)?void 0:r.offsetLeft)?i:0))/d,v=(u.top+(p&&null!=(l=null==(s=g.visualViewport)?void 0:s.offsetTop)?l:0))/h,y=u.width/d,x=u.height/h;return{width:y,height:x,top:v,right:w+y,bottom:v+x,left:w,x:w,y:v}}function v(t){return(e=t,(e instanceof o(e).Node?t.ownerDocument:t.document)||window.document).documentElement;var e}function y(t){return f(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function x(t){return w(v(t)).left+y(t).scrollLeft}function b(t,e,n){const o=c(e),i=v(e),l=w(t,o&&function(t){const e=w(t);return m(e.width)!==t.offsetWidth||m(e.height)!==t.offsetHeight}(e),\"fixed\"===n);let f={scrollLeft:0,scrollTop:0};const s={x:0,y:0};if(o||!o&&\"fixed\"!==n)if((\"body\"!==r(e)||u(i))&&(f=y(e)),c(e)){const t=w(e,!0);s.x=t.x+e.clientLeft,s.y=t.y+e.clientTop}else i&&(s.x=x(i));return{x:l.left+f.scrollLeft-s.x,y:l.top+f.scrollTop-s.y,width:l.width,height:l.height}}function L(t){return\"html\"===r(t)?t:t.assignedSlot||t.parentNode||(s(t)?t.host:null)||v(t)}function R(t){return c(t)&&\"fixed\"!==getComputedStyle(t).position?t.offsetParent:null}function T(t){const e=o(t);let n=R(t);for(;n&&d(n)&&\"static\"===getComputedStyle(n).position;)n=R(n);return n&&(\"html\"===r(n)||\"body\"===r(n)&&\"static\"===getComputedStyle(n).position&&!h(n))?e:n||function(t){let e=L(t);for(s(e)&&(e=e.host);c(e)&&![\"html\",\"body\"].includes(r(e));){if(h(e))return e;e=e.parentNode}return null}(t)||e}function W(t){if(c(t))return{width:t.offsetWidth,height:t.offsetHeight};const e=w(t);return{width:e.width,height:e.height}}function E(t){const e=L(t);return[\"html\",\"body\",\"#document\"].includes(r(e))?t.ownerDocument.body:c(e)&&u(e)?e:E(e)}function H(t,e){var n;void 0===e&&(e=[]);const i=E(t),r=i===(null==(n=t.ownerDocument)?void 0:n.body),l=o(i),c=r?[l].concat(l.visualViewport||[],u(i)?i:[]):i,f=e.concat(c);return r?f:f.concat(H(c))}function C(e,n,r){return\"viewport\"===n?t(function(t,e){const n=o(t),i=v(t),r=n.visualViewport;let l=i.clientWidth,c=i.clientHeight,f=0,s=0;if(r){l=r.width,c=r.height;const t=a();(t||!t&&\"fixed\"===e)&&(f=r.offsetLeft,s=r.offsetTop)}return{width:l,height:c,x:f,y:s}}(e,r)):f(n)?function(t,e){const n=w(t,!1,\"fixed\"===e),o=n.top+t.clientTop,i=n.left+t.clientLeft;return{top:o,left:i,x:i,y:o,right:i+t.clientWidth,bottom:o+t.clientHeight,width:t.clientWidth,height:t.clientHeight}}(n,r):t(function(t){var e;const n=v(t),o=y(t),r=null==(e=t.ownerDocument)?void 0:e.body,l=p(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),c=p(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0);let f=-o.scrollLeft+x(t);const s=-o.scrollTop;return\"rtl\"===i(r||n).direction&&(f+=p(n.clientWidth,r?r.clientWidth:0)-l),{width:l,height:c,x:f,y:s}}(v(e)))}function S(t){const e=H(t),n=[\"absolute\",\"fixed\"].includes(i(t).position)&&c(t)?T(t):t;return f(n)?e.filter((t=>f(t)&&function(t,e){const n=null==e.getRootNode?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&s(n)){let n=e;do{if(n&&t===n)return!0;n=n.parentNode||n.host}while(n)}return!1}(t,n)&&\"body\"!==r(t))):[]}const D={getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:o,strategy:i}=t;const r=[...\"clippingAncestors\"===n?S(e):[].concat(n),o],l=r[0],c=r.reduce(((t,n)=>{const o=C(e,n,i);return t.top=p(o.top,t.top),t.right=g(o.right,t.right),t.bottom=g(o.bottom,t.bottom),t.left=p(o.left,t.left),t}),C(e,l,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:n,strategy:o}=t;const i=c(n),l=v(n);if(n===l)return e;let f={scrollLeft:0,scrollTop:0};const s={x:0,y:0};if((i||!i&&\"fixed\"!==o)&&((\"body\"!==r(n)||u(l))&&(f=y(n)),c(n))){const t=w(n,!0);s.x=t.x+n.clientLeft,s.y=t.y+n.clientTop}return{...e,x:e.x-f.scrollLeft+s.x,y:e.y-f.scrollTop+s.y}},isElement:f,getDimensions:W,getOffsetParent:T,getDocumentElement:v,getElementRects:t=>{let{reference:e,floating:n,strategy:o}=t;return{reference:b(e,T(n),o),floating:{...W(n),x:0,y:0}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>\"rtl\"===i(t).direction};function N(t,e,n,o){void 0===o&&(o={});const{ancestorScroll:i=!0,ancestorResize:r=!0,elementResize:l=!0,animationFrame:c=!1}=o,s=i&&!c,u=r&&!c,d=s||u?[...f(t)?H(t):[],...H(e)]:[];d.forEach((t=>{s&&t.addEventListener(\"scroll\",n,{passive:!0}),u&&t.addEventListener(\"resize\",n)}));let h,a=null;l&&(a=new ResizeObserver(n),f(t)&&!c&&a.observe(t),a.observe(e));let g=c?w(t):null;return c&&function e(){const o=w(t);!g||o.x===g.x&&o.y===g.y&&o.width===g.width&&o.height===g.height||n();g=o,h=requestAnimationFrame(e)}(),l||n(),()=>{var t;d.forEach((t=>{s&&t.removeEventListener(\"scroll\",n),u&&t.removeEventListener(\"resize\",n)})),null==(t=a)||t.disconnect(),a=null,c&&cancelAnimationFrame(h)}}const z=(t,n,o)=>e(t,n,{platform:D,...o});export{N as autoUpdate,z as computePosition,H as getOverflowAncestors};\n","/*\nCopyright 2020 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\nimport { __decorate } from \"tslib\";\nimport { html, SpectrumElement, } from '@spectrum-web-components/base';\nimport { ifDefined } from '@spectrum-web-components/base/src/directives.js';\nimport { property } from '@spectrum-web-components/base/src/decorators.js';\nimport { reparentChildren } from '@spectrum-web-components/shared/src/reparent-children.js';\nimport { firstFocusableIn } from '@spectrum-web-components/shared/src/first-focusable-in.js';\nimport styles from './active-overlay.css.js';\nimport { parentOverlayOf } from './overlay-utils.js';\nimport { arrow, computePosition, flip, offset, shift, size, } from '@floating-ui/dom';\nconst stateMachine = {\n    initial: 'idle',\n    states: {\n        idle: {\n            on: {\n                active: 'active',\n            },\n        },\n        active: {\n            on: {\n                hiding: 'hiding',\n                idle: 'idle',\n            },\n        },\n        hiding: {\n            on: {\n                dispose: 'dispose',\n            },\n        },\n        dispose: {\n            on: {\n                disposed: 'disposed',\n            },\n        },\n        disposed: {\n            on: {},\n        },\n    },\n};\nconst stateTransition = (state, event) => {\n    if (!state)\n        return stateMachine.initial;\n    /* c8 ignore next */\n    if (!event)\n        return state;\n    return stateMachine.states[state].on[event] || state;\n};\nconst getFallbackPlacements = (placement) => {\n    var _a;\n    const fallbacks = {\n        left: ['right', 'bottom', 'top'],\n        'left-start': ['right-start', 'bottom', 'top'],\n        'left-end': ['right-end', 'bottom', 'top'],\n        right: ['left', 'bottom', 'top'],\n        'right-start': ['left-start', 'bottom', 'top'],\n        'right-end': ['left-end', 'bottom', 'top'],\n        top: ['bottom', 'left', 'right'],\n        'top-start': ['bottom-start', 'left', 'right'],\n        'top-end': ['bottom-end', 'left', 'right'],\n        bottom: ['top', 'left', 'right'],\n        'bottom-start': ['top-start', 'left', 'right'],\n        'bottom-end': ['top-end', 'left', 'right'],\n    };\n    return (_a = fallbacks[placement]) !== null && _a !== void 0 ? _a : [placement];\n};\n/**\n * @element active-overlay\n *\n * @slot - content to display in the overlay\n */\nexport class ActiveOverlay extends SpectrumElement {\n    constructor() {\n        super();\n        this._state = stateTransition();\n        this.animating = false;\n        this.theme = {};\n        this.tabbingAway = false;\n        this.offset = 6;\n        this.skidding = 0;\n        this.interaction = 'hover';\n        this.positionAnimationFrame = 0;\n        this.willNotifyClosed = false;\n        this.isConstrained = false;\n        this.updateOverlayPosition = async () => {\n            if (!this.placement || this.placement === 'none') {\n                return;\n            }\n            await (document.fonts ? document.fonts.ready : Promise.resolve());\n            function roundByDPR(num) {\n                const dpr = window.devicePixelRatio || 1;\n                return Math.round(num * dpr) / dpr || -10000;\n            }\n            // See: https://spectrum.adobe.com/page/popover/#Container-padding\n            const REQUIRED_DISTANCE_TO_EDGE = 8;\n            // See: https://github.com/adobe/spectrum-web-components/issues/910\n            const MIN_OVERLAY_HEIGHT = 100;\n            const flipMiddleware = this.virtualTrigger\n                ? flip({\n                    padding: REQUIRED_DISTANCE_TO_EDGE,\n                    fallbackPlacements: getFallbackPlacements(this.placement),\n                })\n                : flip({\n                    padding: REQUIRED_DISTANCE_TO_EDGE,\n                });\n            const middleware = [\n                offset({\n                    mainAxis: this.offset,\n                    crossAxis: this.skidding,\n                }),\n                shift({ padding: REQUIRED_DISTANCE_TO_EDGE }),\n                flipMiddleware,\n                size({\n                    padding: REQUIRED_DISTANCE_TO_EDGE,\n                    apply: ({ availableWidth, availableHeight, rects: { floating }, }) => {\n                        const maxHeight = Math.max(MIN_OVERLAY_HEIGHT, Math.floor(availableHeight));\n                        const actualHeight = floating.height;\n                        this.initialHeight =\n                            !this.isConstrained && !this.virtualTrigger\n                                ? actualHeight\n                                : this.initialHeight || actualHeight;\n                        this.isConstrained =\n                            actualHeight < this.initialHeight ||\n                                maxHeight <= actualHeight;\n                        const appliedHeight = this.isConstrained\n                            ? `${maxHeight}px`\n                            : '';\n                        Object.assign(this.style, {\n                            maxWidth: `${Math.floor(availableWidth)}px`,\n                            maxHeight: appliedHeight,\n                            height: appliedHeight,\n                        });\n                    },\n                }),\n            ];\n            if (this.overlayContentTip) {\n                middleware.push(arrow({ element: this.overlayContentTip }));\n            }\n            const { x, y, placement, middlewareData } = await computePosition(this.virtualTrigger || this.trigger, this, {\n                placement: this.placement,\n                middleware,\n            });\n            Object.assign(this.style, {\n                top: '0px',\n                left: '0px',\n                transform: `translate(${roundByDPR(x)}px, ${roundByDPR(y)}px)`,\n            });\n            if (placement !== this.getAttribute('actual-placement')) {\n                this.setAttribute('actual-placement', placement);\n                this.overlayContent.setAttribute('placement', placement);\n            }\n            if (this.overlayContentTip && middlewareData.arrow) {\n                const { x: arrowX, y: arrowY } = middlewareData.arrow;\n                Object.assign(this.overlayContentTip.style, {\n                    left: arrowX != null ? `${roundByDPR(arrowX)}px` : '',\n                    top: arrowY != null ? `${roundByDPR(arrowY)}px` : '',\n                    right: '',\n                    bottom: '',\n                });\n            }\n        };\n        this.handleInlineTriggerKeydown = (event) => {\n            const { code, shiftKey } = event;\n            /* c8 ignore next */\n            if (code !== 'Tab')\n                return;\n            if (shiftKey) {\n                this.tabbingAway = true;\n                this.dispatchEvent(new Event('close'));\n                return;\n            }\n            event.stopPropagation();\n            event.preventDefault();\n            this.focus();\n        };\n        this.stealOverlayContentPromise = Promise.resolve();\n        this.stealOverlayContentPromise = new Promise((res) => (this.stealOverlayContentResolver = res));\n    }\n    get state() {\n        return this._state;\n    }\n    set state(state) {\n        const nextState = stateTransition(this.state, state);\n        if (nextState === this.state) {\n            return;\n        }\n        this._state = nextState;\n        if (this.state === 'active' || this.state === 'hiding') {\n            this.setAttribute('state', this.state);\n        }\n        else {\n            this.removeAttribute('state');\n        }\n    }\n    async focus() {\n        const firstFocusable = firstFocusableIn(this);\n        if (firstFocusable) {\n            if (firstFocusable.updateComplete) {\n                await firstFocusable.updateComplete;\n            }\n            const activeElement = this.getRootNode()\n                .activeElement;\n            if (activeElement === this || !this.contains(activeElement)) {\n                firstFocusable.focus();\n            }\n            /* c8 ignore next 3 */\n        }\n        else {\n            super.focus();\n        }\n        this.removeAttribute('tabindex');\n    }\n    get hasTheme() {\n        return !!this.theme.color || !!this.theme.scale || !!this.theme.lang;\n    }\n    static get styles() {\n        return [styles];\n    }\n    get hasModalRoot() {\n        return !!this._modalRoot;\n    }\n    feature() {\n        this.tabIndex = -1;\n        const parentOverlay = parentOverlayOf(this.trigger);\n        const parentIsModal = parentOverlay && parentOverlay.slot === 'open';\n        if (parentIsModal) {\n            this._modalRoot = parentOverlay._modalRoot || parentOverlay;\n        }\n        // If an overlay it triggered from within a \"modal\" overlay, it needs to continue\n        // to act like one to get treated correctly in regards to tab trapping.\n        if (this.interaction === 'modal' || this._modalRoot) {\n            this.slot = 'open';\n            if (this.interaction === 'modal') {\n                this.setAttribute('aria-modal', 'true');\n            }\n            // If this isn't a modal root, walk up the overlays to the next modal root\n            // and \"feature\" each on of the intervening overlays.\n            if (this._modalRoot) {\n                parentOverlay === null || parentOverlay === void 0 ? void 0 : parentOverlay.feature();\n            }\n        }\n    }\n    obscure(nextOverlayInteraction) {\n        if (this.slot && nextOverlayInteraction === 'modal') {\n            this.removeAttribute('slot');\n            this.removeAttribute('aria-modal');\n            // Obscure upto and including the next modal root.\n            if (this.interaction !== 'modal') {\n                const parentOverlay = parentOverlayOf(this.trigger);\n                this._modalRoot = parentOverlay === null || parentOverlay === void 0 ? void 0 : parentOverlay.obscure(nextOverlayInteraction);\n                return this._modalRoot;\n            }\n            return this;\n        }\n        return undefined;\n    }\n    async willUpdate() {\n        if (this.hasUpdated)\n            return;\n        /* c8 ignore next */\n        if (!this.overlayContent || !this.trigger)\n            return;\n        this.stealOverlayContent(this.overlayContent);\n        this.state = 'active';\n        this.feature();\n        if (this.placement === 'none') {\n            this.style.setProperty('--swc-visual-viewport-height', `${window.innerHeight}px`);\n        }\n        else if (this.placement) {\n            await this.updateOverlayPosition();\n            document.addEventListener('sp-update-overlays', this.updateOverlayPosition);\n            window.addEventListener('scroll', this.updateOverlayPosition);\n        }\n        const actions = [];\n        if (this.placement && this.placement !== 'none') {\n            actions.push(this.applyContentAnimation('sp-overlay-fade-in'));\n        }\n        if (typeof this.overlayContent.updateComplete !==\n            'undefined') {\n            actions.push(this.overlayContent.updateComplete);\n        }\n        this.childrenReady = Promise.all(actions);\n    }\n    async openCallback(lifecycleCallback) {\n        await this.updateComplete;\n        if (this.receivesFocus) {\n            await this.focus();\n        }\n        await lifecycleCallback();\n        this.trigger.dispatchEvent(new CustomEvent('sp-opened', {\n            bubbles: true,\n            composed: true,\n            cancelable: true,\n            detail: {\n                interaction: this.interaction,\n            },\n        }));\n    }\n    open(openDetail) {\n        this.extractDetail(openDetail);\n    }\n    extractDetail(detail) {\n        this.overlayContent = detail.content;\n        this.overlayContentTip = detail.contentTip;\n        this.trigger = detail.trigger;\n        this.virtualTrigger = detail.virtualTrigger;\n        this.placement = detail.placement;\n        this.offset = detail.offset;\n        this.skidding = detail.skidding || 0;\n        this.interaction = detail.interaction;\n        this.theme = detail.theme;\n        this.receivesFocus = detail.receivesFocus;\n        this.root = detail.root;\n    }\n    dispose() {\n        /* c8 ignore next */\n        if (this.state !== 'dispose')\n            return;\n        /* c8 ignore next 4 */\n        if (this.timeout) {\n            clearTimeout(this.timeout);\n            delete this.timeout;\n        }\n        this.trigger.removeEventListener('keydown', this.handleInlineTriggerKeydown);\n        this.returnOverlayContent();\n        this.state = 'disposed';\n        if (this.willNotifyClosed) {\n            this.overlayContent.dispatchEvent(new Event('sp-overlay-closed'));\n            this.willNotifyClosed = false;\n        }\n    }\n    stealOverlayContent(element) {\n        this.originalPlacement = element.getAttribute('placement');\n        this.restoreContent = reparentChildren([element], this, {\n            position: 'beforeend',\n            prepareCallback: (el) => {\n                const slotName = el.slot;\n                const placement = el.placement;\n                el.removeAttribute('slot');\n                return (el) => {\n                    el.slot = slotName;\n                    el.placement = placement;\n                };\n            },\n        });\n        this.stealOverlayContentResolver();\n    }\n    returnOverlayContent() {\n        /* c8 ignore next */\n        if (!this.restoreContent)\n            return;\n        const [element] = this.restoreContent();\n        this.restoreContent = undefined;\n        this.willNotifyClosed = true;\n        if (this.originalPlacement) {\n            element.setAttribute('placement', this.originalPlacement);\n            delete this.originalPlacement;\n        }\n    }\n    async hide(animated = true) {\n        this.state = 'hiding';\n        if (animated) {\n            await this.applyContentAnimation('sp-overlay-fade-out');\n        }\n        this.state = 'dispose';\n    }\n    schedulePositionUpdate() {\n        // Edge needs a little time to update the DOM before computing the layout\n        cancelAnimationFrame(this.positionAnimationFrame);\n        this.positionAnimationFrame = requestAnimationFrame(() => this.updateOverlayPosition());\n    }\n    onSlotChange() {\n        this.schedulePositionUpdate();\n    }\n    applyContentAnimation(animation) {\n        if (this.placement === 'none') {\n            return Promise.resolve(true);\n        }\n        return new Promise((resolve) => {\n            const contents = this.shadowRoot.querySelector('#contents');\n            const doneHandler = (event) => {\n                if (animation !== event.animationName)\n                    return;\n                contents.removeEventListener('animationend', doneHandler);\n                contents.removeEventListener('animationcancel', doneHandler);\n                this.animating = false;\n                resolve(event.type === 'animationcancel');\n            };\n            contents.addEventListener('animationend', doneHandler);\n            contents.addEventListener('animationcancel', doneHandler);\n            contents.style.animationName = animation;\n            this.animating = true;\n        });\n    }\n    renderTheme(content) {\n        const { color, scale, lang, theme } = this.theme;\n        return html `\n            <sp-theme\n                theme=${ifDefined(theme)}\n                color=${ifDefined(color)}\n                scale=${ifDefined(scale)}\n                lang=${ifDefined(lang)}\n                part=\"theme\"\n            >\n                ${content}\n            </sp-theme>\n        `;\n    }\n    render() {\n        const content = html `\n            <div id=\"contents\">\n                <slot @slotchange=${this.onSlotChange}></slot>\n            </div>\n        `;\n        return this.hasTheme ? this.renderTheme(content) : content;\n    }\n    static create(details) {\n        const overlay = new ActiveOverlay();\n        if (details.content) {\n            overlay.open(details);\n        }\n        return overlay;\n    }\n    async getUpdateComplete() {\n        const actions = [\n            super.getUpdateComplete(),\n            this.stealOverlayContentPromise,\n        ];\n        if (this.childrenReady) {\n            actions.push(this.childrenReady);\n        }\n        const [complete] = await Promise.all(actions);\n        return complete;\n    }\n    disconnectedCallback() {\n        document.removeEventListener('sp-update-overlays', this.updateOverlayPosition);\n        window.removeEventListener('scroll', this.updateOverlayPosition);\n        super.disconnectedCallback();\n    }\n}\n__decorate([\n    property()\n], ActiveOverlay.prototype, \"_state\", void 0);\n__decorate([\n    property({ reflect: true, type: Boolean })\n], ActiveOverlay.prototype, \"animating\", void 0);\n__decorate([\n    property({ reflect: true })\n], ActiveOverlay.prototype, \"placement\", void 0);\n__decorate([\n    property({ attribute: false })\n], ActiveOverlay.prototype, \"theme\", void 0);\n__decorate([\n    property({ attribute: false })\n], ActiveOverlay.prototype, \"receivesFocus\", void 0);\n//# sourceMappingURL=ActiveOverlay.js.map","/*\nCopyright 2020 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\nconst DEFAULT_WARMUP = 1000;\nconst DEFAULT_COOLDOWN = 1000;\n/**\n * A timer to help with implementation of warnup/cooldown behavior as described here:\n * https://spectrum.adobe.com/page/tooltip/#Immediate-or-delayed-appearance\n */\nexport class OverlayTimer {\n    constructor(options = {}) {\n        this.warmUpDelay = DEFAULT_WARMUP;\n        this.coolDownDelay = DEFAULT_COOLDOWN;\n        this.isWarm = false;\n        this.timeout = 0;\n        Object.assign(this, options);\n    }\n    async openTimer(component) {\n        this.cancelCooldownTimer();\n        if (!this.component || component !== this.component) {\n            if (this.component) {\n                this.close(this.component);\n                this.cancelCooldownTimer();\n            }\n            this.component = component;\n            if (this.isWarm) {\n                return false;\n            }\n            this.promise = new Promise((resolve) => {\n                this.resolve = resolve;\n                this.timeout = window.setTimeout(() => {\n                    if (this.resolve) {\n                        this.resolve(false);\n                        this.isWarm = true;\n                    }\n                }, this.warmUpDelay);\n            });\n            return this.promise;\n        }\n        else if (this.promise) {\n            return this.promise;\n        }\n        else {\n            // This should never happen\n            throw new Error('Inconsistent state');\n        }\n    }\n    close(component) {\n        if (this.component && this.component === component) {\n            this.resetCooldownTimer();\n            if (this.timeout > 0) {\n                clearTimeout(this.timeout);\n                this.timeout = 0;\n            }\n            if (this.resolve) {\n                this.resolve(true);\n                delete this.resolve;\n            }\n            delete this.promise;\n            delete this.component;\n        }\n    }\n    resetCooldownTimer() {\n        if (this.isWarm) {\n            if (this.cooldownTimeout) {\n                window.clearTimeout(this.cooldownTimeout);\n            }\n            this.cooldownTimeout = window.setTimeout(() => {\n                this.isWarm = false;\n                delete this.cooldownTimeout;\n            }, this.coolDownDelay);\n        }\n    }\n    cancelCooldownTimer() {\n        if (this.cooldownTimeout) {\n            window.clearTimeout(this.cooldownTimeout);\n        }\n        delete this.cooldownTimeout;\n    }\n}\n//# sourceMappingURL=overlay-timer.js.map","/*\nCopyright 2020 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\nimport { ActiveOverlay } from './src/ActiveOverlay.js';\ncustomElements.define('active-overlay', ActiveOverlay);\n//# sourceMappingURL=active-overlay.js.map","/*\nCopyright 2020 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\nimport { OverlayStack } from './overlay-stack.js';\n/**\n * This class allows access to the overlay system which allows a client to\n * position an element in the overlay positioned relative to another node.\n */\nexport class Overlay {\n    /**\n     *\n     * @param owner the parent element we will use to position the overlay element\n     * @param interaction the type of interaction that caused this overlay to be shown\n     * @param overlayElement the item to display as an overlay\n     */\n    constructor(owner, interaction, overlayElement) {\n        this.isOpen = false;\n        this.owner = owner;\n        this.overlayElement = overlayElement;\n        this.interaction = interaction;\n    }\n    /**\n     * Open an overlay\n     *\n     * @param owner the parent element we will use to position the overlay element\n     * @param interaction the type of interaction that caused this overlay to be shown\n     * @param overlayElement the item to display as an overlay\n     * @param options display parameters\n     * @param options.delayed if true delay opening of the overlay based on the global warmup/cooldown timer\n     * @param options.offset distance to offset the overlay\n     * @param options.placement side on which to position the overlay\n     * @returns an Overlay object which can be used to close the overlay\n     */\n    static async open(owner, interaction, overlayElement, options) {\n        const overlay = new Overlay(owner, interaction, overlayElement);\n        await overlay.open(options);\n        return () => {\n            overlay.close();\n        };\n    }\n    static update() {\n        const overlayUpdateEvent = new CustomEvent('sp-update-overlays', {\n            bubbles: true,\n            composed: true,\n            cancelable: true,\n        });\n        document.dispatchEvent(overlayUpdateEvent);\n    }\n    /**\n     * Open an overlay\n     *\n     * @param options display parameters\n     * @param options.delayed delay before opening the overlay\n     * @param options.offset distance to offset the overlay\n     * @param options.placement side on which to position the overlay\n     * @returns a Promise that resolves to true if this operation was cancelled\n     */\n    async open({ abortPromise, delayed, offset = 0, placement = 'top', receivesFocus, notImmediatelyClosable, virtualTrigger, root, }) {\n        /* c8 ignore next */\n        if (this.isOpen)\n            return true;\n        if (delayed === undefined) {\n            delayed = this.overlayElement.hasAttribute('delayed');\n        }\n        const queryThemeDetail = {\n            color: undefined,\n            scale: undefined,\n            lang: undefined,\n            theme: undefined,\n        };\n        const queryThemeEvent = new CustomEvent('sp-query-theme', {\n            bubbles: true,\n            composed: true,\n            detail: queryThemeDetail,\n            cancelable: true,\n        });\n        this.owner.dispatchEvent(queryThemeEvent);\n        const overlayDetailQuery = {};\n        const queryOverlayDetailEvent = new CustomEvent('sp-overlay-query', {\n            bubbles: true,\n            composed: true,\n            detail: overlayDetailQuery,\n            cancelable: true,\n        });\n        this.overlayElement.dispatchEvent(queryOverlayDetailEvent);\n        await Overlay.overlayStack.openOverlay(Object.assign({ abortPromise, content: this.overlayElement, contentTip: overlayDetailQuery.overlayContentTipElement, delayed, offset: offset, placement: placement, trigger: this.owner, interaction: this.interaction, theme: queryThemeDetail, receivesFocus,\n            root,\n            notImmediatelyClosable,\n            virtualTrigger }, overlayDetailQuery));\n        this.isOpen = true;\n        return true;\n    }\n    /**\n     * Close the overlay if it is open\n     */\n    close() {\n        Overlay.overlayStack.closeOverlay(this.overlayElement);\n    }\n}\nOverlay.overlayStack = new OverlayStack();\n/**\n * Announces that an overlay-based UI element has opened\n * @event sp-open\n * @type {object}\n * @property {TriggerInteractions} interaction type of interaction that triggered the opening\n */\n/**\n * Announces that an overlay-based UI element has opened\n * @event sp-close\n * @type {object}\n * @property {TriggerInteractions} interaction type of interaction that triggered the closing\n */\n//# sourceMappingURL=overlay.js.map","/*\nCopyright 2020 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\nimport { ActiveOverlay } from './ActiveOverlay.js';\nimport { OverlayTimer } from './overlay-timer.js';\nimport '../active-overlay.js';\nimport { findOverlaysRootedInOverlay, parentOverlayOf, } from './overlay-utils.js';\nimport { getDeepElementFromPoint } from '@spectrum-web-components/shared/src/get-deep-element-from-point.js';\nfunction isLeftClick(event) {\n    return event.button === 0;\n}\nfunction hasModifier(event) {\n    return !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\n}\nexport class OverlayStack {\n    constructor() {\n        this.overlays = [];\n        this.preventMouseRootClose = false;\n        this.root = document.body;\n        this.handlingResize = false;\n        this.overlayTimer = new OverlayTimer();\n        this.canTabTrap = true;\n        this.trappingInited = false;\n        this._eventsAreBound = false;\n        this._bodyMarginsApplied = false;\n        this.forwardContextmenuEvent = async (event) => {\n            var _a;\n            const topOverlay = this.overlays[this.overlays.length - 1];\n            if (!this.trappingInited ||\n                topOverlay.interaction !== 'modal' ||\n                event.target !== this.overlayHolder) {\n                return;\n            }\n            event.stopPropagation();\n            event.preventDefault();\n            await this.closeTopOverlay();\n            (_a = getDeepElementFromPoint(event.clientX, event.clientY)) === null || _a === void 0 ? void 0 : _a.dispatchEvent(new MouseEvent('contextmenu', event));\n        };\n        this.handleOverlayClose = (event) => {\n            const { root } = event;\n            if (!root)\n                return;\n            this.closeOverlaysForRoot(root);\n        };\n        this.handleMouseCapture = (event) => {\n            const topOverlay = this.topOverlay;\n            if (!event.target ||\n                !topOverlay ||\n                !topOverlay.overlayContent ||\n                hasModifier(event) ||\n                !isLeftClick(event)) {\n                this.preventMouseRootClose = true;\n                return;\n            }\n            if (event.target instanceof Node) {\n                const path = event.composedPath();\n                if (path.indexOf(topOverlay.overlayContent) >= 0) {\n                    this.preventMouseRootClose = true;\n                    return;\n                }\n                this.preventMouseRootClose = false;\n            }\n        };\n        /**\n         * A \"longpress\" occurs before the \"click\" that creates it has occured.\n         * In that way the first click will still be part of the \"longpress\" and\n         * not part of closing the overlay.\n         */\n        this._doesNotCloseOnFirstClick = false;\n        this.handleMouse = (event) => {\n            var _a;\n            if (this._doesNotCloseOnFirstClick) {\n                this._doesNotCloseOnFirstClick = false;\n                return;\n            }\n            if (this.preventMouseRootClose || event.defaultPrevented) {\n                return;\n            }\n            this.closeTopOverlay();\n            const overlaysToClose = [];\n            let root = (_a = this.topOverlay) === null || _a === void 0 ? void 0 : _a.root;\n            let overlay = parentOverlayOf(root);\n            while (root && overlay) {\n                overlaysToClose.push(overlay);\n                overlay = parentOverlayOf(root);\n                root = overlay === null || overlay === void 0 ? void 0 : overlay.root;\n            }\n            if (overlay) {\n                overlaysToClose.push(overlay);\n            }\n            overlaysToClose.forEach((overlay) => this.hideAndCloseOverlay(overlay));\n        };\n        this.handleKeyUp = (event) => {\n            if (event.code === 'Escape') {\n                this.closeTopOverlay();\n            }\n        };\n        this.handleResize = () => {\n            if (this.handlingResize)\n                return;\n            this.handlingResize = true;\n            requestAnimationFrame(async () => {\n                const promises = this.overlays.map((overlay) => overlay.updateOverlayPosition());\n                await Promise.all(promises);\n                this.handlingResize = false;\n            });\n        };\n    }\n    initTabTrapping() {\n        if (this.trappingInited)\n            return;\n        this.trappingInited = true;\n        /* c8 ignore next 4 */\n        if (this.document.body.shadowRoot) {\n            this.canTabTrap = false;\n            return;\n        }\n        this.document.body.attachShadow({ mode: 'open' });\n        /* c8 ignore next 3 */\n        if (!this.document.body.shadowRoot) {\n            return;\n        }\n        const root = this.document.body.shadowRoot;\n        root.innerHTML = `\n            <style>\n            :host {\n                position: relative;\n            }\n            #actual {\n                position: relative;\n                height: calc(100% - var(--swc-body-margins-block, 0px));\n                z-index: 0;\n                min-height: calc(100vh - var(--swc-body-margins-block, 0px));\n            }\n            #holder {\n                display: none;\n                align-items: center;\n                justify-content: center;\n                flex-flow: column;\n                width: 100%;\n                height: 100%;\n                position: absolute;\n                top: 0;\n                left: 0;\n            }\n            [name=\"open\"]::slotted(*) {\n                pointer-events: all;\n            }\n            #actual[aria-hidden] + #holder {\n                display: flex;\n            }\n            </style>\n            <div id=\"actual\"><slot></slot></div>\n            <div id=\"holder\"><slot name=\"open\"></slot></div>\n        `;\n        this.tabTrapper = root.querySelector('#actual');\n        this.overlayHolder = root.querySelector('#holder');\n        this.tabTrapper.attachShadow({ mode: 'open' });\n        if (this.tabTrapper.shadowRoot) {\n            this.tabTrapper.shadowRoot.innerHTML = '<slot></slot>';\n        }\n        this.overlayHolder.addEventListener('contextmenu', this.forwardContextmenuEvent, true);\n        requestAnimationFrame(() => {\n            this.applyBodyMargins();\n            const observer = new ResizeObserver(() => {\n                this.applyBodyMargins();\n            });\n            observer.observe(document.body);\n        });\n    }\n    applyBodyMargins() {\n        const { marginLeft, marginRight, marginTop, marginBottom } = getComputedStyle(document.body);\n        const allZero = parseFloat(marginLeft) === 0 &&\n            parseFloat(marginRight) === 0 &&\n            parseFloat(marginTop) === 0 &&\n            parseFloat(marginBottom) === 0;\n        if (allZero && !this._bodyMarginsApplied) {\n            return;\n        }\n        this.tabTrapper.style.setProperty('--swc-body-margins-inline', `calc(${marginLeft} + ${marginRight})`);\n        this.tabTrapper.style.setProperty('--swc-body-margins-block', `calc(${marginTop} + ${marginBottom})`);\n        this._bodyMarginsApplied = !allZero;\n    }\n    startTabTrapping() {\n        this.initTabTrapping();\n        /* c8 ignore next 3 */\n        if (!this.canTabTrap) {\n            return;\n        }\n        this.tabTrapper.tabIndex = -1;\n        this.tabTrapper.setAttribute('aria-hidden', 'true');\n    }\n    stopTabTrapping() {\n        /* c8 ignore next 3 */\n        if (!this.canTabTrap || !this.trappingInited) {\n            return;\n        }\n        this.tabTrapper.removeAttribute('tabindex');\n        this.tabTrapper.removeAttribute('aria-hidden');\n    }\n    get document() {\n        return this.root.ownerDocument /* c8 ignore next */ || document;\n    }\n    get topOverlay() {\n        return this.overlays.slice(-1)[0];\n    }\n    findOverlayForContent(overlayContent) {\n        for (const item of this.overlays) {\n            if (overlayContent === item.overlayContent) {\n                return item;\n            }\n        }\n        return undefined;\n    }\n    addEventListeners() {\n        if (this._eventsAreBound)\n            return;\n        this._eventsAreBound = true;\n        this.document.addEventListener('click', this.handleMouseCapture, true);\n        this.document.addEventListener('click', this.handleMouse);\n        this.document.addEventListener('keyup', this.handleKeyUp);\n        this.document.addEventListener('sp-overlay-close', this.handleOverlayClose);\n        window.addEventListener('resize', this.handleResize);\n    }\n    isClickOverlayActiveForTrigger(trigger) {\n        return this.overlays.some((item) => trigger === item.trigger && item.interaction === 'click');\n    }\n    async openOverlay(details) {\n        this.addEventListeners();\n        if (this.findOverlayForContent(details.content)) {\n            return false;\n        }\n        if (details.notImmediatelyClosable) {\n            this._doesNotCloseOnFirstClick = true;\n        }\n        if (details.interaction === 'modal') {\n            this.startTabTrapping();\n        }\n        const contentWithLifecycle = details.content;\n        if (contentWithLifecycle.overlayWillOpenCallback) {\n            const { trigger } = details;\n            contentWithLifecycle.overlayWillOpenCallback({ trigger });\n        }\n        if (details.delayed) {\n            const cancelledPromise = this.overlayTimer.openTimer(details.content);\n            const promises = [cancelledPromise];\n            if (details.abortPromise) {\n                promises.push(details.abortPromise);\n            }\n            const cancelled = await Promise.race(promises);\n            if (cancelled) {\n                if (contentWithLifecycle.overlayOpenCancelledCallback) {\n                    const { trigger } = details;\n                    contentWithLifecycle.overlayOpenCancelledCallback({\n                        trigger,\n                    });\n                }\n                return cancelled;\n            }\n        }\n        if (details.root) {\n            this.closeOverlaysForRoot(details.root);\n        }\n        if (details.interaction === 'click') {\n            this.closeAllHoverOverlays();\n        }\n        else if (details.interaction === 'hover' &&\n            this.isClickOverlayActiveForTrigger(details.trigger)) {\n            // Don't show a hover popover if the click popover is already active\n            return true;\n        }\n        const activeOverlay = ActiveOverlay.create(details);\n        if (this.overlays.length) {\n            const topOverlay = this.overlays[this.overlays.length - 1];\n            topOverlay.obscure(activeOverlay.interaction);\n        }\n        document.body.appendChild(activeOverlay);\n        /**\n         * The following work to make the new overlay the \"top\" of the stack\n         * has to happen AFTER the current call stack completes in case there\n         * is work there in to remove the previous \"top\" overlay.\n         */\n        return new Promise((res) => requestAnimationFrame(res)).then(async () => {\n            this.overlays.push(activeOverlay);\n            await activeOverlay.updateComplete;\n            this.addOverlayEventListeners(activeOverlay);\n            if (typeof contentWithLifecycle.open !== 'undefined') {\n                contentWithLifecycle.open = true;\n            }\n            let cb = () => {\n                return;\n            };\n            if (contentWithLifecycle.overlayOpenCallback) {\n                const { trigger } = activeOverlay;\n                const { overlayOpenCallback } = contentWithLifecycle;\n                cb = async () => await overlayOpenCallback({ trigger });\n            }\n            await activeOverlay.openCallback(cb);\n            return false;\n        });\n    }\n    addOverlayEventListeners(activeOverlay) {\n        activeOverlay.addEventListener('close', (() => {\n            this.hideAndCloseOverlay(activeOverlay, true // animated?\n            );\n        }));\n        switch (activeOverlay.interaction) {\n            case 'replace':\n                this.addReplaceOverlayEventListeners(activeOverlay);\n                break;\n            case 'inline':\n                this.addInlineOverlayEventListeners(activeOverlay);\n                break;\n        }\n    }\n    addReplaceOverlayEventListeners(activeOverlay) {\n        activeOverlay.addEventListener('keydown', (event) => {\n            const { code } = event;\n            /* c8 ignore next */\n            if (code !== 'Tab')\n                return;\n            event.stopPropagation();\n            this.closeOverlay(activeOverlay.overlayContent);\n            activeOverlay.tabbingAway = true;\n            activeOverlay.trigger.focus();\n            activeOverlay.trigger.dispatchEvent(new KeyboardEvent('keydown', event));\n        });\n    }\n    addInlineOverlayEventListeners(activeOverlay) {\n        activeOverlay.trigger.addEventListener('keydown', activeOverlay.handleInlineTriggerKeydown);\n        activeOverlay.addEventListener('keydown', (event) => {\n            const { code, shiftKey } = event;\n            /* c8 ignore next */\n            if (code !== 'Tab')\n                return;\n            activeOverlay.tabbingAway = true;\n            if (shiftKey) {\n                const returnFocusElement = document.createElement('span');\n                returnFocusElement.tabIndex = -1;\n                if (activeOverlay.trigger.hasAttribute('slot')) {\n                    returnFocusElement.slot = activeOverlay.trigger.slot;\n                }\n                activeOverlay.trigger.insertAdjacentElement('afterend', returnFocusElement);\n                returnFocusElement.focus();\n                returnFocusElement.remove();\n                return;\n            }\n            event.stopPropagation();\n            const triggerWithLifecycle = activeOverlay.trigger;\n            if (typeof triggerWithLifecycle.open !== 'undefined') {\n                triggerWithLifecycle.open = false;\n            }\n            this.closeOverlay(activeOverlay.overlayContent);\n            activeOverlay.trigger.focus();\n        });\n    }\n    closeOverlay(content) {\n        this.overlayTimer.close(content);\n        requestAnimationFrame(() => {\n            const overlayFromContent = this.findOverlayForContent(content);\n            const overlaysToClose = [overlayFromContent];\n            overlaysToClose.push(...findOverlaysRootedInOverlay(overlayFromContent, this.overlays));\n            overlaysToClose.forEach((overlay) => this.hideAndCloseOverlay(overlay));\n        });\n    }\n    closeAllHoverOverlays() {\n        for (const overlay of this.overlays) {\n            if (overlay.interaction === 'hover') {\n                this.hideAndCloseOverlay(overlay, false);\n            }\n        }\n    }\n    closeOverlaysForRoot(root) {\n        const overlaysToClose = [];\n        for (const overlay of this.overlays) {\n            if (overlay.root && overlay.root === root) {\n                overlaysToClose.push(overlay);\n                overlaysToClose.push(...findOverlaysRootedInOverlay(overlay, this.overlays));\n            }\n        }\n        overlaysToClose.forEach((overlay) => this.hideAndCloseOverlay(overlay, true, true));\n    }\n    async manageFocusAfterCloseWhenOverlaysRemain(returnBeforeFocus) {\n        const topOverlay = this.overlays[this.overlays.length - 1];\n        topOverlay.feature();\n        // Push focus in the the next remaining overlay as needed when a `type=\"modal\"` overlay exists.\n        if (topOverlay.interaction === 'modal' || topOverlay.hasModalRoot) {\n            if (returnBeforeFocus)\n                return;\n            await topOverlay.focus();\n        }\n        else {\n            this.stopTabTrapping();\n        }\n    }\n    manageFocusAfterCloseWhenLastOverlay(overlay) {\n        this.stopTabTrapping();\n        const isModal = overlay.interaction === 'modal';\n        const isReceivesFocus = overlay.receivesFocus === 'auto';\n        const isReplace = overlay.interaction === 'replace';\n        const isInline = overlay.interaction === 'inline';\n        const isTabbingAwayFromInlineOrReplace = (isReplace || isInline) && !overlay.tabbingAway;\n        overlay.tabbingAway = false;\n        if (!isModal && !isReceivesFocus && !isTabbingAwayFromInlineOrReplace) {\n            return;\n        }\n        // Manage post closure focus when needed.\n        const overlayRoot = overlay.overlayContent.getRootNode();\n        const overlayContentActiveElement = overlayRoot.activeElement;\n        let triggerRoot;\n        let triggerActiveElement;\n        const contentContainsActiveElement = () => overlay.overlayContent.contains(overlayContentActiveElement);\n        const triggerRootContainsActiveElement = () => {\n            triggerRoot = overlay.trigger.getRootNode();\n            triggerActiveElement = triggerRoot.activeElement;\n            return triggerRoot.contains(triggerActiveElement);\n        };\n        const triggerHostIsActiveElement = () => triggerRoot.host && triggerRoot.host === triggerActiveElement;\n        // Return focus to the trigger as long as the user hasn't actively focused\n        // something outside of the current overlay interface; trigger, root, host.\n        if (isModal ||\n            contentContainsActiveElement() ||\n            triggerRootContainsActiveElement() ||\n            triggerHostIsActiveElement()) {\n            overlay.trigger.focus();\n        }\n    }\n    async hideAndCloseOverlay(overlay, animated, returnBeforeFocus) {\n        if (!overlay) {\n            return;\n        }\n        const contentWithLifecycle = overlay.overlayContent;\n        if (typeof contentWithLifecycle.overlayWillCloseCallback !== 'undefined') {\n            const { trigger } = overlay;\n            if (contentWithLifecycle.overlayWillCloseCallback({ trigger })) {\n                return;\n            }\n        }\n        await overlay.hide(animated);\n        if (typeof contentWithLifecycle.open !== 'undefined') {\n            contentWithLifecycle.open = false;\n        }\n        if (contentWithLifecycle.overlayCloseCallback) {\n            const { trigger } = overlay;\n            await contentWithLifecycle.overlayCloseCallback({ trigger });\n        }\n        if (overlay.state != 'dispose')\n            return;\n        const index = this.overlays.indexOf(overlay);\n        if (index >= 0) {\n            this.overlays.splice(index, 1);\n        }\n        if (this.overlays.length) {\n            await this.manageFocusAfterCloseWhenOverlaysRemain(returnBeforeFocus);\n        }\n        else {\n            this.manageFocusAfterCloseWhenLastOverlay(overlay);\n        }\n        overlay.remove();\n        overlay.dispose();\n        overlay.trigger.dispatchEvent(new CustomEvent('sp-closed', {\n            bubbles: true,\n            composed: true,\n            cancelable: true,\n            detail: {\n                interaction: overlay.interaction,\n            },\n        }));\n    }\n    closeTopOverlay() {\n        return this.hideAndCloseOverlay(this.topOverlay, true);\n    }\n}\n//# sourceMappingURL=overlay-stack.js.map","/*\nCopyright 2022 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\nexport const getDeepElementFromPoint = (x, y) => {\n    let target = document.elementFromPoint(x, y);\n    while (target === null || target === void 0 ? void 0 : target.shadowRoot) {\n        const innerTarget = target.shadowRoot.elementFromPoint(x, y);\n        if (!innerTarget || innerTarget === target) {\n            break;\n        }\n        target = innerTarget;\n    }\n    return target;\n};\n//# sourceMappingURL=get-deep-element-from-point.js.map"],"names":["css","el","closest","closestOverlay","getRootNode","rootNode","host","rootOverlay","activeOverlays","overlay","root","parentOverlayOf","overlays","push","findOverlaysRootedInOverlay","t","split","e","n","includes","r","i","o","a","reference","l","floating","s","c","x","width","f","y","height","u","m","g","d","p","top","right","bottom","left","platform","rects","elements","strategy","boundary","rootBoundary","elementContext","altBoundary","padding","h","getClippingRect","element","isElement","contextElement","getDocumentElement","w","convertOffsetParentRelativeRectToViewportRelativeRect","rect","offsetParent","getOffsetParent","Math","min","max","replace","main","cross","start","end","reduce","concat","b","name","options","[object Object]","placement","middlewareData","initialPlacement","mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment","v","R","A","P","T","flip","overflows","isRTL","every","O","D","index","data","reset","L","map","filter","sort","alignmentAxis","limiter","fn","k","apply","availableHeight","availableWidth","getDimensions","document","location","alert","setInterval","window","ownerDocument","defaultView","getComputedStyle","nodeName","toLowerCase","navigator","userAgentData","brands","brand","version","join","userAgent","HTMLElement","Element","ShadowRoot","overflow","overflowX","overflowY","test","transform","perspective","contain","willChange","round","getBoundingClientRect","offsetWidth","offsetHeight","visualViewport","offsetLeft","offsetTop","Node","documentElement","scrollLeft","scrollTop","pageXOffset","pageYOffset","clientLeft","clientTop","assignedSlot","parentNode","position","W","E","body","H","C","clientWidth","clientHeight","scrollWidth","scrollHeight","direction","S","contains","getElementRects","getClientRects","Array","from","z","async","middleware","length","initial","states","idle","on","active","hiding","dispose","disposed","state","event","left-start","left-end","right-start","right-end","top-start","top-end","bottom-start","bottom-end","_a","constructor","super","this","stateTransition","num","devicePixelRatio","dpr","fonts","ready","Promise","resolve","virtualTrigger","getFallbackPlacements","offset","skidding","shift","flipMiddleware","size","floor","initialHeight","isConstrained","actualHeight","maxHeight","Object","assign","style","maxWidth","appliedHeight","overlayContentTip","centerOffset","arrow","trigger","roundByDPR","getAttribute","setAttribute","overlayContent","arrowX","arrowY","code","shiftKey","tabbingAway","dispatchEvent","stopPropagation","preventDefault","focus","stealOverlayContentPromise","res","stealOverlayContentResolver","_state","nextState","removeAttribute","firstFocusableIn","firstFocusable","updateComplete","activeElement","hasTheme","theme","color","scale","lang","styles","hasModalRoot","_modalRoot","feature","tabIndex","parentOverlay","slot","interaction","obscure","nextOverlayInteraction","hasUpdated","stealOverlayContent","setProperty","innerHeight","updateOverlayPosition","addEventListener","actions","applyContentAnimation","childrenReady","all","lifecycleCallback","receivesFocus","bubbles","composed","cancelable","detail","open","openDetail","extractDetail","content","contentTip","timeout","clearTimeout","removeEventListener","handleInlineTriggerKeydown","returnOverlayContent","willNotifyClosed","originalPlacement","restoreContent","reparentChildren","prepareCallback","slotName","undefined","animated","schedulePositionUpdate","cancelAnimationFrame","positionAnimationFrame","requestAnimationFrame","onSlotChange","animation","shadowRoot","querySelector","animationName","contents","doneHandler","animating","type","renderTheme","ifDefined","render","html","details","getUpdateComplete","complete","disconnectedCallback","__decorate","property","reflect","Boolean","attribute","component","cancelCooldownTimer","promise","close","isWarm","setTimeout","warmUpDelay","resetCooldownTimer","cooldownTimeout","coolDownDelay","customElements","define","ActiveOverlay","owner","overlayElement","overlayUpdateEvent","abortPromise","delayed","notImmediatelyClosable","isOpen","hasAttribute","queryThemeDetail","queryThemeEvent","overlayDetailQuery","queryOverlayDetailEvent","overlayStack","openOverlay","overlayContentTipElement","Overlay","closeOverlay","trappingInited","topOverlay","target","overlayHolder","closeTopOverlay","elementFromPoint","innerTarget","clientX","clientY","closeOverlaysForRoot","metaKey","altKey","ctrlKey","hasModifier","button","isLeftClick","composedPath","indexOf","preventMouseRootClose","_doesNotCloseOnFirstClick","defaultPrevented","overlaysToClose","forEach","hideAndCloseOverlay","handlingResize","promises","initTabTrapping","canTabTrap","attachShadow","mode","innerHTML","tabTrapper","forwardContextmenuEvent","applyBodyMargins","observe","marginLeft","marginRight","marginTop","marginBottom","parseFloat","allZero","_bodyMarginsApplied","startTabTrapping","stopTabTrapping","slice","findOverlayForContent","item","addEventListeners","_eventsAreBound","handleMouseCapture","handleMouse","handleKeyUp","handleOverlayClose","handleResize","isClickOverlayActiveForTrigger","some","contentWithLifecycle","overlayWillOpenCallback","overlayTimer","openTimer","race","cancelled","overlayOpenCancelledCallback","closeAllHoverOverlays","create","activeOverlay","appendChild","then","addOverlayEventListeners","overlayOpenCallback","cb","openCallback","addReplaceOverlayEventListeners","addInlineOverlayEventListeners","createElement","returnFocusElement","insertAdjacentElement","remove","triggerWithLifecycle","overlayFromContent","returnBeforeFocus","manageFocusAfterCloseWhenLastOverlay","isReplace","isInline","isModal","isReceivesFocus","isTabbingAwayFromInlineOrReplace","overlayContentActiveElement","triggerRoot","triggerActiveElement","overlayWillCloseCallback","hide","overlayCloseCallback","splice","manageFocusAfterCloseWhenOverlaysRemain"],"mappings":"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"}