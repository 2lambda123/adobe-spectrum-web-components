import{S as t,n as e,x as n,d as o}from"./3b42bd6e.js";import{E as i,e as s}from"./d11544d8.js";import{t as r,c as a}from"./d3406c6e.js";import{f as l,a as c}from"./27e6a3fc.js";import{u as h}from"./9f9c5c08.js";import{i as d}from"./112b2095.js";import{o as p}from"./6663919c.js";import{i as u,l as m}from"./41477eb1.js";import{l as g}from"./4b018fa5.js";function f(t){return"undefined"!=typeof window&&null!=window.navigator&&t.test(window.navigator.platform)}function y(){return f(/^iPhone/)}function v(){return f(/^iPad/)||f(/^Mac/)&&navigator.maxTouchPoints>1}function b(){return y()||v()}function w(){return function(t){return"undefined"!=typeof window&&null!=window.navigator&&t.test(window.navigator.userAgent)}(/Android/)}const E=new class{constructor(t={}){this.warmUpDelay=1e3,this.coolDownDelay=1e3,this.isWarm=!1,this.timeout=0,Object.assign(this,t)}async openTimer(t){if(this.cancelCooldownTimer(),!this.component||t!==this.component)return this.component&&(this.close(this.component),this.cancelCooldownTimer()),this.component=t,!this.isWarm&&(this.promise=new Promise((t=>{this.resolve=t,this.timeout=window.setTimeout((()=>{this.resolve&&(this.resolve(!1),this.isWarm=!0)}),this.warmUpDelay)})),this.promise);if(this.promise)return this.promise;throw new Error("Inconsistent state")}close(t){this.component&&this.component===t&&(this.resetCooldownTimer(),this.timeout>0&&(clearTimeout(this.timeout),this.timeout=0),this.resolve&&(this.resolve(!0),delete this.resolve),delete this.promise,delete this.component)}resetCooldownTimer(){this.isWarm&&(this.cooldownTimeout&&window.clearTimeout(this.cooldownTimeout),this.cooldownTimeout=window.setTimeout((()=>{this.isWarm=!1,delete this.cooldownTimeout}),this.coolDownDelay))}cancelCooldownTimer(){this.cooldownTimeout&&window.clearTimeout(this.cooldownTimeout),delete this.cooldownTimeout}},x=()=>{};class P extends Event{constructor(){super("beforetoggle",{bubbles:!1,composed:!1}),this.currentState="open",this.newState="closed"}}class C extends Event{constructor(){super("beforetoggle",{bubbles:!1,composed:!1}),this.currentState="closed",this.newState="open"}}const T=(t,e,n)=>{const o=new AbortController,i=new Map,s=()=>{o.abort(),n()};let r,a;const l=requestAnimationFrame((()=>{r=requestAnimationFrame((()=>{a=requestAnimationFrame((()=>{s()}))}))})),c=e=>{e.target===t&&(i.set(e.propertyName,i.get(e.propertyName)-1),i.get(e.propertyName)||i.delete(e.propertyName),0===i.size&&s())};t.addEventListener("transitionrun",(e=>{e.target===t&&(i.has(e.propertyName)||i.set(e.propertyName,0),i.set(e.propertyName,i.get(e.propertyName)+1),cancelAnimationFrame(l),cancelAnimationFrame(r),cancelAnimationFrame(a))}),{signal:o.signal}),t.addEventListener("transitionend",c,{signal:o.signal}),t.addEventListener("transitioncancel",c,{signal:o.signal}),e()};function L(){return new Promise((t=>requestAnimationFrame((()=>t()))))}class O extends t{constructor(){super(...arguments),this.dispose=x,this.offset=6,this.willPreventClose=!1}async applyFocus(t,e){}get delayed(){return!1}set delayed(t){}async ensureOnDOM(t){}async makeTransition(t){return null}async manageDelay(t){}async manageDialogOpen(){}async managePopoverOpen(){}managePosition(){}get open(){return!1}set open(t){}get state(){return"closed"}set state(t){}manuallyKeepOpen(){}static update(){const t=new CustomEvent("sp-update-overlays",{bubbles:!0,composed:!0,cancelable:!0});document.dispatchEvent(t)}static async open(t,e,n,o){var i,s,r,a;await Promise.resolve().then((function(){return Kt}));const l=2===arguments.length,c=n||t,h=new this;let d=!1;h.dispose=()=>{h.addEventListener("sp-closed",(()=>{d||(p(),d=!0),requestAnimationFrame((()=>{h.remove()}))})),h.open=!1,h.dispose=x};const p=((t,e,{position:n,prepareCallback:o}={position:"beforeend"})=>{let{length:i}=t;if(0===i)return()=>t;let s=1,r=0;("afterbegin"===n||"afterend"===n)&&(s=-1,r=i-1);const a=new Array(i),l=new Array(i),c=document.createComment("placeholder for reparented element");do{const i=t[r];o&&(l[r]=o(i)),a[r]=c.cloneNode();const h=i.parentElement||i.getRootNode();h&&h!==i&&h.replaceChild(a[r],i),e.insertAdjacentElement(n,i),r+=s}while(--i>0);return function(){return function(t,e,n=[]){for(let o=0;o<e.length;++o){const i=e[o],s=t[o],r=s.parentElement||s.getRootNode();n[o]&&n[o](i),r&&r!==s&&r.replaceChild(i,s),delete t[o]}return e}(a,t,l)}})([c],h,{position:"beforeend",prepareCallback:t=>{const e=t.slot;return t.removeAttribute("slot"),()=>{t.slot=e}}});if(!l&&c&&o){const n=t,r=e,a=o;return h.delayed=a.delayed||c.hasAttribute("delayed"),h.receivesFocus=null!=(i=a.receivesFocus)?i:"auto",h.triggerElement=a.virtualTrigger||n,h.type="modal"===r?"modal":"hover"===r?"hint":"auto",h.offset=null!=(s=a.offset)?s:6,h.placement=a.placement,h.willPreventClose=!!a.notImmediatelyClosable,n.insertAdjacentElement("afterend",h),await h.updateComplete,h.open=!0,h.dispose}const u=e;return h.append(c),h.delayed=u.delayed||c.hasAttribute("delayed"),h.receivesFocus=null!=(r=u.receivesFocus)?r:"auto",h.triggerElement=u.trigger||null,h.type=u.type||"modal",h.offset=null!=(a=u.offset)?a:6,h.placement=u.placement,h.willPreventClose=!!u.notImmediatelyClosable,h.updateComplete.then((()=>{h.open=!0})),h}}class A{constructor(t,e){this.x=0,this.y=0,this.x=t,this.y=e}updateBoundingClientRect(t,e){this.x=t,this.y=e,O.update()}getBoundingClientRect(){return{width:0,height:0,top:this.y,right:this.x,y:this.y,x:this.x,bottom:this.y,left:this.x,toJSON(){}}}}function D(t){let e=!1;try{e=t.matches(":popover-open")}catch(t){}let n=!1;try{n=t.matches(":open")}catch(t){}return e||n}const k="showPopover"in document.createElement("div");const R=new class{constructor(){this.root=document.body,this.stack=[],this.handlePointerdown=t=>{this.pointerdownPath=t.composedPath()},this.handlePointerup=()=>{var t;if(!this.stack.length||null==(t=this.pointerdownPath)||!t.length)return;const e=this.pointerdownPath;this.pointerdownPath=void 0;const n=this.stack.filter((t=>!e.find((e=>e===t||e===(null==t?void 0:t.triggerElement)))&&!t.shouldPreventClose()&&"manual"!==t.type));n.reverse(),n.forEach((t=>{this.closeOverlay(t);let e=t.parentOverlayToForceClose;for(;e;)this.closeOverlay(e),e=e.parentOverlayToForceClose}))},this.handleBeforetoggle=t=>{const{target:e,newState:n}=t;"open"!==n&&this.closeOverlay(e)},this.handleKeydown=t=>{if("Escape"!==t.code)return;const e=this.stack.at(-1);"page"!==(null==e?void 0:e.type)?k||this.stack.length&&e&&this.closeOverlay(e):t.preventDefault()},this.bindEvents()}get document(){return this.root.ownerDocument||document}bindEvents(){this.document.addEventListener("pointerdown",this.handlePointerdown),this.document.addEventListener("pointerup",this.handlePointerup),this.document.addEventListener("keydown",this.handleKeydown)}closeOverlay(t){const e=this.stack.indexOf(t);e>-1&&this.stack.splice(e,1),t.open=!1}overlaysByTriggerElement(t){return this.stack.filter((e=>e.triggerElement===t))}add(t){if(this.stack.includes(t)){const e=this.stack.indexOf(t);e>-1&&(this.stack.splice(e,1),this.stack.push(t))}else{if("auto"===t.type||"modal"===t.type||"page"===t.type){const e="sp-overlay-query-path",n=new Event(e,{composed:!0,bubbles:!0});t.addEventListener(e,(t=>{const e=t.composedPath();this.stack.forEach((t=>{!e.find((e=>e===t))&&"manual"!==t.type&&this.closeOverlay(t)}))}),{once:!0}),t.dispatchEvent(n)}else"hint"===t.type&&this.stack.forEach((t=>{"hint"===t.type&&this.closeOverlay(t)}));requestAnimationFrame((()=>{this.stack.push(t),t.addEventListener("beforetoggle",this.handleBeforetoggle,{once:!0})}))}}remove(t){this.closeOverlay(t)}},S=Math.min,F=Math.max,N=Math.round,$=Math.floor,B=t=>({x:t,y:t}),M={left:"right",right:"left",bottom:"top",top:"bottom"},H={start:"end",end:"start"};function W(t,e,n){return F(t,S(e,n))}function j(t,e){return"function"==typeof t?t(e):t}function I(t){return t.split("-")[0]}function V(t){return t.split("-")[1]}function q(t){return"x"===t?"y":"x"}function _(t){return"y"===t?"height":"width"}function U(t){return["top","bottom"].includes(I(t))?"y":"x"}function z(t){return q(U(t))}function K(t){return t.replace(/start|end/g,(t=>H[t]))}function X(t){return t.replace(/left|right|bottom|top/g,(t=>M[t]))}function Y(t){return"number"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}function J(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function Z(t,e,n){let{reference:o,floating:i}=t;const s=U(e),r=z(e),a=_(r),l=I(e),c="y"===s,h=o.x+o.width/2-i.width/2,d=o.y+o.height/2-i.height/2,p=o[a]/2-i[a]/2;let u;switch(l){case"top":u={x:h,y:o.y-i.height};break;case"bottom":u={x:h,y:o.y+o.height};break;case"right":u={x:o.x+o.width,y:d};break;case"left":u={x:o.x-i.width,y:d};break;default:u={x:o.x,y:o.y}}switch(V(e)){case"start":u[r]-=p*(n&&c?-1:1);break;case"end":u[r]+=p*(n&&c?-1:1)}return u}async function G(t,e){var n;void 0===e&&(e={});const{x:o,y:i,platform:s,rects:r,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:h="viewport",elementContext:d="floating",altBoundary:p=!1,padding:u=0}=j(e,t),m=Y(u),g=a[p?"floating"===d?"reference":"floating":d],f=J(await s.getClippingRect({element:null==(n=await(null==s.isElement?void 0:s.isElement(g)))||n?g:g.contextElement||await(null==s.getDocumentElement?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:h,strategy:l})),y="floating"===d?{...r.floating,x:o,y:i}:r.reference,v=await(null==s.getOffsetParent?void 0:s.getOffsetParent(a.floating)),b=await(null==s.isElement?void 0:s.isElement(v))&&await(null==s.getScale?void 0:s.getScale(v))||{x:1,y:1},w=J(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:y,offsetParent:v,strategy:l}):y);return{top:(f.top-w.top+m.top)/b.y,bottom:(w.bottom-f.bottom+m.bottom)/b.y,left:(f.left-w.left+m.left)/b.x,right:(w.right-f.right+m.right)/b.x}}const Q=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:o,placement:i,rects:s,platform:r,elements:a,middlewareData:l}=e,{element:c,padding:h=0}=j(t,e)||{};if(null==c)return{};const d=Y(h),p={x:n,y:o},u=z(i),m=_(u),g=await r.getDimensions(c),f="y"===u,y=f?"top":"left",v=f?"bottom":"right",b=f?"clientHeight":"clientWidth",w=s.reference[m]+s.reference[u]-p[u]-s.floating[m],E=p[u]-s.reference[u],x=await(null==r.getOffsetParent?void 0:r.getOffsetParent(c));let P=x?x[b]:0;P&&await(null==r.isElement?void 0:r.isElement(x))||(P=a.floating[b]||s.floating[m]);const C=w/2-E/2,T=P/2-g[m]/2-1,L=S(d[y],T),O=S(d[v],T),A=L,D=P-g[m]-O,k=P/2-g[m]/2+C,R=W(A,k,D),F=!l.arrow&&null!=V(i)&&k!=R&&s.reference[m]/2-(k<A?L:O)-g[m]/2<0,N=F?k<A?k-A:k-D:0;return{[u]:p[u]+N,data:{[u]:R,centerOffset:k-R-N,...F&&{alignmentOffset:N}},reset:F}}}),tt=function(t){return void 0===t&&(t={}),{name:"flip",options:t,async fn(e){var n,o;const{placement:i,middlewareData:s,rects:r,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:h=!0,crossAxis:d=!0,fallbackPlacements:p,fallbackStrategy:u="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...f}=j(t,e);if(null!=(n=s.arrow)&&n.alignmentOffset)return{};const y=I(i),v=I(a)===a,b=await(null==l.isRTL?void 0:l.isRTL(c.floating)),w=p||(v||!g?[X(a)]:function(t){const e=X(t);return[K(t),e,K(e)]}(a));p||"none"===m||w.push(...function(t,e,n,o){const i=V(t);let s=function(t,e,n){const o=["left","right"],i=["right","left"],s=["top","bottom"],r=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:o:e?o:i;case"left":case"right":return e?s:r;default:return[]}}(I(t),"start"===n,o);return i&&(s=s.map((t=>t+"-"+i)),e&&(s=s.concat(s.map(K)))),s}(a,g,m,b));const E=[a,...w],x=await G(e,f),P=[];let C=(null==(o=s.flip)?void 0:o.overflows)||[];if(h&&P.push(x[y]),d){const t=function(t,e,n){void 0===n&&(n=!1);const o=V(t),i=z(t),s=_(i);let r="x"===i?o===(n?"end":"start")?"right":"left":"start"===o?"bottom":"top";return e.reference[s]>e.floating[s]&&(r=X(r)),[r,X(r)]}(i,r,b);P.push(x[t[0]],x[t[1]])}if(C=[...C,{placement:i,overflows:P}],!P.every((t=>t<=0))){var T,L;const t=((null==(T=s.flip)?void 0:T.index)||0)+1,e=E[t];if(e)return{data:{index:t,overflows:C},reset:{placement:e}};let n=null==(L=C.filter((t=>t.overflows[0]<=0)).sort(((t,e)=>t.overflows[1]-e.overflows[1]))[0])?void 0:L.placement;if(!n)switch(u){case"bestFit":{var O;const t=null==(O=C.map((t=>[t.placement,t.overflows.filter((t=>t>0)).reduce(((t,e)=>t+e),0)])).sort(((t,e)=>t[1]-e[1]))[0])?void 0:O[0];t&&(n=t);break}case"initialPlacement":n=a}if(i!==n)return{reset:{placement:n}}}return{}}}};const et=function(t){return void 0===t&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:o}=e,i=await async function(t,e){const{placement:n,platform:o,elements:i}=t,s=await(null==o.isRTL?void 0:o.isRTL(i.floating)),r=I(n),a=V(n),l="y"===U(n),c=["left","top"].includes(r)?-1:1,h=s&&l?-1:1,d=j(e,t);let{mainAxis:p,crossAxis:u,alignmentAxis:m}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&"number"==typeof m&&(u="end"===a?-1*m:m),l?{x:u*h,y:p*c}:{x:p*c,y:u*h}}(e,t);return{x:n+i.x,y:o+i.y,data:i}}}},nt=function(t){return void 0===t&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:o,platform:i,elements:s}=e,{apply:r=(()=>{}),...a}=j(t,e),l=await G(e,a),c=I(n),h=V(n),d="y"===U(n),{width:p,height:u}=o.floating;let m,g;"top"===c||"bottom"===c?(m=c,g=h===(await(null==i.isRTL?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(g=c,m="end"===h?"top":"bottom");const f=u-l[m],y=p-l[g],v=!e.middlewareData.shift;let b=f,w=y;if(d){const t=p-l.left-l.right;w=h||v?S(y,t):t}else{const t=u-l.top-l.bottom;b=h||v?S(f,t):t}if(v&&!h){const t=F(l.left,0),e=F(l.right,0),n=F(l.top,0),o=F(l.bottom,0);d?w=p-2*(0!==t||0!==e?t+e:F(l.left,l.right)):b=u-2*(0!==n||0!==o?n+o:F(l.top,l.bottom))}await r({...e,availableWidth:w,availableHeight:b});const E=await i.getDimensions(s.floating);return p!==E.width||u!==E.height?{reset:{rects:!0}}:{}}}};function ot(t){return rt(t)?(t.nodeName||"").toLowerCase():"#document"}function it(t){var e;return(null==t||null==(e=t.ownerDocument)?void 0:e.defaultView)||window}function st(t){var e;return null==(e=(rt(t)?t.ownerDocument:t.document)||window.document)?void 0:e.documentElement}function rt(t){return t instanceof Node||t instanceof it(t).Node}function at(t){return t instanceof Element||t instanceof it(t).Element}function lt(t){return t instanceof HTMLElement||t instanceof it(t).HTMLElement}function ct(t){return"undefined"!=typeof ShadowRoot&&(t instanceof ShadowRoot||t instanceof it(t).ShadowRoot)}function ht(t){const{overflow:e,overflowX:n,overflowY:o,display:i}=ft(t);return/auto|scroll|overlay|hidden|clip/.test(e+o+n)&&!["inline","contents"].includes(i)}function dt(t){return["table","td","th"].includes(ot(t))}function pt(t){const e=mt(),n=ft(t);return"none"!==n.transform||"none"!==n.perspective||!!n.containerType&&"normal"!==n.containerType||!e&&!!n.backdropFilter&&"none"!==n.backdropFilter||!e&&!!n.filter&&"none"!==n.filter||["transform","perspective","filter"].some((t=>(n.willChange||"").includes(t)))||["paint","layout","strict","content"].some((t=>(n.contain||"").includes(t)))}function ut(t){let e=vt(t);for(;lt(e)&&!gt(e);){if(pt(e))return e;e=vt(e)}return null}function mt(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function gt(t){return["html","body","#document"].includes(ot(t))}function ft(t){return it(t).getComputedStyle(t)}function yt(t){return at(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function vt(t){if("html"===ot(t))return t;const e=t.assignedSlot||t.parentNode||ct(t)&&t.host||st(t);return ct(e)?e.host:e}function bt(t){const e=vt(t);return gt(e)?t.ownerDocument?t.ownerDocument.body:t.body:lt(e)&&ht(e)?e:bt(e)}function wt(t,e,n){var o;void 0===e&&(e=[]),void 0===n&&(n=!0);const i=bt(t),s=i===(null==(o=t.ownerDocument)?void 0:o.body),r=it(i);return s?e.concat(r,r.visualViewport||[],ht(i)?i:[],r.frameElement&&n?wt(r.frameElement):[]):e.concat(i,wt(i,[],n))}function Et(t){const e=ft(t);let n=parseFloat(e.width)||0,o=parseFloat(e.height)||0;const i=lt(t),s=i?t.offsetWidth:n,r=i?t.offsetHeight:o,a=N(n)!==s||N(o)!==r;return a&&(n=s,o=r),{width:n,height:o,$:a}}function xt(t){return at(t)?t:t.contextElement}function Pt(t){const e=xt(t);if(!lt(e))return B(1);const n=e.getBoundingClientRect(),{width:o,height:i,$:s}=Et(e);let r=(s?N(n.width):n.width)/o,a=(s?N(n.height):n.height)/i;return r&&Number.isFinite(r)||(r=1),a&&Number.isFinite(a)||(a=1),{x:r,y:a}}const Ct=B(0);function Tt(t){const e=it(t);return mt()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:Ct}function Lt(t,e,n,o){void 0===e&&(e=!1),void 0===n&&(n=!1);const i=t.getBoundingClientRect(),s=xt(t);let r=B(1);e&&(o?at(o)&&(r=Pt(o)):r=Pt(t));const a=function(t,e,n){return void 0===e&&(e=!1),!(!n||e&&n!==it(t))&&e}(s,n,o)?Tt(s):B(0);let l=(i.left+a.x)/r.x,c=(i.top+a.y)/r.y,h=i.width/r.x,d=i.height/r.y;if(s){const t=it(s),e=o&&at(o)?it(o):o;let n=t.frameElement;for(;n&&o&&e!==t;){const t=Pt(n),e=n.getBoundingClientRect(),o=ft(n),i=e.left+(n.clientLeft+parseFloat(o.paddingLeft))*t.x,s=e.top+(n.clientTop+parseFloat(o.paddingTop))*t.y;l*=t.x,c*=t.y,h*=t.x,d*=t.y,l+=i,c+=s,n=it(n).frameElement}}return J({width:h,height:d,x:l,y:c})}function Ot(t){return Lt(st(t)).left+yt(t).scrollLeft}function At(t,e,n){let o;if("viewport"===e)o=function(t,e){const n=it(t),o=st(t),i=n.visualViewport;let s=o.clientWidth,r=o.clientHeight,a=0,l=0;if(i){s=i.width,r=i.height;const t=mt();(!t||t&&"fixed"===e)&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:r,x:a,y:l}}(t,n);else if("document"===e)o=function(t){const e=st(t),n=yt(t),o=t.ownerDocument.body,i=F(e.scrollWidth,e.clientWidth,o.scrollWidth,o.clientWidth),s=F(e.scrollHeight,e.clientHeight,o.scrollHeight,o.clientHeight);let r=-n.scrollLeft+Ot(t);const a=-n.scrollTop;return"rtl"===ft(o).direction&&(r+=F(e.clientWidth,o.clientWidth)-i),{width:i,height:s,x:r,y:a}}(st(t));else if(at(e))o=function(t,e){const n=Lt(t,!0,"fixed"===e),o=n.top+t.clientTop,i=n.left+t.clientLeft,s=lt(t)?Pt(t):B(1);return{width:t.clientWidth*s.x,height:t.clientHeight*s.y,x:i*s.x,y:o*s.y}}(e,n);else{const n=Tt(t);o={...e,x:e.x-n.x,y:e.y-n.y}}return J(o)}function Dt(t,e){const n=vt(t);return!(n===e||!at(n)||gt(n))&&("fixed"===ft(n).position||Dt(n,e))}function kt(t,e,n){const o=lt(e),i=st(e),s="fixed"===n,r=Lt(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=B(0);if(o||!o&&!s)if(("body"!==ot(e)||ht(i))&&(a=yt(e)),o){const t=Lt(e,!0,s,e);l.x=t.x+e.clientLeft,l.y=t.y+e.clientTop}else i&&(l.x=Ot(i));return{x:r.left+a.scrollLeft-l.x,y:r.top+a.scrollTop-l.y,width:r.width,height:r.height}}function Rt(t,e){return lt(t)&&"fixed"!==ft(t).position?e?e(t):t.offsetParent:null}function St(t,e){const n=it(t);if(!lt(t))return n;let o=Rt(t,e);for(;o&&dt(o)&&"static"===ft(o).position;)o=Rt(o,e);return o&&("html"===ot(o)||"body"===ot(o)&&"static"===ft(o).position&&!pt(o))?n:o||ut(t)||n}const Ft={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:n,strategy:o}=t;const i=lt(n),s=st(n);if(n===s)return e;let r={scrollLeft:0,scrollTop:0},a=B(1);const l=B(0);if((i||!i&&"fixed"!==o)&&(("body"!==ot(n)||ht(s))&&(r=yt(n)),lt(n))){const t=Lt(n);a=Pt(n),l.x=t.x+n.clientLeft,l.y=t.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-r.scrollLeft*a.x+l.x,y:e.y*a.y-r.scrollTop*a.y+l.y}},getDocumentElement:st,getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:o,strategy:i}=t;const s=[..."clippingAncestors"===n?function(t,e){const n=e.get(t);if(n)return n;let o=wt(t,[],!1).filter((t=>at(t)&&"body"!==ot(t))),i=null;const s="fixed"===ft(t).position;let r=s?vt(t):t;for(;at(r)&&!gt(r);){const e=ft(r),n=pt(r);n||"fixed"!==e.position||(i=null),(s?!n&&!i:!n&&"static"===e.position&&i&&["absolute","fixed"].includes(i.position)||ht(r)&&!n&&Dt(t,r))?o=o.filter((t=>t!==r)):i=e,r=vt(r)}return e.set(t,o),o}(e,this._c):[].concat(n),o],r=s[0],a=s.reduce(((t,n)=>{const o=At(e,n,i);return t.top=F(o.top,t.top),t.right=S(o.right,t.right),t.bottom=S(o.bottom,t.bottom),t.left=F(o.left,t.left),t}),At(e,r,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:St,getElementRects:async function(t){let{reference:e,floating:n,strategy:o}=t;const i=this.getOffsetParent||St,s=this.getDimensions;return{reference:kt(e,await i(n),o),floating:{x:0,y:0,...await s(n)}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){return Et(t)},getScale:Pt,isElement:at,isRTL:function(t){return"rtl"===ft(t).direction}};function Nt(t,e,n,o){void 0===o&&(o={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:r="function"==typeof ResizeObserver,layoutShift:a="function"==typeof IntersectionObserver,animationFrame:l=!1}=o,c=xt(t),h=i||s?[...c?wt(c):[],...wt(e)]:[];h.forEach((t=>{i&&t.addEventListener("scroll",n,{passive:!0}),s&&t.addEventListener("resize",n)}));const d=c&&a?function(t,e){let n,o=null;const i=st(t);function s(){clearTimeout(n),o&&o.disconnect(),o=null}return function r(a,l){void 0===a&&(a=!1),void 0===l&&(l=1),s();const{left:c,top:h,width:d,height:p}=t.getBoundingClientRect();if(a||e(),!d||!p)return;const u={rootMargin:-$(h)+"px "+-$(i.clientWidth-(c+d))+"px "+-$(i.clientHeight-(h+p))+"px "+-$(c)+"px",threshold:F(0,S(1,l))||1};let m=!0;function g(t){const e=t[0].intersectionRatio;if(e!==l){if(!m)return r();e?r(!1,e):n=setTimeout((()=>{r(!1,1e-7)}),100)}m=!1}try{o=new IntersectionObserver(g,{...u,root:i.ownerDocument})}catch(t){o=new IntersectionObserver(g,u)}o.observe(t)}(!0),s}(c,n):null;let p,u=-1,m=null;r&&(m=new ResizeObserver((t=>{let[o]=t;o&&o.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(u),u=requestAnimationFrame((()=>{m&&m.observe(e)}))),n()})),c&&!l&&m.observe(c),m.observe(e));let g=l?Lt(t):null;return l&&function e(){const o=Lt(t);!g||o.x===g.x&&o.y===g.y&&o.width===g.width&&o.height===g.height||n();g=o,p=requestAnimationFrame(e)}(),n(),()=>{h.forEach((t=>{i&&t.removeEventListener("scroll",n),s&&t.removeEventListener("resize",n)})),d&&d(),m&&m.disconnect(),m=null,l&&cancelAnimationFrame(p)}}const $t=(t,e,n)=>{const o=new Map,i={platform:Ft,...n},s={...i.platform,_c:o};return(async(t,e,n)=>{const{placement:o="bottom",strategy:i="absolute",middleware:s=[],platform:r}=n,a=s.filter(Boolean),l=await(null==r.isRTL?void 0:r.isRTL(e));let c=await r.getElementRects({reference:t,floating:e,strategy:i}),{x:h,y:d}=Z(c,o,l),p=o,u={},m=0;for(let n=0;n<a.length;n++){const{name:s,fn:g}=a[n],{x:f,y:y,data:v,reset:b}=await g({x:h,y:d,initialPlacement:o,placement:p,strategy:i,middlewareData:u,rects:c,platform:r,elements:{reference:t,floating:e}});h=null!=f?f:h,d=null!=y?y:d,u={...u,[s]:{...u[s],...v}},b&&m<=50&&(m++,"object"==typeof b&&(b.placement&&(p=b.placement),b.rects&&(c=!0===b.rects?await r.getElementRects({reference:t,floating:e,strategy:i}):b.rects),({x:h,y:d}=Z(c,p,l))),n=-1)}return{x:h,y:d,placement:p,strategy:i,middlewareData:u}})(t,e,{...i,platform:s})};function Bt(t){if(void 0===t)return 0;const e=window.devicePixelRatio||1;return Math.round(t*e)/e}const Mt=t=>{var e;return null!=(e={left:["right","bottom","top"],"left-start":["right-start","bottom","top"],"left-end":["right-end","bottom","top"],right:["left","bottom","top"],"right-start":["left-start","bottom","top"],"right-end":["left-end","bottom","top"],top:["bottom","left","right"],"top-start":["bottom-start","left","right"],"top-end":["bottom-end","left","right"],bottom:["top","left","right"],"bottom-start":["top-start","left","right"],"bottom-end":["top-end","left","right"]}[t])?e:[t]};class Ht{constructor(t){this.originalPlacements=new WeakMap,this.allowPlacementUpdate=!1,this.updatePlacement=()=>{this.allowPlacementUpdate||"modal"===this.options.type||!this.cleanup?(this.computePlacement(),this.allowPlacementUpdate=!1):this.target.dispatchEvent(new Event("close",{bubbles:!0}))},this.resetOverlayPosition=()=>{!this.target||!this.options||(this.target.style.removeProperty("max-height"),this.target.style.removeProperty("height"),this.initialHeight=void 0,this.isConstrained=!1,this.host.offsetHeight,this.computePlacement())},this.host=t,this.host.addController(this)}async placeOverlay(t=this.target,e=this.options){if(this.target=t,this.options=e,!t||!e)return;const n=Nt(e.trigger,t,this.updatePlacement,{elementResize:!1,layoutShift:!1});this.cleanup=()=>{var t;null==(t=this.host.elements)||t.forEach((t=>{t.addEventListener("sp-closed",(()=>{const e=this.originalPlacements.get(t);e&&t.setAttribute("placement",e),this.originalPlacements.delete(t)}),{once:!0})})),n()}}async computePlacement(){var t,e;const{options:n,target:o}=this;await(document.fonts?document.fonts.ready:Promise.resolve());const i=n.trigger instanceof HTMLElement?tt():tt({padding:8,fallbackPlacements:Mt(n.placement)}),[s=0,r=0]=Array.isArray(null==n?void 0:n.offset)?n.offset:[n.offset,0],a=null==(t=this.host.elements.find((t=>t.tipElement)))?void 0:t.tipElement,l=[et({mainAxis:s,crossAxis:r}),(u={padding:8},void 0===u&&(u={}),{name:"shift",options:u,async fn(t){const{x:e,y:n,placement:o}=t,{mainAxis:i=!0,crossAxis:s=!1,limiter:r={fn:t=>{let{x:e,y:n}=t;return{x:e,y:n}}},...a}=j(u,t),l={x:e,y:n},c=await G(t,a),h=U(I(o)),d=q(h);let p=l[d],m=l[h];if(i){const t="y"===d?"bottom":"right";p=W(p+c["y"===d?"top":"left"],p,p-c[t])}if(s){const t="y"===h?"bottom":"right";m=W(m+c["y"===h?"top":"left"],m,m-c[t])}const g=r.fn({...t,[d]:p,[h]:m});return{...g,data:{x:g.x-e,y:g.y-n}}}}),i,nt({padding:8,apply:({availableWidth:t,availableHeight:e,rects:{floating:n}})=>{const i=Math.max(100,Math.floor(e)),s=n.height;this.initialHeight=this.isConstrained&&this.initialHeight||s,this.isConstrained=s<this.initialHeight||i<=s;const r=this.isConstrained?`${i}px`:"";Object.assign(o.style,{maxWidth:`${Math.floor(t)}px`,maxHeight:r,height:r})}}),...a?[Q({element:a,padding:n.tipPadding||8})]:[],{name:"topLayer",async fn(t){const{x:e,y:n,elements:{reference:o,floating:i}}=t;let s=!1,r=!1,a=!1;const l={x:0,y:0};try{s=s||i.matches(":popover-open")}catch(t){}try{s=s||i.matches(":open")}catch(t){}try{s=s||i.matches(":modal")}catch(t){}r=s;const c=new Event("floating-ui-dialog-test",{composed:!0,bubbles:!0});i.addEventListener("floating-ui-dialog-test",(t=>{t.composedPath().forEach((t=>{if(a=a||t===o,t!==i&&"dialog"===t.localName)try{s=s||t.matches(":modal")}catch(t){}}))}),{once:!0}),i.dispatchEvent(c);let h=!1;if(!(o instanceof A)){const t=a?o:i,e=pt(t)?t:ut(t);let n={};if(null!==e&&it(e)!==e&&(n=getComputedStyle(e),h="none"!==n.transform||"none"!==n.translate||!!n.backdropFilter&&"none"!==n.backdropFilter||!!n.filter&&"none"!==n.filter||n.willChange.search("transform")>-1||n.willChange.search("translate")>-1||["paint","layout","strict","content"].some((t=>(n.contain||"").includes(t)))),s&&h&&e){const t=e.getBoundingClientRect(),{marginInlineStart:o="0",marginBlockStart:i="0"}=n;l.x=t.x+parseFloat(o),l.y=t.y+parseFloat(i)}}return s&&r?{x:e+l.x,y:n+l.y,data:l}:s?{x:e,y:n,data:l}:{x:e-l.x,y:n-l.y,data:l}}}],{x:c,y:h,placement:d,middlewareData:p}=await $t(n.trigger,o,{placement:n.placement,middleware:l,strategy:"fixed"});var u;if(Object.assign(o.style,{top:"0px",left:"0px",translate:`${Bt(c)}px ${Bt(h)}px`}),o.setAttribute("actual-placement",d),null==(e=this.host.elements)||e.forEach((t=>{this.originalPlacements.set(t,t.getAttribute("placement")),t.setAttribute("placement",d)})),a&&p.arrow){const{x:t,y:e}=p.arrow;Object.assign(a.style,{top:d.startsWith("right")||d.startsWith("left")?"0px":"",left:d.startsWith("bottom")||d.startsWith("top")?"0px":"",translate:`${Bt(t)}px ${Bt(e)}px`})}}hostConnected(){document.addEventListener("sp-update-overlays",this.resetOverlayPosition)}hostUpdated(){var t;this.host.open||(null==(t=this.cleanup)||t.call(this),this.cleanup=void 0)}hostDisconnected(){var t;null==(t=this.cleanup)||t.call(this),this.cleanup=void 0,document.removeEventListener("sp-update-overlays",this.resetOverlayPosition)}}var Wt=d`
:host{--swc-overlay-animation-distance:var(
--spectrum-picker-m-texticon-popover-offset-y,var(--spectrum-global-dimension-size-75)
);display:contents;pointer-events:none}.dialog{--sp-overlay-open:true;background:none;border:0;box-sizing:border-box;display:flex;height:auto;inset:auto;left:0;margin:0;max-height:calc(100vh - 16px);max-height:calc(100dvh - 16px);max-width:calc(100vw - 16px);opacity:1!important;overflow:visible;padding:0;position:fixed;top:0}.dialog:not([is-visible]){translate:-999em -999em!important}.dialog:focus{outline:none}dialog:modal{--mod-popover-filter:var(--spectrum-popover-filter)}:host(:not([open])) .dialog{--sp-overlay-open:false}.dialog::backdrop{display:none}.dialog:before{content:"";inset:-999em;pointer-events:auto!important;position:absolute}.dialog:not(.not-immediately-closable):before{display:none}.dialog>div{width:100%}::slotted(*){pointer-events:auto}::slotted(sp-popover){position:static}::slotted(sp-tooltip){--swc-tooltip-margin:0}.dialog:not([actual-placement])[placement*=top]{margin-top:var(--swc-overlay-animation-distance);padding-block:var(--swc-overlay-animation-distance)}.dialog:not([actual-placement])[placement*=right]{margin-left:calc(var(--swc-overlay-animation-distance)*-1);padding-inline:var(--swc-overlay-animation-distance)}.dialog:not([actual-placement])[placement*=bottom]{margin-top:calc(var(--swc-overlay-animation-distance)*-1);padding-block:var(--swc-overlay-animation-distance)}.dialog:not([actual-placement])[placement*=left]{margin-left:var(--swc-overlay-animation-distance);padding-inline:var(--swc-overlay-animation-distance)}.dialog[actual-placement*=top]{margin-top:var(--swc-overlay-animation-distance);padding-block:var(--swc-overlay-animation-distance)}.dialog[actual-placement*=right]{margin-left:calc(var(--swc-overlay-animation-distance)*-1);padding-inline:var(--swc-overlay-animation-distance)}.dialog[actual-placement*=bottom]{margin-top:calc(var(--swc-overlay-animation-distance)*-1);padding-block:var(--swc-overlay-animation-distance)}.dialog[actual-placement*=left]{margin-left:var(--swc-overlay-animation-distance);padding-inline:var(--swc-overlay-animation-distance)}slot[name=longpress-describedby-descriptor]{display:none}@supports selector(:open){.dialog{opacity:0}.dialog:open{--mod-popover-filter:var(--spectrum-popover-filter);opacity:1}}@supports selector(:popover-open){.dialog{opacity:0}.dialog:popover-open{--mod-popover-filter:var(--spectrum-popover-filter);opacity:1}}@supports (not selector(:open)) and (not selector(:popover-open)){:host:not([open]) .dialog{pointer-events:none}.dialog[actual-placement]{z-index:calc(var(--swc-overlay-z-index-base, 1000) + var(--swc-overlay-open-count))}}
`,jt=Object.defineProperty,It=Object.getOwnPropertyDescriptor,Vt=(t,e,n,o)=>{for(var i,s=o>1?void 0:o?It(e,n):e,r=t.length-1;r>=0;r--)(i=t[r])&&(s=(o?i(e,n,s):i(s))||s);return o&&s&&jt(e,n,s),s};const qt={touch:"Double tap and long press for additional options",keyboard:"Press Space or Alt+Down Arrow for additional options",mouse:"Click and hold for additional options"},_t="showPopover"in document.createElement("div");let Ut=function(t){return class extends t{async manageDialogOpen(){const t=this.open;if(await this.managePosition(),this.open!==t||this.open!==t)return;const e=await this.dialogMakeTransition(t);this.open===t&&await this.dialogApplyFocus(t,e)}async dialogMakeTransition(t){let e=null;const n=(n,o)=>async()=>{if(void 0!==n.open&&(n.open=t),!t){const t=()=>{n.removeEventListener("close",t)};n.addEventListener("close",t)}if(o>0)return;const i=t?C:P;this.dispatchEvent(new i),t&&(n.matches(h)&&(e=n),e=e||l(n),e||n.querySelectorAll("slot").forEach((t=>{e||(e=c(t))})),this.isConnected&&!this.dialogEl.open&&this.dialogEl.showModal())},o=(e,n)=>()=>{if(this.open!==t)return;const o=t?"sp-opened":"sp-closed";if(n>0)return void e.dispatchEvent(new CustomEvent(o,{bubbles:!1,composed:!1,detail:{interaction:this.type}}));if(!this.isConnected||t!==this.open)return;const i=()=>{const n=this.triggerElement instanceof A;this.dispatchEvent(new Event(o,{bubbles:n,composed:n})),e.dispatchEvent(new Event(o,{bubbles:!1,composed:!1})),this.triggerElement&&!n&&this.triggerElement.dispatchEvent(new CustomEvent(o,{bubbles:!0,composed:!0,detail:{interaction:this.type}})),this.state=t?"opened":"closed"};!t&&this.dialogEl.open?(this.dialogEl.addEventListener("close",(()=>{i()}),{once:!0}),this.dialogEl.close()):i()};return this.elements.forEach(((t,e)=>{T(t,n(t,e),o(t,e))})),e}async dialogApplyFocus(t,e){this.applyFocus(t,e)}}}(O);Ut=_t?function(t){return class extends t{async manageDelay(t){!1!==t&&t===this.open?this.delayed&&await E.openTimer(this)&&(this.open=!t):E.close(this)}async shouldHidePopover(t){if(t&&this.open!==t)return;const e=async({newState:t}={})=>{"open"!==t&&await this.placementController.resetOverlayPosition()};D(this.dialogEl)?this.dialogEl.addEventListener("toggle",e,{once:!0}):e()}async shouldShowPopover(t){let e=!1;try{e=this.dialogEl.matches(":popover-open")}catch(t){}let n=!1;try{n=this.dialogEl.matches(":open")}catch(t){}t&&this.open===t&&!e&&!n&&this.isConnected&&(this.dialogEl.showPopover(),await this.managePosition())}async ensureOnDOM(t){await L(),await this.shouldHidePopover(t),await this.shouldShowPopover(t),await L()}async makeTransition(t){if(this.open!==t)return null;let e=null;const n=(n,o)=>()=>{if(void 0!==n.open&&(n.open=t),0===o){const e=t?C:P;this.dispatchEvent(new e)}t&&(n.matches(h)&&(e=n),e=e||l(n),!e)&&n.querySelectorAll("slot").forEach((t=>{e||(e=c(t))}))},o=(e,n)=>async()=>{if(this.open!==t)return;const o=t?"sp-opened":"sp-closed";if(n>0)return void e.dispatchEvent(new CustomEvent(o,{bubbles:!1,composed:!1,detail:{interaction:this.type}}));const i=async()=>{if(this.open!==t)return;await L();const n=this.triggerElement instanceof A;this.dispatchEvent(new Event(o,{bubbles:n,composed:n})),e.dispatchEvent(new CustomEvent(o,{bubbles:!1,composed:!1,detail:{interaction:this.type}})),this.triggerElement&&!n&&this.triggerElement.dispatchEvent(new CustomEvent(o,{bubbles:!0,composed:!0,detail:{interaction:this.type}})),this.state=t?"opened":"closed"};if(this.open!==t)return;const s=D(this.dialogEl);!0!==t&&s&&this.isConnected?(this.dialogEl.addEventListener("beforetoggle",(()=>{i()}),{once:!0}),this.dialogEl.hidePopover()):i()};return this.elements.forEach(((t,e)=>{T(t,n(t,e),o(t,e))})),e}}}(Ut):function(t){return class extends t{async managePopoverOpen(){await this.managePosition()}async manageDelay(t){!1!==t&&t===this.open?this.delayed&&await E.openTimer(this)&&(this.open=!t):E.close(this)}async ensureOnDOM(t){document.body.offsetHeight}async makeTransition(t){if(this.open!==t)return null;let e=null;const n=(n,o)=>()=>{if(t===this.open){if(void 0!==n.open&&(n.open=t),0===o){const e=t?C:P;this.dispatchEvent(new e)}!0!==t||(n.matches(h)&&(e=n),e=e||l(n),e)||n.querySelectorAll("slot").forEach((t=>{e||(e=c(t))}))}},o=(e,n)=>()=>{if(this.open!==t)return;const o=t?"sp-opened":"sp-closed";if(e.dispatchEvent(new CustomEvent(o,{bubbles:!1,composed:!1,detail:{interaction:this.type}})),n>0)return;const i=this.triggerElement instanceof A;this.dispatchEvent(new Event(o,{bubbles:i,composed:i})),this.triggerElement&&!i&&this.triggerElement.dispatchEvent(new CustomEvent(o,{bubbles:!0,composed:!0,detail:{interaction:this.type}})),this.state=t?"opened":"closed"};return this.elements.forEach(((t,e)=>{T(t,n(t,e),o(t,e))})),e}}}(Ut);const zt=class t extends Ut{constructor(){super(...arguments),this._delayed=!1,this._disabled=!1,this.longpressState="null",this.offset=6,this.placementController=new Ht(this),this._open=!1,this.receivesFocus="auto",this.releaseAriaDescribedby=x,this.releaseLongpressDescribedby=x,this._state="closed",this.triggerElement=null,this.type="auto",this.wasOpen=!1,this.elementResolver=new i(this),this.closeOnFocusOut=t=>{if(!t.relatedTarget)return;const e=new Event("overlay-relation-query",{bubbles:!0,composed:!0});t.relatedTarget.addEventListener(e.type,(t=>{t.composedPath().includes(this)||(this.open=!1)})),t.relatedTarget.dispatchEvent(e)},this.elementIds=[],this.handlePointerdown=t=>{if(!this.triggerElement||0!==t.button)return;const e=this.triggerElement;this.longpressState="potential",document.addEventListener("pointerup",this.handlePointerup),document.addEventListener("pointercancel",this.handlePointerup),!e.holdAffordance&&(this.longressTimeout=setTimeout((()=>{e&&e.dispatchEvent(new CustomEvent("longpress",{bubbles:!0,composed:!0,detail:{source:"pointer"}}))}),300))},this.handlePointerup=()=>{clearTimeout(this.longressTimeout),this.triggerElement&&(this.longpressState="opening"===this.state?"pressed":"null",document.removeEventListener("pointerup",this.handlePointerup),document.removeEventListener("pointercancel",this.handlePointerup))},this.handleKeydown=t=>{const{code:e,altKey:n}=t;("Space"===e||n&&"ArrowDown"===e)&&"ArrowDown"===e&&(t.stopPropagation(),t.stopImmediatePropagation())},this.handleKeyup=t=>{const{code:e,altKey:n}=t;if("Space"===e||n&&"ArrowDown"===e){if(!this.triggerElement||!this.hasNonVirtualTrigger)return;t.stopPropagation(),this.triggerElement.dispatchEvent(new CustomEvent("longpress",{bubbles:!0,composed:!0,detail:{source:"keyboard"}})),setTimeout((()=>{this.longpressState="null"}))}},this.preventNextToggle=!1,this.handlePointerdownForClick=()=>{this.preventNextToggle=this.open},this.handleClick=()=>{"opening"===this.longpressState||"pressed"===this.longpressState||(this.preventNextToggle||(this.open=!this.open),this.preventNextToggle=!1)},this.focusedin=!1,this.handleFocusin=()=>{this.open=!0,this.focusedin=!0},this.handleFocusout=()=>{this.focusedin=!1,!this.pointerentered&&(this.open=!1)},this.pointerentered=!1,this.handlePointerenter=()=>{this.hoverTimeout&&(clearTimeout(this.hoverTimeout),delete this.hoverTimeout),!this.disabled&&(this.open=!0,this.pointerentered=!0)},this.handleOverlayPointerenter=()=>{this.hoverTimeout&&(clearTimeout(this.hoverTimeout),delete this.hoverTimeout)},this.handlePointerleave=()=>{this.doPointerleave()},this.handleOverlayPointerleave=()=>{this.doPointerleave()},this.handleLongpress=()=>{this.open=!0,this.longpressState="potential"===this.longpressState?"opening":"pressed"}}get delayed(){var t;return(null==(t=this.elements.at(-1))?void 0:t.hasAttribute("delayed"))||this._delayed}set delayed(t){this._delayed=t}get disabled(){return this._disabled}set disabled(t){this._disabled=t,t?(this.hasNonVirtualTrigger&&this.unbindEvents(),this.wasOpen=this.open,this.open=!1):(this.bindEvents(),this.open=this.open||this.wasOpen,this.wasOpen=!1)}get hasNonVirtualTrigger(){return!(!this.triggerElement||this.triggerElement instanceof A)}get open(){return this._open}set open(e){e&&this.disabled||e!==this.open&&(("opening"===this.longpressState||"pressed"===this.longpressState)&&!e||(this._open=e,this.open&&(t.openCount+=1),this.requestUpdate("open",!this.open)))}get state(){return this._state}set state(t){if(t===this.state)return;const e=this.state;this._state=t,("opened"===this.state||"closed"===this.state)&&(this.longpressState="pressed"===this.longpressState?"null":this.longpressState),this.requestUpdate("state",e)}get usesDialog(){return"modal"===this.type||"page"===this.type}get popoverValue(){if("popover"in this)switch(this.type){case"modal":case"page":return;case"hint":return"manual";default:return this.type}}get requiresPosition(){return!("page"===this.type||!this.open||!this.triggerElement||!this.placement&&"hint"!==this.type)}managePosition(){if(!this.requiresPosition||!this.open)return;const t=this.offset||0,e=this.triggerElement,n=this.placement||"right",o=this.tipPadding;this.placementController.placeOverlay(this.dialogEl,{offset:t,placement:n,tipPadding:o,trigger:e,type:this.type})}async managePopoverOpen(){super.managePopoverOpen();const t=this.open;if(this.open!==t||(await this.manageDelay(t),this.open!==t)||(await this.ensureOnDOM(t),this.open!==t))return;const e=await this.makeTransition(t);this.open===t&&await this.applyFocus(t,e)}async applyFocus(t,e){if("false"!==this.receivesFocus&&"hint"!==this.type){if(await L(),await L(),t===this.open&&!this.open)return void(this.hasNonVirtualTrigger&&this.contains(this.getRootNode().activeElement)&&this.triggerElement.focus());null==e||e.focus()}}async manageOpen(t){var e;if(this.isConnected||!this.open){if(this.hasUpdated||await this.updateComplete,this.open?(R.add(this),this.willPreventClose&&(document.addEventListener("pointerup",(()=>{this.dialogEl.classList.toggle("not-immediately-closable",!1),this.willPreventClose=!1}),{once:!0}),this.dialogEl.classList.toggle("not-immediately-closable",!0))):(t&&this.dispose(),R.remove(this)),this.open&&"opened"!==this.state?this.state="opening":!this.open&&"closed"!==this.state&&(this.state="closing"),this.usesDialog?this.manageDialogOpen():this.managePopoverOpen(),"auto"===this.type){const t=this.getRootNode();this.open?t.addEventListener("focusout",this.closeOnFocusOut,{capture:!0}):t.removeEventListener("focusout",this.closeOnFocusOut,{capture:!0})}if(!this.open&&"hint"!==this.type){const t=()=>{var t;const e=[];let n=document.activeElement;for(;null!=n&&n.shadowRoot&&n.shadowRoot.activeElement;)n=n.shadowRoot.activeElement;for(;n;){const o=n.assignedSlot||n.parentElement||(null==(t=n.getRootNode())?void 0:t.host);o&&e.push(o),n=o}return e};null!=(e=this.triggerElement)&&e.focus&&(this.contains(this.getRootNode().activeElement)||t().includes(this))&&this.triggerElement.focus()}}}unbindEvents(){var t;null==(t=this.abortController)||t.abort()}bindEvents(){if(!this.hasNonVirtualTrigger)return;this.abortController=new AbortController;const t=this.triggerElement;switch(this.triggerInteraction){case"click":return void this.bindClickEvents(t);case"longpress":return void this.bindLongpressEvents(t);case"hover":return void this.bindHoverEvents(t)}}bindClickEvents(t){const e={signal:this.abortController.signal};t.addEventListener("click",this.handleClick,e),t.addEventListener("pointerdown",this.handlePointerdownForClick,e)}bindLongpressEvents(t){const e={signal:this.abortController.signal};t.addEventListener("longpress",this.handleLongpress,e),t.addEventListener("pointerdown",this.handlePointerdown,e),this.prepareLongpressDescription(t),!t.holdAffordance&&(t.addEventListener("keydown",this.handleKeydown,e),t.addEventListener("keyup",this.handleKeyup,e))}bindHoverEvents(t){const e={signal:this.abortController.signal};t.addEventListener("focusin",this.handleFocusin,e),t.addEventListener("focusout",this.handleFocusout,e),t.addEventListener("pointerenter",this.handlePointerenter,e),t.addEventListener("pointerleave",this.handlePointerleave,e),this.addEventListener("pointerenter",this.handleOverlayPointerenter,e),this.addEventListener("pointerleave",this.handleOverlayPointerleave,e)}manageTriggerElement(t){t&&(this.unbindEvents(),this.releaseAriaDescribedby()),this.triggerElement&&!(this.triggerElement instanceof A)&&(this.bindEvents(),"true"!==this.receivesFocus&&this.prepareAriaDescribedby())}prepareLongpressDescription(t){if("longpress"!==this.triggerInteraction||this.releaseLongpressDescribedby!==x||!this.elements.length)return;const e=document.createElement("div");e.id=`longpress-describedby-descriptor-${crypto.randomUUID().slice(0,8)}`;const n=b()||w()?"touch":"keyboard";e.textContent=qt[n],e.slot="longpress-describedby-descriptor";const o=t.getRootNode();o===this.getRootNode()?this.append(e):(e.hidden=!("host"in o),t.insertAdjacentElement("afterend",e));const i=a(t,"aria-describedby",[e.id]);this.releaseLongpressDescribedby=()=>{i(),e.remove(),this.releaseLongpressDescribedby=x}}prepareAriaDescribedby(){if("hover"!==this.triggerInteraction||this.releaseAriaDescribedby!==x||!this.elements.length||!this.hasNonVirtualTrigger)return;const t=this.triggerElement,e=t.getRootNode(),n=this.elements[0].getRootNode();if(e==this.getRootNode()){const e=a(t,"aria-describedby",[this.id]);this.releaseAriaDescribedby=()=>{e(),this.releaseAriaDescribedby=x}}else if(e===n){this.elementIds=this.elements.map((t=>t.id));const e=this.elements.map((t=>(t.id||(t.id=`${this.tagName.toLowerCase()}-helper-${crypto.randomUUID().slice(0,8)}`),t.id))),n=a(t,"aria-describedby",e);this.releaseAriaDescribedby=()=>{n(),this.elements.map(((t,e)=>{t.id=this.elementIds[e]})),this.releaseAriaDescribedby=x}}}doPointerleave(){this.pointerentered=!1;const t=this.triggerElement;this.focusedin&&t.matches(":focus-visible")||(this.hoverTimeout=setTimeout((()=>{this.open=!1}),300))}handleBeforetoggle(t){"open"!==t.newState&&this.handleBrowserClose()}handleBrowserClose(){"opening"===this.longpressState||"pressed"===this.longpressState?this.manuallyKeepOpen():this.open=!1}manuallyKeepOpen(){super.manuallyKeepOpen(),this.open=!0,this.placementController.allowPlacementUpdate=!0,this.manageOpen(!1)}handleSlotchange(){this.triggerElement&&this.prepareAriaDescribedby(),this.elements.length?this.hasNonVirtualTrigger&&this.prepareLongpressDescription(this.triggerElement):this.releaseLongpressDescribedby()}shouldPreventClose(){const t=this.willPreventClose;return this.willPreventClose=!1,t}willUpdate(t){var e;if(this.hasAttribute("id")||this.setAttribute("id",`${this.tagName.toLowerCase()}-${crypto.randomUUID().slice(0,8)}`),t.has("open")&&(void 0!==t.get("open")||this.open)&&this.manageOpen(t.get("open")),t.has("trigger")){const[t,n]=(null==(e=this.trigger)?void 0:e.split("@"))||[];this.elementResolver.selector=t?`#${t}`:"",this.triggerInteraction=n}const n=this.triggerElement;t.has(s)&&(this.triggerElement=this.elementResolver.element,this.manageTriggerElement(n)),t.has("triggerElement")&&this.manageTriggerElement(t.get("triggerElement"))}updated(t){super.updated(t),t.has("placement")&&(this.placement?this.dialogEl.setAttribute("actual-placement",this.placement):this.dialogEl.removeAttribute("actual-placement"),this.open&&void 0!==t.get("placement")&&this.placementController.resetOverlayPosition())}renderContent(){return n`
            <slot @slotchange=${this.handleSlotchange}></slot>
        `}get dialogStyleMap(){return{"--swc-overlay-open-count":t.openCount.toString()}}renderDialog(){return n`
            <dialog
                class="dialog"
                part="dialog"
                placement=${m(this.requiresPosition?this.placement||"right":void 0)}
                style=${p(this.dialogStyleMap)}
                @close=${this.handleBrowserClose}
                @cancel=${this.handleBrowserClose}
                @beforetoggle=${this.handleBeforetoggle}
                ?is-visible=${"closed"!==this.state}
            >
                ${this.renderContent()}
            </dialog>
        `}renderPopover(){return n`
            <div
                class="dialog"
                part="dialog"
                placement=${m(this.requiresPosition?this.placement||"right":void 0)}
                popover=${m(this.popoverValue)}
                style=${p(this.dialogStyleMap)}
                @beforetoggle=${this.handleBeforetoggle}
                @close=${this.handleBrowserClose}
                ?is-visible=${"closed"!==this.state}
            >
                ${this.renderContent()}
            </div>
        `}render(){const t="modal"===this.type||"page"===this.type;return n`
            ${t?this.renderDialog():this.renderPopover()}
            <slot name="longpress-describedby-descriptor"></slot>
        `}connectedCallback(){super.connectedCallback(),this.addEventListener("close",(()=>{this.open=!1})),this.hasNonVirtualTrigger&&this.bindEvents()}disconnectedCallback(){this.hasNonVirtualTrigger&&this.unbindEvents(),this.releaseAriaDescribedby(),this.releaseLongpressDescribedby(),this.open=!1,super.disconnectedCallback()}};zt.styles=[Wt],zt.openCount=1,Vt([e({type:Boolean})],zt.prototype,"delayed",1),Vt([u(".dialog")],zt.prototype,"dialogEl",2),Vt([e({type:Boolean})],zt.prototype,"disabled",1),Vt([g({flatten:!0,selector:':not([slot="longpress-describedby-descriptor"], slot)'})],zt.prototype,"elements",2),Vt([e({type:Number})],zt.prototype,"offset",2),Vt([e({type:Boolean,reflect:!0})],zt.prototype,"open",1),Vt([e()],zt.prototype,"placement",2),Vt([e({attribute:"receives-focus"})],zt.prototype,"receivesFocus",2),Vt([u("slot")],zt.prototype,"slotEl",2),Vt([r()],zt.prototype,"state",1),Vt([e({type:Number,attribute:"tip-padding"})],zt.prototype,"tipPadding",2),Vt([e()],zt.prototype,"trigger",2),Vt([e({attribute:!1})],zt.prototype,"triggerElement",2),Vt([e({attribute:!1})],zt.prototype,"triggerInteraction",2),Vt([e()],zt.prototype,"type",2),o("sp-overlay",zt);var Kt=Object.freeze({__proto__:null});export{b as a,y as b,w as i,Kt as s};
//# sourceMappingURL=373d602b.js.map
